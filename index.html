<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>LightUnfold ‚Ä¢ Web3 AI X1000</title>
<meta name="description" content="Web3 AI t·ª± ƒë·ªông 24/7: c∆° h·ªôi n·ªïi b·∫≠t, thanh to√°n QR, n·ªôi dung cao c·∫•p, affiliate ‚Äì t·ªëi ∆∞u di ƒë·ªông & desktop.">
<link rel="canonical" href="./">
<meta property="og:title" content="LightUnfold ‚Ä¢ Web3 AI X1000">
<meta property="og:description" content="N·ªÅn t·∫£ng Web3 AI X1000 t·ª± v·∫≠n h√†nh 24/7: qu√©t ƒëa ngu·ªìn, c∆° h·ªôi, thanh to√°n, paywall, affiliate.">
<meta property="og:type" content="website">
<meta name="theme-color" content="#0b0f13">
<style>
:root{--bg:#0b0f13;--card:#10161d;--line:#1c2836;--txt:#e9eef4;--mut:#9fb3c8;--brand:#7dc1ff;--accent:#ffb000;--ok:#20c997;--bad:#ff4d4f;--pill:#0f141c}
*{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
a{color:var(--brand);text-decoration:none}
.wrap{max-width:1100px;margin:0 auto;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--pill);color:var(--mut)}
.card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px;margin-top:12px}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.btn{display:inline-flex;gap:8px;align-items:center;background:var(--accent);color:#1a1300;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.out{background:transparent;border:1px solid var(--line);color:var(--txt)}
.badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:4px 10px}
.list .item{display:flex;gap:10px;align-items:flex-start;padding:10px 0;border-top:1px dashed var(--line)}
.score{min-width:60px;text-align:center;border:1px solid var(--line);border-radius:8px;padding:4px 6px;color:#ffdca8;background:#241a00}
.tag{display:inline-block;border:1px solid var(--line);border-radius:8px;padding:2px 8px;margin:2px 4px 0 0;color:#bcd;font-size:12px}
.pay{display:flex;gap:14px}.pay img{width:160px;height:160px;border-radius:12px;border:1px solid var(--line);background:#000}
.pay .meta{flex:1;min-width:0}.mono{font-family:ui-monospace,SFMono-Regular,Consolas,monospace;word-break:break-all}
.hidden{display:none}
.footer{padding:28px 0;text-align:center;color:#9fb3c8}
.ok{color:var(--ok)}.err{color:var(--bad)}
.marquee{white-space:nowrap;overflow:hidden}.marquee>div{display:inline-block;animation:mar 25s linear infinite}
@keyframes mar{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.tabbar{display:flex;gap:8px;flex-wrap:wrap}.tab{padding:6px 10px;border:1px solid var(--line);border-radius:999px;cursor:pointer}
.tab.act{background:var(--accent);color:#1a1300;border-color:transparent}
.appgrid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
.appgrid a{display:block;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--pill);text-align:center}
.light{--bg:#f7fafc;--card:#ffffff;--line:#e2e8f0;--txt:#0b0f13;--mut:#4a5568;--brand:#2563eb;--pill:#f3f6fb}
.alert{background:#2a2e12;border:1px solid #606c38;color:#e9f5c7;border-radius:12px;padding:10px 12px}
.topbtn{position:fixed;left:12px;bottom:80px;z-index:9998}
.sharebar{position:fixed;right:12px;bottom:12px;display:flex;gap:8px;background:#10161d;border:1px solid #1c2836;border-radius:12px;padding:8px;z-index:9999}
.sharebar a{font-size:18px;text-decoration:none}
.hero{display:grid;gap:12px;grid-template-columns:1.2fr .8fr;align-items:center}
@media (max-width:860px){.hero{grid-template-columns:1fr}}
.heroStat{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.heroStat .box{background:var(--pill);border:1px solid var(--line);padding:10px;border-radius:12px;text-align:center}
</style>
</head>
<body>
<div class="wrap">
  <div class="row">
    <a class="pill" href="javascript:history.length>1?history.back():location.href">‚óÄ Back</a>
    <span class="pill">ENS: <b id="ens">‚Äî</b></span>
    <span class="pill">Heartbeat: <b id="hb">‚Äî</b></span>
    <button class="pill" id="openCfg">config</button>
    <button class="pill" id="openData">data</button>
    <span class="pill" id="lang">VI/EN</span>
    <span class="pill" id="theme">üåó Theme</span>
  </div>

  <section class="card hero">
    <div>
      <h1 id="brand" style="margin:0 0 6px">LightUnfold ‚Ä¢ Web3 AI X1000</h1>
      <div id="tagline" style="color:#9fb3c8;margin-bottom:8px">‚Äî</div>
      <div class="row" style="gap:8px;margin:8px 0">
        <a class="btn out" target="_blank" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" rel="noopener">ƒêƒÉng k√Ω Binance</a>
        <a class="btn out" target="_blank" href="https://algosone.page.link/MbtR" rel="noopener">AlgosOne (AI Trading)</a>
      </div>
      <div class="row" style="gap:8px"><span class="tag" id="pulse">C·∫≠p nh·∫≠t: ‚Äî</span><span class="tag" id="scanMode">qu√©t: ‚Äî</span></div>
    </div>
    <div class="heroStat">
      <div class="box"><div style="color:#9fb3c8">C∆° h·ªôi</div><div id="kOpps" style="font-weight:800;font-size:20px">0</div></div>
      <div class="box"><div style="color:#9fb3c8">Ngu·ªìn</div><div id="kSrc" style="font-weight:800;font-size:20px">2</div></div>
      <div class="box"><div style="color:#9fb3c8">Ng√¥n ng·ªØ</div><div id="kLoc" style="font-weight:800;font-size:20px">vi/en</div></div>
    </div>
  </section>

  <section class="card">
    <div class="row" style="justify-content:space-between">
      <h3 id="hotTitle" style="margin:0">üî• C∆° h·ªôi n·ªïi b·∫≠t</h3>
      <div class="row">
        <button class="btn out" id="refreshNow">‚Üª L√†m m·ªõi</button>
      </div>
    </div>
    <div class="marquee" style="margin:4px 0 8px;color:#bcd"><div id="ticker">‚Äî</div></div>
    <div id="alertBox" class="alert hidden"></div>
    <div id="opps" class="list"></div>
  </section>

  <section class="card">
    <h3 id="payTitle" style="margin:0 0 8px">üí≥ Thanh to√°n</h3>
    <div id="pays" class="grid"></div>
    <div style="color:#9fb3c8;margin-top:6px"><span id="minLbl">T·ªëi thi·ªÉu</span>: <span id="mins"></span> ¬∑ <span id="contactLbl">Li√™n h·ªá</span>: <span id="pp"></span></div>
  </section>

  <section class="card">
    <h3 id="lockTitle" style="margin:0 0 8px">üîì N·ªôi dung cao c·∫•p</h3>
    <div id="locked">
      <div class="grid">
        <div>
          <input id="unlockCode" placeholder="Nh·∫≠p m√£ m·ªü kh√≥a‚Ä¶" style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:var(--pill);color:var(--txt)">
          <input id="txhash" style="margin-top:8px;width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:var(--pill);color:var(--txt)" placeholder="(T√πy ch·ªçn) D√°n m√£ giao d·ªãch/b·∫±ng ch·ª©ng">
          <div class="row" style="margin-top:8px">
            <button class="btn" id="doUnlock">M·ªü kh√≥a</button>
            <button class="btn out" id="remember">Nh·ªõ tr√™n thi·∫øt b·ªã</button>
          </div>
          <div id="uMsg" style="margin-top:6px;color:#9fb3c8"></div>
        </div>
        <div style="color:#9fb3c8">
          <b id="howTitle">C√°ch ho·∫°t ƒë·ªông</b>
          <ul id="howList">
            <li>Thanh to√°n (ETH/USDT/MoMo/VCB/PayPal‚Ä¶)</li>
            <li>Nh·∫≠n m√£ ‚Üí nh·∫≠p ƒë·ªÉ m·ªü kh√≥a n·ªôi dung</li>
            <li>L∆∞u m√£ & m√£ giao d·ªãch tr√™n thi·∫øt b·ªã c·ªßa b·∫°n</li>
          </ul>
        </div>
      </div>
    </div>
    <div id="opened" class="hidden">
      <div class="row"><span class="pill ok" id="unlockedLbl">‚úî ƒê√£ m·ªü kh√≥a</span><button class="btn out" id="relock">Kho√° l·∫°i</button></div>
      <div id="premium" class="grid" style="margin-top:10px"></div>
    </div>
  </section>

  <section class="card">
    <div class="row" style="justify-content:space-between">
      <h3 id="packTitle" style="margin:0">üß∞ G√≥i s·∫£n ph·∫©m / B√°o c√°o</h3>
      <div class="tabbar" id="timeTabs">
        <div class="tab act" data-t="day">Ng√†y</div>
        <div class="tab" data-t="month">Th√°ng</div>
        <div class="tab" data-t="quarter">Qu√Ω</div>
        <div class="tab" data-t="year">NƒÉm</div>
      </div>
    </div>
    <div id="bundles" class="grid"></div>
  </section>

  <section class="card">
    <h3 style="margin:0 0 8px">ü§ù Affiliate</h3>
    <div id="affs" class="grid"></div>
  </section>

  <section class="card">
    <h3 style="margin:0 0 8px">üß≠ Command Center</h3>
    <div id="apps" class="appgrid"></div>
    <div style="color:#9fb3c8;margin-top:6px" id="hubHint">Hub t·ª± ph√°t hi·ªán & li√™n k·∫øt t·ªõi c√°c c√¥ng c·ª• c≈© (dex, hyper_v2, pro, super_auto, super_share, xportal‚Ä¶).</div>
  </section>

  <section class="card">
    <h3 style="margin:0 0 8px" id="ctaTitle">üöÄ B·∫Øt ƒë·∫ßu ngay</h3>
    <div class="grid">
      <div class="card" style="background:#0f151d"><b id="cta1H">T·∫°o l·ª£i th·∫ø th√¥ng tin</b><div id="cta1" style="color:#9fb3c8;margin-top:6px">Theo d√µi bi·∫øn ƒë·ªông l·ªõn & t√≠n hi·ªáu s·ªõm ‚Äì tr∆∞·ªõc ƒë√°m ƒë√¥ng.</div></div>
      <div class="card" style="background:#0f151d"><b id="cta2H">T·ªëi ∆∞u chi ph√≠</b><div id="cta2" style="color:#9fb3c8;margin-top:6px">G√≥i ng√†y/th√°ng/qu√Ω ‚Äì tr·∫£ cho th·ª© b·∫°n d√πng.</div></div>
      <div class="card" style="background:#0f151d"><b id="cta3H">Lan t·ªèa t·ª± ƒë·ªông</b><div id="cta3" style="color:#9fb3c8;margin-top:6px">Chia s·∫ª 1 ch·∫°m (Telegram/X/Facebook/LinkedIn) ‚Äì Affiliate hoa h·ªìng.</div></div>
    </div>
  </section>

  <button class="pill topbtn" id="goTop">‚Üë Top</button>
  <div class="footer">¬© <span id="year"></span> LightUnfold ‚Ä¢ <span id="autoLbl">T·ª± ƒë·ªông 24/7</span></div>
</div>

<div class="sharebar">
  <a id="sh_tg" target="_blank" rel="noopener">üì£</a>
  <a id="sh_x"  target="_blank" rel="noopener">ùïè</a>
  <a id="sh_fb" target="_blank" rel="noopener">f</a>
  <a id="sh_in" target="_blank" rel="noopener">in</a>
</div>

<script>
/* ========= Core helpers ========= */
const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
const fmt=n=>Number(n||0).toLocaleString(undefined,{maximumFractionDigits:8});
const qrlink=t=>`https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(t)}`;
async function j(url){try{const r=await fetch(url,{cache:'no-store'});if(!r.ok) throw 0;return await r.json()}catch(_){return null}}
function setTheme(m){document.documentElement.classList.toggle('light',m==='light');localStorage.setItem('theme',m)}
setTheme(localStorage.getItem('theme')||'dark'); $('#theme').onclick=()=>setTheme(document.documentElement.classList.contains('light')?'dark':'light');

/* ========= i18n ========= */
const I18N={
  vi:{hot:"üî• C∆° h·ªôi n·ªïi b·∫≠t",pay:"üí≥ Thanh to√°n",minLbl:"T·ªëi thi·ªÉu",contactLbl:"Li√™n h·ªá",lock:"üîì N·ªôi dung cao c·∫•p",
      how:"C√°ch ho·∫°t ƒë·ªông",unlocked:"‚úî ƒê√£ m·ªü kh√≥a",packs:"üß∞ G√≥i s·∫£n ph·∫©m / B√°o c√°o",
      hub:"Hub t·ª± ph√°t hi·ªán & li√™n k·∫øt t·ªõi c√°c c√¥ng c·ª• c≈© (dex, hyper_v2, pro, super_auto, super_share, xportal‚Ä¶).",
      cta:"üöÄ B·∫Øt ƒë·∫ßu ngay",cta1H:"T·∫°o l·ª£i th·∫ø th√¥ng tin",cta1:"Theo d√µi bi·∫øn ƒë·ªông l·ªõn & t√≠n hi·ªáu s·ªõm ‚Äì tr∆∞·ªõc ƒë√°m ƒë√¥ng.",
      cta2H:"T·ªëi ∆∞u chi ph√≠",cta2:"G√≥i ng√†y/th√°ng/qu√Ω ‚Äì tr·∫£ cho th·ª© b·∫°n d√πng.",
      cta3H:"Lan t·ªèa t·ª± ƒë·ªông",cta3:"Chia s·∫ª 1 ch·∫°m (Telegram/X/Facebook/LinkedIn) ‚Äì Affiliate hoa h·ªìng.",auto:"T·ª± ƒë·ªông 24/7"},
  en:{hot:"üî• Hot opportunities",pay:"üí≥ Payments",minLbl:"Minimum",contactLbl:"Contact",lock:"üîì Premium content",
      how:"How it works",unlocked:"‚úî Unlocked",packs:"üß∞ Products / Reports",
      hub:"Hub that auto‚Äëdetects and links to legacy tools (dex, hyper_v2, pro, super_auto, super_share, xportal‚Ä¶).",
      cta:"üöÄ Get started now",cta1H:"Information edge",cta1:"Track outsized moves & early signals ‚Äì ahead of the crowd.",
      cta2H:"Cost‚Äëefficient",cta2:"Day/Month/Quarter plans ‚Äì pay only for what you use.",
      cta3H:"Auto‚Äëviral growth",cta3:"One‚Äëtap share (Telegram/X/Facebook/LinkedIn) ‚Äì Affiliate rewards.",auto:"Always‚Äëon 24/7"}
};
let LANG=(localStorage.getItem('lang')||navigator.language||'vi').toLowerCase().startsWith('vi')?'vi':'en';
function applyLang(){
  const L=I18N[LANG];
  $('#hotTitle').textContent=L.hot; $('#payTitle').textContent=L.pay; $('#minLbl').textContent=L.minLbl;
  $('#contactLbl').textContent=L.contactLbl; $('#lockTitle').textContent=L.lock; $('#howTitle').textContent=L.how;
  $('#unlockedLbl').textContent=L.unlocked; $('#packTitle').textContent=L.packs; $('#hubHint').textContent=L.hub;
  $('#ctaTitle').textContent=L.cta; $('#cta1H').textContent=L.cta1H; $('#cta1').textContent=L.cta1;
  $('#cta2H').textContent=L.cta2H; $('#cta2').textContent=L.cta2; $('#cta3H').textContent=L.cta3H; $('#cta3').textContent=L.cta3;
  $('#autoLbl').textContent=L.auto; $('#lang').textContent=LANG==='vi'?'VI/EN':'EN/VI';
}
$('#lang').onclick=()=>{LANG=LANG==='vi'?'en':'vi';localStorage.setItem('lang',LANG);applyLang();}; applyLang();

/* ========= Defaults + boot ========= */
const DEF={
  site:{brand:"LightUnfold ‚Ä¢ Web3 AI X1000",ens:"lightunfold.eth",
    tagline:"20,000+ AI ‚Ä¢ 200+ qu·ªëc gia ‚Ä¢ 200+ ng√¥n ng·ªØ ‚Ä¢ t·ª± ƒë·ªông 24/7 ‚Ä¢ chuy·ªÉn ƒë·ªïi X1000",
    contact:{email:"vumumabada@gmail.com"},
    payments:{qr_auto:true,chains:[
      {name:"ETH (EVM)",address:"0x54E15A7b6d4213beE87800432A151d794638E3C2",explorer:"https://etherscan.io/address/0x54E15A7b6d4213beE87800432A151d794638E3C2",min:0.0005},
      {name:"USDT (ERC20)",address:"0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0",explorer:"https://etherscan.io/token/USDT?a=0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0",min:5}
    ],offchain:{momo:"0567892030",vietcombank:"9567892030",paypal:"vumumabada@gmail.com"}},
    affiliates:[
      {name:"Binance",url:"https://www.binance.com/vi/register?ref=GRO_20338_9V44N",tag:"Top CEX"},
      {name:"AlgosOne",url:"https://algosone.page.link/MbtR",tag:"AI Trading"},
      {name:"OKX",url:"https://www.okx.com/join/your-code",tag:"CEX"},
      {name:"Bybit",url:"https://www.bybit.com/invite?ref=your-code",tag:"Derivatives"}
    ]
  },
  feeds:{top_n:12}, schedule:{refresh_minutes:10},
  secrets:{unlock_code:"X1000VIP"},
  store:{bundles:[
    {title:"Alpha Signals X",price:99,desc:"T√≠n hi·ªáu ng·∫Øn h·∫°n x√°c su·∫•t cao.",tags:["Scalping","DeFi","Spot"]},
    {title:"ETF & BTC Flow",price:79,desc:"D√≤ng v·ªën ETF/BTC ‚Äì qu·ªπ & miner.",tags:["BTC","ETF","Flow"]},
    {title:"Altseason Radar",price:69,desc:"Chu k·ª≥ v·ªën h√≥a & leader/laggard.",tags:["Cycle","Momentum"]},
    {title:"Whale Watcher Pro",price:89,desc:"Theo d√µi v√≠ c√° voi & giao d·ªãch l·ªõn.",tags:["Onchain","Whales"]},
    {title:"Airdrop Hunter",price:59,desc:"L·ªãch farming & ƒëi·ªÉm t√≠ch l≈©y.",tags:["Quest","Points"]},
    {title:"Perp Heatmap",price:79,desc:"Funding, OI, liquidation map.",tags:["Futures","Heatmap"]},
    {title:"Narrative Scanner",price:49,desc:"Xu h∆∞·ªõng L2, AI, RWA, GameFi.",tags:["Narrative"]},
    {title:"Risk Guard",price:39,desc:"C·∫£nh b√°o r·ªßi ro smart‚Äëmoney & dev activity.",tags:["Risk","Safety"]},
    {title:"Tokenomics Lens",price:69,desc:"L·ªãch vesting & pha lo√£ng.",tags:["Vesting","FDV"]},
    {title:"Copy‚ÄëTrade Radar",price:59,desc:"Theo d√µi trader m·∫´u & t√≠n hi·ªáu sao ch√©p.",tags:["Copy","Social"]}
  ],
  premium:[
    {title:"Alpha Feed Pro",desc:"D√≤ng tin alpha si√™u nhanh (ƒë·ªô tr·ªÖ ms).",bullets:["B·∫•t th∆∞·ªùng d√≤ng ti·ªÅn","Ngu·ªìn ƒëa k√™nh","B·ªô l·ªçc nhi·ªÖu"],link:"data/latest.json"},
    {title:"Deal Flow Private",desc:"T·ªïng h·ª£p deal/seed ƒëang m·ªü private.",bullets:["ƒêi·ªÅu ki·ªán","∆Øu ti√™n th·ªùi gian"]}
  ]}
};
let CFG=DEF, lastTS=Date.now();

(async function boot(){
  $('#year').textContent=new Date().getFullYear();
  const cfg=await j('config.json'); if(cfg) CFG=Object.assign({},DEF,cfg);

  // header
  $('#brand').textContent=CFG.site.brand; $('#ens').textContent=CFG.site.ens; $('#tagline').textContent=CFG.site.tagline;

  // contact
  const contact=(CFG.site?.contact?.email||CFG.site?.contact||CFG.site.ens||'').toString();
  $('#pp').innerHTML = contact ? `<a href="mailto:${contact}" target="_blank" rel="noopener">${contact}</a>` : '‚Äî';

  // share
  const u=encodeURIComponent(location.href), t=encodeURIComponent(document.title);
  $('#sh_tg').href=`https://t.me/share/url?url=${u}`; $('#sh_x').href=`https://twitter.com/intent/tweet?text=${t}&url=${u}`;
  $('#sh_fb').href=`https://www.facebook.com/sharer/sharer.php?u=${u}`; $('#sh_in').href=`https://www.linkedin.com/sharing/share-offsite/?url=${u}`;

  // buttons
  $('#refreshNow').onclick=loadData;
  $('#goTop').onclick=()=>window.scrollTo({top:0,behavior:'smooth'});
  $('#openCfg').onclick=()=>window.open('config.json','_blank','noopener'); 
  $('#openData').onclick=()=>window.open('data/latest.json','_blank','noopener');

  // modules
  renderPays(); renderAffs(); renderBundles('day'); bindTabs(); paintPremium(); bindPaywall();
  $('#apps').innerHTML=["dex.html","hyper_v2.html","pro.html","super_auto.html","super_share.html","xportal.html"]
      .map(n=>`<a href="${n}" target="_blank" rel="noopener">${n.replace('.html','').replaceAll('_',' ').toUpperCase()}</a>`).join('');

  // data loop
  await loadData(); const every=Math.max(3, Number(CFG.schedule?.refresh_minutes||10)); setInterval(loadData,every*60*1000);
  setInterval(()=>$('#pulse').textContent=(LANG==='vi'?'C·∫≠p nh·∫≠t: ':'Updated: ')+(((Date.now()-lastTS)/1000)|0)+'s',1000);

  // try load packs (future upgrades)
  try{ await loadPacks(); }catch(_){}
})();

/* ========= Data ========= */
async function loadData(){
  const latest=await j('data/latest.json'); lastTS=Date.now();
  if(latest && Array.isArray(latest.items)){ $('#scanMode').textContent='qu√©t: data'; renderOpps(latest.items); }
  else { const items=await scanLive(); $('#scanMode').textContent='qu√©t: fallback'; renderOpps(items); }
  $('#hb').textContent='LIVE';
}
async function scanLive(){
  const items=[];
  try{
    const cg=await j('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=volume_desc&per_page=40&page=1&price_change_percentage=1h,24h,7d');
    if(Array.isArray(cg)) for(const c of cg){
      items.push({source:'coingecko',symbol:(c.symbol||'').toUpperCase(),name:c.name,
        price:+c.current_price||0,ch24h:+c.price_change_percentage_24h_in_currency||0,vol24h:+c.total_volume||0,
        score:(+c.price_change_percentage_1h_in_currency||0)*0.4+(+c.price_change_percentage_24h_in_currency||0)*0.35+(+c.price_change_percentage_7d_in_currency||0)*0.25+Math.log10((+c.total_volume||1)),
        link:`https://www.coingecko.com/en/coins/${c.id}`});
    }
  }catch(_){}
  try{
    const cl=await j('https://api.coinlore.net/api/tickers/?start=0&limit=40');
    (cl?.data||[]).forEach(c=>items.push({source:'coinlore',symbol:(c.symbol||'').toUpperCase(),name:c.name,
      price:+c.price_usd||0,ch24h:+c.percent_change_24h||0,vol24h:+c.volume24||0,
      score:(+c.percent_change_24h||0)*0.7+Math.log10((+c.volume24||1)),
      link:`https://www.coinlore.com/coin/${(c.name||'').toLowerCase().replace(/\s+/g,'-')}`}));
  }catch(_){}
  const best={}; items.forEach(it=>{if(!it.symbol)return; if(!best[it.symbol]||it.score>best[it.symbol].score) best[it.symbol]=it;});
  return Object.values(best).sort((a,b)=>b.score-a.score).slice(0, CFG.feeds?.top_n||12);
}
function renderOpps(items){
  $('#kOpps').textContent = items.length||0;
  $('#kSrc').textContent = '2';
  $('#kLoc').textContent = 'vi/en';
  $('#ticker').innerHTML = (items||[]).map(x=>`<span class="tag">${x.symbol}: $${fmt(x.price)} (${(x.ch24h||0).toFixed(2)}%)</span>`).join('') || '‚Äî';

  const maxAbs = items?.length ? Math.max(...items.map(x=>Math.abs(x.ch24h||0))) : 0;
  const alertBox = $('#alertBox'); const ALERT_TH=12;
  if(maxAbs>=ALERT_TH){ alertBox.classList.remove('hidden'); alertBox.innerHTML = `‚ö†Ô∏è <b>${LANG==='vi'?'Bi·∫øn ƒë·ªông l·ªõn':'Large move'}</b> (${maxAbs.toFixed(2)}%) ‚Äì ${LANG==='vi'?'ki·ªÉm tra c∆° h·ªôi b√™n d∆∞·ªõi.':'check opportunities below.'}`;}
  else { alertBox.classList.add('hidden'); alertBox.textContent=''; }

  $('#opps').innerHTML=(items||[]).map(x=>{
    const ch=x.ch24h||0, pct=`${ch>=0?'+':''}${ch.toFixed(2)}%`;
    return `<div class="item">
      <div class="score">+${(x.score||0).toFixed(2)}</div>
      <div style="flex:1;min-width:0">
        <div class="row" style="justify-content:space-between;gap:8px">
          <div><b>${x.symbol}</b> ¬∑ <span style="color:#9fb3c8">${x.name||''}</span></div>
          <a class="btn out" target="_blank" rel="noopener" href="${x.link||'#'}">${LANG==='vi'?'Chi ti·∫øt':'Details'} ‚Üó</a>
        </div>
        <div class="row" style="gap:8px">
          <span class="tag">${LANG==='vi'?'Gi√°':'Price'}: $${fmt(x.price||0)}</span>
          <span class="tag ${ch>=0?'':'err'}">24h: ${pct}</span>
          <span class="tag">${LANG==='vi'?'Kh·ªëi l∆∞·ª£ng':'Volume'}: $${fmt(x.vol24h||0)}</span>
          <span class="tag">Src: ${x.source}</span>
        </div>
      </div>
    </div>`;
  }).join('') || '<div style="color:#9fb3c8">‚Äî</div>';
}

/* ========= Payments ========= */
function renderPays(){
  const P=CFG.site?.payments||{}; const chains=P.chains||[]; const off=P.offchain||{};
  const mins=(()=>{const m={}; chains.forEach(c=>{if(/ETH/i.test(c.name)) m.ETH=c.min||0.0005; if(/USDT/i.test(c.name)) m.USDT=c.min||5}); return m})();
  $('#mins').textContent=["ETH ‚â• "+(mins.ETH||0.0005),"USDT ‚â• "+(mins.USDT||5)].join(", ");
  const items=[];
  chains.forEach(c=>{
    items.push(`
      <div class="card"><div class="pay">
        <img alt="QR" src="${qrlink(c.address)}" loading="lazy">
        <div class="meta">
          <div class="row" style="justify-content:space-between"><b>${c.name}</b>
            <a class="btn out" target="_blank" rel="noopener" href="https://metamask.app.link/">${LANG==='vi'?'M·ªü v√≠/·ª©ng d·ª•ng':'Open wallet/app'} ‚Üó</a></div>
          <div class="mono"><a href="${c.explorer||'#'}" target="_blank" rel="noopener">${c.address}</a></div>
          ${c.explorer?`<div style="color:#9fb3c8">Explorer: <a target="_blank" rel="noopener" href="${c.explorer}">On‚Äëchain ‚Üó</a></div>`:""}
          ${c.min?`<div style="color:#9fb3c8">${LANG==='vi'?'T·ªëi thi·ªÉu':'Minimum'}: ${c.min}</div>`:""}
          <div class="row" style="margin-top:8px">
            <button class="btn" onclick="navigator.clipboard.writeText('${c.address}')">${LANG==='vi'?'Sao ch√©p':'Copy'}</button>
            <a class="btn out" href="${qrlink(c.address)}" download>‚ö° ${LANG==='vi'?'T·∫£i QR':'Download QR'}</a>
          </div>
        </div>
      </div></div>`);
  });
  if(off.momo) items.push(payBox("MoMo",off.momo,LANG==='vi'?"V√≠ MoMo Vi·ªát Nam.":"Vietnam MoMo wallet."));
  if(off.vietcombank) items.push(payBox("Vietcombank",off.vietcombank,LANG==='vi'?"Chuy·ªÉn kho·∫£n VCB.":"VCB bank transfer."));
  if(off.paypal) items.push(payBox("PayPal",off.paypal,`${LANG==='vi'?'Thanh to√°n PayPal.':'Pay via PayPal.'} <a target="_blank" rel="noopener" href="https://www.paypal.me/${off.paypal.split('@')[0]}">PayPal.me ‚Üó</a>`));
  $('#pays').innerHTML=items.join("");

  function payBox(label,addr,hint){return `
    <div class="card"><div class="pay">
      <img alt="QR" src="${qrlink(addr)}" loading="lazy">
      <div class="meta">
        <div class="row" style="justify-content:space-between"><b>${label}</b><span></span></div>
        <div style="color:#9fb3c8">${hint||""}</div>
        <div class="mono">${addr}</div>
        <div class="row" style="margin-top:8px">
          <button class="btn" onclick="navigator.clipboard.writeText('${addr}')">${LANG==='vi'?'Sao ch√©p':'Copy'}</button>
          <a class="btn out" href="${qrlink(addr)}" download>‚ö° ${LANG==='vi'?'T·∫£i QR':'Download QR'}</a>
        </div>
      </div>
    </div></div>`}
}

/* ========= Affiliates ========= */
function renderAffs(){
  const A=CFG.site?.affiliates||[];
  $('#affs').innerHTML=A.map(a=>`<a class="card" href="${a.url}" target="_blank" rel="noopener">
    <b>${a.name}</b><div style="color:#9fb3c8">${a.tag||'Partner'}</div></a>`).join('');
}

/* ========= Bundles ========= */
function bindTabs(){ $('#timeTabs').onclick=e=>{const t=e.target.closest('.tab'); if(!t) return; $$('#timeTabs .tab').forEach(x=>x.classList.remove('act')); t.classList.add('act'); renderBundles(t.dataset.t)}}
function renderBundles(mode='day'){
  const B=CFG.store?.bundles||[];
  $('#bundles').innerHTML=B.map(b=>{
    const tags=(b.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');
    return `<div class="card">
      <div class="row" style="justify-content:space-between"><b>${b.title}</b><span class="badge">$${b.price}</span></div>
      <div style="color:#9fb3c8">${b.desc||''}</div>
      <div style="margin-top:6px">${tags}</div>
      <div class="row" style="margin-top:8px"><button class="btn" onclick="document.getElementById('unlockCode').focus()">${LANG==='vi'?'Mua & nh·∫≠p m√£':'Buy & enter code'}</button><span class="badge">${mode}</span></div>
    </div>`;
  }).join('');
}

/* ========= Premium + Paywall ========= */
function paintPremium(){
  const P=CFG.store?.premium||[];
  $('#premium').innerHTML=P.map(p=>`<div class="card"><b>${p.title}</b>
    <div style="color:#9fb3c8">${p.desc||''}</div>
    ${p.bullets?`<ul>${p.bullets.map(x=>`<li>${x}</li>`).join('')}</ul>`:""}
    ${p.link?`<a class="btn out" target="_blank" rel="noopener" href="${p.link}">${LANG==='vi'?'Xem d·ªØ li·ªáu':'Open data'} ‚Üó</a>`:""}
  </div>`).join('');
}
function bindPaywall(){
  const MASTER="23061988"; // master cho Founder
  const SECRET=String(CFG.secrets?.unlock_code||'X1000VIP');
  const saved=localStorage.getItem('unlocked_code')||'';
  function gate(open){$('#locked').classList.toggle('hidden',open);$('#opened').classList.toggle('hidden',!open);}
  if(saved===SECRET||saved===MASTER){gate(true); paintPremium(); const th=localStorage.getItem('tx_hash'); if(th) $('#uMsg').innerHTML='<span class="ok">TX: '+th+'</span>';}
  $('#doUnlock').onclick=()=>{const code=$('#unlockCode').value.trim(),tx=$('#txhash').value.trim();
    if(code===SECRET||code===MASTER){gate(true); paintPremium(); $('#uMsg').innerHTML='<span class="ok">'+(LANG==='vi'?'ƒê√£ m·ªü kh√≥a!':'Unlocked!')+'</span>'; if(tx) localStorage.setItem('tx_hash',tx);}
    else $('#uMsg').innerHTML='<span class="err">'+(LANG==='vi'?'M√£ kh√¥ng ƒë√∫ng.':'Invalid code.')+'</span>';};
  $('#remember').onclick=()=>{const c=$('#unlockCode').value.trim(); if(c){localStorage.setItem('unlocked_code',c); $('#uMsg').textContent=LANG==='vi'?'ƒê√£ l∆∞u tr√™n thi·∫øt b·ªã.':'Saved on device.'}};
  $('#relock').onclick=()=>{localStorage.removeItem('unlocked_code'); gate(false);};
}

/* ========= Packs (t∆∞∆°ng lai n√¢ng c·∫•p ‚Äì kh√¥ng ƒë·ª•ng index) ========= */
async function loadPacks(){
  // T·ª± t√¨m danh s√°ch packs n·∫øu c√≥
  const guess=["packs/alert-pack.js","packs/alpha-pack.js","packs/seo-pack.js"]; // th√™m file m·ªõi ‚Üí index t·ª± n·∫°p
  for(const src of guess){
    try{ await import(src);}catch(_){}
  }
}

/* ========= PWA mini ========= */
try{
  const sw=`const CORE=['./','index.html','config.json','data/latest.json'];
  self.addEventListener('install',e=>{e.waitUntil(caches.open('hp-core').then(c=>c.addAll(CORE)).then(()=>self.skipWaiting()))});
  self.addEventListener('activate',e=>{e.waitUntil(self.clients.claim())});
  self.addEventListener('fetch',e=>{const u=new URL(e.request.url);
    if(u.origin===location.origin){e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));return;}
    e.respondWith(fetch(e.request).catch(()=>caches.match('./')));});`;
  const url=URL.createObjectURL(new Blob([sw],{type:'text/javascript'}));
  navigator.serviceWorker.register(url,{scope:'./'});
}catch(_){}
</script>
</body>
</html>
