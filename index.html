<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>UltraMaster V‚àû ‚Ä¢ R3 Final++++ Nexus</title>
<meta name="description" content="Top 3 token ti·ªÅm nƒÉng ‚Ä¢ Token ch·ªçn l·ªçc mi·ªÖn ph√≠ ‚Ä¢ SuperGate m·ªü kh√≥a t·ª©c th√¨ ‚Ä¢ AI h·ªèi ƒë√°p 24/7 ‚Ä¢ QR thanh to√°n 1 ch·∫°m.">
<meta property="og:title" content="UltraMaster V‚àû ‚Ä¢ R3 Final++++ Nexus">
<meta property="og:description" content="Top 3 Premium ‚Ä¢ Token ch·ªçn l·ªçc mi·ªÖn ph√≠ ‚Ä¢ H·ªçc vi·ªán tinh g·ªçn ‚Ä¢ QR thanh to√°n 1 ch·∫°m ‚Ä¢ Radar Alpha realtime.">
<meta property="og:type" content="website">
<meta name="theme-color" content="#0b0f13">
<style>
:root{
  --bg:#0b0f13;--card:#0f141a;--line:#1e2a3a;--txt:#e9eef4;--mut:#a9b8c8;
  --brand:#7dc1ff;--accent:#ffb000;--ok:#22c55e;--bad:#ff4d4f;--pill:#101825;
  --halo:#65d6ce;--ocean:#0E3A5A;--land:#D8B15A;--moon:#F3E7B3;--gold:#ffd38a;--shadow:rgba(0,0,0,.35);
  --ctaGreen:#123524;--ctaBorder:#244c36;--ctaSoft:#0f1d16
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
a{color:var(--brand);text-decoration:none}
.wrap{max-width:1120px;margin:0 auto;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{display:inline-flex;gap:8px;align-items:center;padding:6px 12px;border:1px solid var(--line);border-radius:999px;background:#101825;color:#cfe0ef}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;margin-top:12px}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.btn{display:inline-flex;gap:8px;align-items:center;background:var(--accent);color:#1a1300;border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
.btn.out{background:transparent;border:1px solid var(--line);color:var(--txt)}
.badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:4px 10px}
.hidden{display:none}
.mono{font-family:ui-monospace,SFMono-Regular,Consolas,monospace;word-break:break-all}
.footer{padding:28px 0;text-align:center;color:var(--mut)}
.muted{color:var(--mut)}
.now{font-size:22px;font-weight:800}
.tag{display:inline-block;border:1px solid var(--line);border-radius:8px;padding:2px 8px;margin:2px 4px 0 0;color:#c9d6e2;font-size:12px}
.shop-card{padding:14px;border:1px solid var(--line);border-radius:12px;background:#0e1720}
.kpi{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
.kbox{background:#0f1720;border:1px solid var(--line);border-radius:12px;padding:10px}

/* Light mode redesigned (m·∫∑t s√°ng/‚Äúl·∫≠t ph√≠a sau‚Äù) */
.light{
  --bg:#f5f9fb;--card:#ffffff;--line:#e2e8f0;--txt:#0b0f13;--mut:#4a5568;
  --brand:#2563eb;--pill:#eef4ff;--ctaGreen:#e8f5ef;--ctaBorder:#bfe1cf;--ctaSoft:#f2fbf7;
  --ocean:#2F6B8A;--land:#E5C37A;--halo:#7adbd4;--moon:#f8f1c7
}
.light .accent-veil{background:
  radial-gradient(120% 120% at 50% -20%, rgba(18,53,36,.18), transparent 55%),
  linear-gradient(180deg, rgba(255,214,153,.18), rgba(255,255,255,0) 60%),
  var(--card);border-color:#cfe7d9}
.light .qr-wrap{background:#ffffff;border-color:#e2e8f0;box-shadow:0 10px 24px rgba(0,0,0,.06)}

/* Accent veil applied to key sections */
.accent-veil{background:
  linear-gradient(180deg,rgba(18,53,36,.22),transparent 50%),
  radial-gradient(120% 100% at 50% -30%, rgba(18,53,36,.28), transparent 60%),
  var(--card);border-color:#203b2c}

/* HERO */
.hero{position:relative;border:1px solid var(--line);border-radius:18px;overflow:hidden;background:
  radial-gradient(70% 140% at 50% -10%, rgba(41,93,64,.35), transparent),
  radial-gradient(80% 120% at 50% 10%, rgba(21,58,40,.25), transparent),
  linear-gradient(180deg, rgba(22,54,37,.12), transparent)}
.ribbon{position:absolute;inset:auto -30% -10% -30%;height:140px;background:
  linear-gradient(90deg,rgba(52,115,84,.25),rgba(13,63,45,.05),rgba(52,115,84,.25));filter:blur(18px);transform:rotate(-2deg)}
.logo-hero{display:flex;align-items:center;gap:8px}
.logo-dot{width:12px;height:12px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 0 rgba(255,176,0,.6);animation:pulse 1.6s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,176,0,.5)}70%{box-shadow:0 0 0 12px rgba(255,176,0,0)}100%{box-shadow:0 0 0 0 rgba(255,176,0,0)}}
.hero-cta{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}

/* Header layout */
.header-flex{display:grid;grid-template-columns:1.2fr .8fr;gap:14px;align-items:center}
@media (max-width:900px){.header-flex{grid-template-columns:1fr}}

/* Globe + moon + radar */
.globe-wrap{position:relative;display:grid;place-items:center;gap:10px}
.globe{position:relative;width:min(300px,60vw);aspect-ratio:1;border-radius:50%;
  box-shadow:0 18px 34px var(--shadow), inset 0 0 40px rgba(101,214,206,.12);
  background:
   radial-gradient(circle at 50% 50%, rgba(101,214,206,.22), transparent 60%),
   conic-gradient(from 0deg, var(--ocean) 0 25%, var(--land) 25% 30%, var(--ocean) 30% 55%, var(--land) 55% 60%, var(--ocean) 60% 100%);
  animation:earthSpin 55s linear infinite
}
@keyframes earthSpin{to{transform:rotate(360deg)}}
.glow{position:absolute;inset:-6px;border-radius:50%;box-shadow:0 0 35px 10px rgba(101,214,206,.25);pointer-events:none}

/* Moon orbit around earth */
.orbit{position:absolute;inset:0;transform-origin:center;animation:orbit 20s linear infinite}
@keyframes orbit{to{transform:rotate(360deg)}}
.moon{position:absolute;top:50%;left:50%;width:20px;height:20px;border-radius:50%;background:var(--moon);
  box-shadow:0 0 14px 4px rgba(255,240,180,.35);
  transform:translate(-50%,-50%) translateX(46%)}
.moon::after{content:"";position:absolute;inset:-6px;border-radius:50%;box-shadow:0 0 28px 6px rgba(255,240,180,.22)}

/* Radar fixed at top-right of globe */
.radar{position:absolute;right:-6%;top:-6%;width:58px;height:58px;border-radius:12px;background:#10202a;border:1px solid var(--line);display:grid;place-items:center}
.radar::before,.radar::after{content:"";position:absolute;border:2px solid rgba(101,214,206,.45);border-radius:50%}
.radar::before{width:44px;height:44px;animation:pulseR 2.6s ease-out infinite}
.radar::after{width:28px;height:28px;animation:pulseR 2.6s .6s ease-out infinite}
@keyframes pulseR{0%{opacity:.6;transform:scale(.8)}100%{opacity:0;transform:scale(1.6)}}
.radar-bar{width:28px;height:4px;background:linear-gradient(90deg,transparent,rgba(101,214,206,.9),transparent);animation:scan 1.8s linear infinite}
@keyframes scan{from{transform:translateX(-14px)}to{transform:translateX(14px)}}

/* BTC/ETH/USDT strip */
.tri{justify-content:center}
.tbox{display:flex;gap:8px;align-items:center;border:1px solid var(--line);background:#0f1720;border-radius:10px;padding:6px 8px}
.tbox b{min-width:42px;display:inline-block}
.tval{font-variant-numeric:tabular-nums}
.up{color:var(--ok)} .dn{color:var(--bad)}

/* Pay area */
.paygrid{display:grid;gap:12px;grid-template-columns:1.1fr 1fr}
@media(max-width:900px){.paygrid{grid-template-columns:1fr}}
.qrbox{display:flex;gap:12px}
.qr-wrap{display:grid;place-items:center;border:1px solid var(--line);border-radius:14px;
  background:
    radial-gradient(120% 100% at 50% -30%, rgba(255,176,0,.10), transparent 60%),
    #070b0f;
  box-shadow:0 12px 28px rgba(255,176,0,.12), inset 0 0 0 1px rgba(255,176,0,.15)}
.qr{width:152px;height:152px;border-radius:10px;background:#000}
.paylist{display:grid;gap:8px}
.paybtn{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--line);border-radius:10px;padding:8px 10px;background:#0e1720;cursor:pointer}
.paybtn.active{outline:2px solid var(--accent);box-shadow:0 0 0 4px rgba(255,176,0,.12)}
.copy{font-size:12px;border:1px dashed var(--line);border-radius:8px;padding:3px 8px}

/* Lists */
.list .item{display:flex;gap:10px;align-items:flex-start;padding:10px 0;border-top:1px dashed var(--line)}
.score{min-width:64px;text-align:center;border:1px solid var(--line);border-radius:10px;padding:4px 6px;color:#ffdca8;background:#241a00}

/* Footer CTA all-green */
.footer-cta{border:1px dashed var(--ctaBorder);border-radius:14px;padding:16px;background:
  linear-gradient(180deg,rgba(18,53,36,.35),transparent),
  radial-gradient(80% 120% at 50% -20%, rgba(18,53,36,.35), transparent),
  var(--ctaSoft)}

/* Chat */
.chatfab{position:fixed;right:16px;bottom:16px;z-index:20}
.chatwin{position:fixed;right:16px;bottom:80px;width:min(380px,92vw);max-height:70vh;display:none;flex-direction:column;background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden;z-index:21}
.chathead{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-bottom:1px solid var(--line)}
.chatbody{padding:10px;overflow:auto}
.chatinput{display:flex;gap:6px;padding:10px;border-top:1px solid var(--line)}
.chatinput input{flex:1}
.bubble{padding:8px 10px;border:1px solid var(--line);border-radius:10px;margin:6px 0}
.bubble.me{background:#122033}.bubble.ai{background:#121a12}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;place-items:center;z-index:99}
.modal .box{width:min(92vw,900px);height:min(80vh,700px);background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
.modal header{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line)}
.modal pre{flex:1;margin:0;padding:12px;overflow:auto;background:#0b0f13;color:#cfe0ef}

/* Headlines accent */
.h-accent{color:#d1ffe3}

/* Inputs */
input,select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#0e1720;color:var(--txt)}
.light input,.light select{background:#f7fafc}
</style>
</head>
<body>
<div class="wrap">

  <!-- Top pills -->
  <div class="row">
    <span class="pill logo-hero"><span class="logo-dot"></span><b id="t_brand">UltraMaster V‚àû</b></span>
    <span class="pill">ENS: <b id="ens">lightunfold.eth</b></span>
    <span class="pill">Heartbeat: <b id="hb">‚Äî</b></span>
    <button class="pill" id="openData">data</button>
    <button class="pill" id="lang">VI/EN</button>
    <button class="pill" id="theme">üåó Theme</button>
  </div>

  <!-- HERO -->
  <section class="card hero accent-veil">
    <div class="ribbon"></div>
    <div class="header-flex">
      <div>
        <h1 id="brand">LightUnfold ‚Ä¢ UltraMaster V‚àû</h1>
        <div class="muted" id="tagline">Web3 c·ªßa b·∫°n ‚Äì Tr·ª£ l√Ω t√†i ch√≠nh AI 24/7 ‚Ä¢ M·ªü kh√≥a Top 3 ngay t·∫°i ch·ªó ‚Ä¢ Token ch·ªçn l·ªçc c·∫≠p nh·∫≠t li√™n t·ª•c</div>
        <div class="card accent-veil" style="margin-top:10px">
          <b class="h-accent" id="moto">‚ÄúBi·∫øt s·ªõm ‚Äì Quy·∫øt ƒë·ªãnh s·ªõm ‚Äì L·ª£i th·∫ø s·ªõm.‚Äù</b><br>
          <span id="motoDesc">N∆°i h·ªôi t·ª•: <b>Kho√° h·ªçc tinh g·ªçn</b>, <b>Ph√¢n t√≠ch Crypto realtime</b>, <b>AI h·ªèi ƒë√°p</b> v√† <b>C∆° h·ªôi ƒë·∫ßu t∆∞ s·ªõm nh·∫•t</b>.</span>
        </div>
        <div class="hero-cta" style="margin-top:10px" id="belowGlobe">
          <a class="btn out" id="cta_binance" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n Binance mi·ªÖn ph√≠ ‚Üó</a>
          <a class="btn out" id="cta_algos" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n AlgosOne mi·ªÖn ph√≠ ‚Üó</a>
        </div>
      </div>

      <!-- Globe + Moon + Radar -->
      <div class="globe-wrap">
        <div class="globe" id="globe">
          <span class="glow"></span>
          <div class="orbit"><span class="moon" title="Moon"></span></div>
          <div class="radar" id="radar" title="Alpha Feed">
            <div class="radar-bar"></div>
          </div>
        </div>

        <!-- BTC/ETH/USDT realtime strip -->
        <div class="row tri" id="tri">
          <div class="tbox"><b>BTC</b><span class="tval" id="btcP">‚Äî</span><span id="btcC" class="tval">0.00%</span></div>
          <div class="tbox"><b>ETH</b><span class="tval" id="ethP">‚Äî</span><span id="ethC" class="tval">0.00%</span></div>
          <div class="tbox"><b>USDT</b><span class="tval" id="usdP">‚Äî</span><span id="usdC" class="tval">0.00%</span></div>
        </div>

        <div class="signal"><span class="dot" id="d1"></span><span class="dot" id="d2"></span><span class="dot" id="d3"></span></div>
        <div class="muted" id="globeCap">Tr√°i ƒê·∫•t tr·ª±c tuy·∫øn ¬∑ Moon & Radar gi√°m s√°t 24/7</div>
      </div>
    </div>
  </section>

  <!-- KPI -->
  <div class="kpi">
    <div class="kbox accent-veil"><div class="muted" id="k1t">C∆° h·ªôi</div><div class="now" id="kOpps">0</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k2t">C·∫≠p nh·∫≠t</div><div class="now" id="kUpd">‚Äî</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k3t">ƒêang xem</div><div class="now" id="kLive">‚Äî</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k4t">Doanh thu</div><div class="now">$<span id="kRev">0</span></div></div>
  </div>

  <!-- 1) TOP 3 -->
  <section class="card accent-veil" id="secTop3">
    <h3 style="margin:0 0 8px" id="hTop3">‚≠ê Top 3 Token ti·ªÅm nƒÉng nh·∫•t h√¥m nay</h3>
    <div id="tokenPro" class="grid"></div>
  </section>

  <!-- 2) Token ch·ªçn l·ªçc mi·ªÖn ph√≠ -->
  <section class="card accent-veil" id="secFree">
    <h3 style="margin:0 0 8px" id="hFree">üìä Token ch·ªçn l·ªçc ‚Äì tham kh·∫£o c∆° h·ªôi t·ªët (mi·ªÖn ph√≠)</h3>
    <div id="tokenFree" class="grid"></div>
  </section>

  <!-- 3) H·ªçc vi·ªán -->
  <section class="card accent-veil" id="edu">
    <h3 style="margin:0 0 8px" id="hEdu">üìö H·ªçc nhanh ‚Äì Hi·ªÉu s√¢u ‚Äì Th·ª±c chi·∫øn</h3>
    <div class="grid" id="ebooks"></div>
  </section>

  <!-- 4) C∆° h·ªôi n·ªïi b·∫≠t -->
  <section class="card accent-veil" id="secOpp">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0" id="hOpp">üî• C∆° h·ªôi n·ªïi b·∫≠t</h3>
      <div class="row"><span class="badge" id="scanMode">qu√©t: data</span><button class="btn out" id="refreshNow">‚Üª <span id="btnRefresh">L√†m m·ªõi</span></button></div>
    </div>
    <div class="marquee" style="margin:4px 0 8px;color:#bcd"><div id="ticker">‚Äî</div></div>
    <div id="opps" class="list"></div>
  </section>

  <!-- 5) G√≥i Premium -->
  <section class="card accent-veil" id="secPremium">
    <h3 style="margin:0 0 8px" id="hPlan">üí† Premium ‚Äì m·ªü kh√≥a ph√¢n t√≠ch chuy√™n s√¢u & l·ªô tr√¨nh giao d·ªãch</h3>
    <div id="plans" class="grid"></div>
  </section>

  <!-- 6) SuperGate -->
  <section class="card accent-veil" id="supergate">
    <h3 style="margin:0 0 8px" id="hGate">üîì C·ª≠a m·ªü kho√° (SuperGate)</h3>
    <div class="paygrid">
      <div class="card accent-veil">
        <div class="qrbox">
          <div class="qr-wrap"><img id="qr" class="qr" alt="QR" src="" loading="lazy"></div>
          <div style="flex:1;min-width:0" id="payArea">
            <div class="muted" id="gatePitch"><b>Thanh to√°n nh·ªè ƒë·ªÉ nh·∫≠n m√£ m·ªü kh√≥a ngay t·∫°i ƒë√¢y.</b></div>
            <div class="muted"><span id="addrLbl">ƒê·ªãa ch·ªâ/ID:</span> <span class="mono" id="payAddr">‚Äî</span></div>
            <div class="paylist" id="payList"></div>
          </div>
        </div>
      </div>
      <div class="card accent-veil">
        <div class="grid" style="grid-template-columns:1fr">
          <div><label class="muted" id="bundleLbl">Ch·ªçn g√≥i</label><select id="bundleSel"></select></div>
          <div><label class="muted" id="codeLbl">Nh·∫≠p m√£ m·ªü kho√° (sau khi thanh to√°n)</label><input id="unlockCode" placeholder="Nh·∫≠p m√£‚Ä¶"></div>
          <div><input id="txhash" placeholder="(Tu·ª≥ ch·ªçn) D√°n TX hash / ghi ch√∫"></div>
          <div class="row"><button class="btn" id="doUnlock">M·ªü kho√°</button><button class="btn out" id="remember">Nh·ªõ m√£</button></div>
          <div id="uMsg" class="muted"></div>
          <div class="muted" style="margin-top:6px" id="afterUnlockHint">Sau khi m·ªü kho√°, n·ªôi dung premium xu·∫•t hi·ªán ngay b√™n d∆∞·ªõi. M√£ ƒë∆∞·ª£c nh·ªõ tr√™n thi·∫øt b·ªã c·ªßa b·∫°n.</div>
        </div>
      </div>
    </div>
    <div id="opened" class="hidden" style="margin-top:12px">
      <div class="row"><span class="pill" style="background:#11291a;border-color:#20452f;color:#bff5d0" id="unlockedLbl">‚úî ƒê√£ m·ªü kh√≥a</span><button class="btn out" id="relock">Kho√° l·∫°i</button></div>
      <div id="premium" class="grid" style="margin-top:10px"></div>
    </div>
  </section>

  <!-- 7) AgolsOne -->
  <section class="card accent-veil" id="secAlgos">
    <h3 style="margin:0 0 8px">ü§ù <span id="algosTitle">AgolsOne</span></h3>
    <div class="shop-card" style="border-color:#6b4e00;background:#1a1400">
      <h4 id="algosH">AgolsOne ‚Äì N·ªÅn t·∫£ng chi·∫øn l∆∞·ª£c & c·∫£nh b√°o theo th·ªùi gian th·ª±c</h4>
      <div class="muted" id="algosD">M·ªü t√†i kho·∫£n, sao ch√©p giao d·ªãch AI th√¥ng minh t·ª± v·∫≠n h√†nh ngay c·∫£ khi b·∫°n ƒëang ng·ªß, l·ª£i nhu·∫≠n cao, 80% chi·∫øn th·∫Øng th·ªã tr∆∞·ªùng.</div>
      <a class="btn" style="background:#ffb000;color:#1a1300" id="algosC" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n mi·ªÖn ph√≠ ‚Üó</a>
    </div>
  </section>

  <!-- 8) Binance -->
  <section class="card accent-veil" id="secBNB">
    <h3 style="margin:0 0 8px">ü§ù <span id="bnBT">BNB</span></h3>
    <div class="shop-card" style="border-color:#6b4e00;background:#1a1400">
      <h4 id="bnBH">BNB ‚Äì H·ªá sinh th√°i giao d·ªãch h√†ng ƒë·∫ßu</h4>
      <div class="muted" id="bnBD">Kh·ªõp l·ªánh nhanh, ph√≠ c·∫°nh tranh, s·∫£n ph·∫©m ƒëa d·∫°ng (Spot/Futures/Earn/Launchpad). N∆°i b·∫Øt ƒë·∫ßu an to√†n cho m·ªçi chi·∫øn l∆∞·ª£c.</div>
      <ul class="muted" id="bnBB" style="margin:8px 0 0 18px">
        <li>Thanh kho·∫£n s√¢u, h·ªó tr·ª£ nhi·ªÅu c·∫∑p giao d·ªãch.</li>
        <li>B·∫£o m·∫≠t nhi·ªÅu l·ªõp, 2FA & ki·ªÉm so√°t r·ªßi ro t√†i kho·∫£n.</li>
        <li>H·ªá sinh th√°i l·ªõn: Earn, Launchpool, th·∫ª, API.</li>
      </ul>
      <a class="btn" style="background:#ffb000;color:#1a1300;margin-top:8px" id="bnBC" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n mi·ªÖn ph√≠ ‚Üó</a>
    </div>
  </section>

  <!-- CTA cu·ªëi -->
  <section class="card footer-cta accent-veil" id="lastCTA">
    <h3 style="margin:0 0 6px" id="ctaH">üöÄ C∆° h·ªôi ƒë·∫øn nhanh‚Äîh√£y ch·ªß ƒë·ªông ƒë√≥n l·∫•y</h3>
    <div id="ctaD">Ch·ªâ c·∫ßn <b>m·ªü kh√≥a</b> ho·∫∑c <b>m·ªü t√†i kho·∫£n mi·ªÖn ph√≠</b> h√¥m nay, b·∫°n ƒë√£ s·∫µn s√†ng theo d√µi ‚Äì ph√¢n t√≠ch ‚Äì h√†nh ƒë·ªông trong m·ªôt n∆°i.</div>
    <div class="row" style="margin-top:8px">
      <a class="btn" href="#supergate" id="ctaOpen">M·ªü kh√≥a ngay</a>
      <a class="btn out" id="ctaB" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n Binance mi·ªÖn ph√≠ ‚Üó</a>
      <a class="btn out" id="ctaA" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü t√†i kho·∫£n AlgosOne mi·ªÖn ph√≠ ‚Üó</a>
      <button class="btn out" id="shareMine">Chia s·∫ª li√™n k·∫øt c·ªßa t√¥i</button>
    </div>
  </section>

  <button class="pill" id="goTop" style="position:fixed;left:12px;bottom:80px;z-index:9">‚Üë Top</button>
  <div class="footer">¬© <span id="year"></span> LightUnfold ‚Ä¢ <span id="autoLbl">T·ª± ƒë·ªông 24/7</span></div>
</div>

<!-- Share floating -->
<div class="sharebar" style="position:fixed;right:12px;bottom:12px;display:flex;gap:8px;background:var(--card);border:1px solid var(--line);border-radius:12px;padding:8px;z-index:9">
  <a id="sh_tg" target="_blank" title="Share Telegram">üì£</a>
  <a id="sh_x"  target="_blank" title="Share X/Twitter">ùïè</a>
  <a id="sh_fb" target="_blank" title="Share Facebook">f</a>
  <a id="sh_in" target="_blank" title="Share LinkedIn">in</a>
</div>

<!-- Chat 24/7 -->
<button class="btn chatfab" id="openChat">üß† Chat AI 24/7</button>
<div class="chatwin" id="chat">
  <div class="chathead"><b id="chatH">AI T√†i Ch√≠nh 24/7</b><button class="btn out" id="closeChat">ƒê√≥ng</button></div>
  <div class="chatbody" id="chatBody"></div>
  <div style="padding:0 10px" id="chipBar"></div>
  <div class="chatinput">
    <input id="chatIn" placeholder="H·ªèi th·ªã tr∆∞·ªùng, token, k·∫ø ho·∫°ch l·ªánh‚Ä¶">
    <button class="btn" id="chatSend">G·ª≠i</button>
  </div>
</div>

<!-- Modal Premium Data -->
<div id="dataModal" class="modal">
  <div class="box" role="dialog" aria-modal="true">
    <header><b id="mTitle">D·ªØ li·ªáu Premium</b><button class="btn out" id="closeData">ƒê√≥ng</button></header>
    <pre id="dataPre"></pre>
  </div>
</div>

<script>
/* ===== helpers ===== */
const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
function setTheme(m){document.documentElement.classList.toggle('light',m==='light');localStorage.setItem('theme',m)}
setTheme(localStorage.getItem('theme')||'dark');
$('#theme')?.addEventListener('click',()=>setTheme(document.documentElement.classList.contains('light')?'dark':'light'));
const fmt=n=>Number(n||0).toLocaleString(undefined,{maximumFractionDigits:8});
const qrlink=t=>`https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(t)}`;
async function j(url){try{const r=await fetch(url,{cache:'no-store'});if(!r.ok) throw 0;return await r.json()}catch(_){return null}}
$('#year').textContent=new Date().getFullYear();
$('#goTop').onclick=()=>window.scrollTo({top:0,behavior:'smooth'});

/* ===== Web3 AI Nexus hooks (g·∫Øn AI t·ªïng sau n√†y) ===== */
window.Web3AINexus={
  onMarketFeed:null, onPremiumOpen:null, onLangChange:null, onPayEvent:null, onThemeChange:null,
  pushEvent(type,payload){ try{ (this['on'+type]||(()=>{}))(payload) }catch(e){} }
};

/* ===== external config (ch·ªâ s·ª≠a file JSON, kh√¥ng ch·∫°m HTML) ===== */
let CFG={
  site:{brand:"LightUnfold ‚Ä¢ UltraMaster V‚àû",ens:"lightunfold.eth",
    payments:{chains:[
      {name:"ETH (EVM)",address:"0x54E15A7b6d4213beE87800432A151d794638E3C2",min:"‚â• 0.0005 ETH"},
      {name:"USDT (ERC20)",address:"0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0",min:"‚â• $5"},
      {name:"MoMo",address:"0567892030",min:"Ghi n·ªôi dung: ULTRA"},
      {name:"Vietcombank",address:"9567892030",min:"Ghi n·ªôi dung: ULTRA"},
      {name:"PayPal",address:"vumumabada@gmail.com",min:"Note: ULTRA"}
    ]}
  },
  secrets:{unlock_code:"23061988"}
};
async function loadExternal(){
  const ext = await j('./um-config.json'); if(ext){
    if(ext.site) CFG.site=Object.assign({},CFG.site,ext.site);
    if(ext.secrets) CFG.secrets=Object.assign({},CFG.secrets,ext.secrets);
  }
  const vi = await j('./i18n-vi.json'); if(vi) I.vi=Object.assign({},I.vi,vi);
  const en = await j('./i18n-en.json'); if(en) I.en=Object.assign({},I.en,en);
}

/* ===== i18n ===== */
let LANG=(localStorage.getItem('lang')||navigator.language||'vi').toLowerCase().startsWith('vi')?'vi':'en';
const I={
  vi:{
    brand:"LightUnfold ‚Ä¢ UltraMaster V‚àû",
    tagline:"Web3 c·ªßa b·∫°n ‚Äì Tr·ª£ l√Ω t√†i ch√≠nh AI 24/7 ‚Ä¢ M·ªü kh√≥a Top 3 ngay t·∫°i ch·ªó ‚Ä¢ Token ch·ªçn l·ªçc c·∫≠p nh·∫≠t li√™n t·ª•c",
    moto:"‚ÄúBi·∫øt s·ªõm ‚Äì Quy·∫øt ƒë·ªãnh s·ªõm ‚Äì L·ª£i th·∫ø s·ªõm.‚Äù",
    motoDesc:"N∆°i h·ªôi t·ª•: <b>Kho√° h·ªçc tinh g·ªçn</b>, <b>Ph√¢n t√≠ch Crypto realtime</b>, <b>AI h·ªèi ƒë√°p</b> v√† <b>C∆° h·ªôi ƒë·∫ßu t∆∞ s·ªõm nh·∫•t</b>.",
    globeCap:"Tr√°i ƒê·∫•t tr·ª±c tuy·∫øn ¬∑ Moon & Radar gi√°m s√°t 24/7",
    k1t:"C∆° h·ªôi",k2t:"C·∫≠p nh·∫≠t",k3t:"ƒêang xem",k4t:"Doanh thu",
    hTop3:"‚≠ê Top 3 Token ti·ªÅm nƒÉng nh·∫•t h√¥m nay",
    hFree:"üìä Token ch·ªçn l·ªçc ‚Äì tham kh·∫£o c∆° h·ªôi t·ªët (mi·ªÖn ph√≠)",
    hEdu:"üìö H·ªçc nhanh ‚Äì Hi·ªÉu s√¢u ‚Äì Th·ª±c chi·∫øn",
    hOpp:"üî• C∆° h·ªôi n·ªïi b·∫≠t",
    btnRefresh:"L√†m m·ªõi",
    hPlan:"üí† Premium ‚Äì m·ªü kh√≥a ph√¢n t√≠ch chuy√™n s√¢u & l·ªô tr√¨nh giao d·ªãch",
    hGate:"üîì C·ª≠a m·ªü kho√° (SuperGate)",
    gatePitch:"<b>Thanh to√°n nh·ªè ƒë·ªÉ nh·∫≠n m√£ m·ªü kh√≥a ngay t·∫°i ƒë√¢y.</b>",
    addrLbl:"ƒê·ªãa ch·ªâ/ID:",
    bundleLbl:"Ch·ªçn g√≥i",
    codeLbl:"Nh·∫≠p m√£ m·ªü kho√° (sau khi thanh to√°n)",
    afterUnlockHint:"Sau khi m·ªü kho√°, n·ªôi dung premium xu·∫•t hi·ªán ngay b√™n d∆∞·ªõi. M√£ ƒë∆∞·ª£c nh·ªõ tr√™n thi·∫øt b·ªã c·ªßa b·∫°n.",
    unlockedLbl:"‚úî ƒê√£ m·ªü kh√≥a",
    algosTitle:"AgolsOne",
    algosH:"AgolsOne ‚Äì N·ªÅn t·∫£ng chi·∫øn l∆∞·ª£c & c·∫£nh b√°o theo th·ªùi gian th·ª±c",
    algosD:"M·ªü t√†i kho·∫£n, sao ch√©p giao d·ªãch AI th√¥ng minh t·ª± v·∫≠n h√†nh ngay c·∫£ khi b·∫°n ƒëang ng·ªß, l·ª£i nhu·∫≠n cao, 80% chi·∫øn th·∫Øng th·ªã tr∆∞·ªùng.",
    algosC:"M·ªü t√†i kho·∫£n mi·ªÖn ph√≠ ‚Üó",
    bnBT:"BNB",
    bnBH:"BNB ‚Äì H·ªá sinh th√°i giao d·ªãch h√†ng ƒë·∫ßu",
    bnBD:"Kh·ªõp l·ªánh nhanh, ph√≠ c·∫°nh tranh, s·∫£n ph·∫©m ƒëa d·∫°ng (Spot/Futures/Earn/Launchpad). N∆°i b·∫Øt ƒë·∫ßu an to√†n cho m·ªçi chi·∫øn l∆∞·ª£c.",
    bnBC:"M·ªü t√†i kho·∫£n mi·ªÖn ph√≠ ‚Üó",
    ctaH:"üöÄ C∆° h·ªôi ƒë·∫øn nhanh‚Äîh√£y ch·ªß ƒë·ªông ƒë√≥n l·∫•y",
    ctaD:"Ch·ªâ c·∫ßn <b>m·ªü kh√≥a</b> ho·∫∑c <b>m·ªü t√†i kho·∫£n mi·ªÖn ph√≠</b> h√¥m nay, b·∫°n ƒë√£ s·∫µn s√†ng theo d√µi ‚Äì ph√¢n t√≠ch ‚Äì h√†nh ƒë·ªông trong m·ªôt n∆°i.",
    ctaOpen:"M·ªü kh√≥a ngay",
    chatH:"AI T√†i Ch√≠nh 24/7",
    mTitle:"D·ªØ li·ªáu Premium",
    chips:["T√≥m t·∫Øt th·ªã tr∆∞·ªùng","Top 3 h√¥m nay","Token ch·ªçn l·ªçc","K·∫ø ho·∫°ch l·ªánh an to√†n","L·∫•y link chia s·∫ª"],
    planCopy:[
      {id:"p9",title:"Starter",price:9,desc:"Top 3 h√¥m nay ‚Ä¢ v√πng quan s√°t ‚Ä¢ g·ª£i √Ω r·ªßi ro ‚Ä¢ checklist & nh·∫≠t k√Ω m·∫´u."},
      {id:"p19",title:"Pro",price:19,desc:"Starter + k·ªãch b·∫£n 2 chi·ªÅu ‚Ä¢ m·ª©c v√¥ hi·ªáu h√≥a ‚Ä¢ c·∫£nh b√°o ƒëi·ªÅu ki·ªán ‚Ä¢ template R:R."},
      {id:"p29",title:"Master",price:29,desc:"Pro + chi·∫øn l∆∞·ª£c ƒëa khung ‚Ä¢ b·∫£ng d√≤ng ti·ªÅn & t√¢m l√Ω ‚Ä¢ playbook n√¢ng cao ‚Ä¢ Q&A theo l·ªãch."}
    ],
    ebooks:[
      {title:"Crypto 101 (Mi·ªÖn ph√≠)",price:0,desc:"V√≠ ‚Äì b·∫£o m·∫≠t ‚Äì chu k·ª≥ ‚Äì qu·∫£n tr·ªã v·ªën ‚Äì checklist kh·ªüi ƒë·∫ßu."},
      {title:"DeFi Mastery ($10)",price:10,desc:"Yield ‚Ä¢ Lending ‚Ä¢ Perp ‚Äî v·∫≠n h√†nh & t·ªëi ∆∞u l·ª£i t·ª©c."},
      {title:"Risk & Psychology ($19)",price:19,desc:"K·ª∑ lu·∫≠t ‚Ä¢ nh·∫≠t k√Ω l·ªánh ‚Ä¢ khung R:R ‚Äî tr√°nh sai l·∫ßm ph·ªï bi·∫øn."}
    ],
    freeCTA:"Xem bi·ªÉu ƒë·ªì",
    freeAI:"Ph√¢n t√≠ch nhanh b·∫±ng AI",
    unlockCTA:"M·ªü kh√≥a ƒë·ªÉ xem"
  },
  en:{
    brand:"LightUnfold ‚Ä¢ UltraMaster V‚àû",
    tagline:"Your Web3 ‚Äì 24/7 AI finance ‚Ä¢ Unlock Top 3 on-page ‚Ä¢ Curated tokens, live updates",
    moto:"‚ÄúKnow early ‚Äì Decide early ‚Äì Edge early.‚Äù",
    motoDesc:"Where <b>lean courses</b>, <b>realtime crypto analysis</b>, <b>AI Q&A</b> and <b>earliest opportunities</b> converge.",
    globeCap:"Earth online ¬∑ Moon & Radar monitoring 24/7",
    k1t:"Opportunities",k2t:"Updates",k3t:"Live viewers",k4t:"Revenue",
    hTop3:"‚≠ê Top 3 most promising tokens today",
    hFree:"üìä Curated tokens ‚Äì promising ideas (free)",
    hEdu:"üìö Learn fast ‚Äì understand deeply ‚Äì trade with confidence",
    hOpp:"üî• Featured opportunities",
    btnRefresh:"Refresh",
    hPlan:"üí† Premium ‚Äì unlock deep analysis & guided execution",
    hGate:"üîì SuperGate (Unlock)",
    gatePitch:"<b>Pay a small amount to receive unlock code instantly here.</b>",
    addrLbl:"Address/ID:",
    bundleLbl:"Select plan",
    codeLbl:"Enter unlock code (after payment)",
    afterUnlockHint:"Once unlocked, premium content appears below. Code is saved on device.",
    unlockedLbl:"‚úî Unlocked",
    algosTitle:"AgolsOne",
    algosH:"AgolsOne ‚Äì Strategy & real-time alerts",
    algosD:"Open an account and copy intelligent AI trades that run even while you sleep ‚Äî high profit targeting, 80% win-rate strategy.",
    algosC:"Open a free account ‚Üó",
    bnBT:"BNB",
    bnBH:"BNB ‚Äì Leading trading ecosystem",
    bnBD:"Fast matching, competitive fees, diverse products (Spot/Futures/Earn/Launchpad). A secure start for any strategy.",
    bnBC:"Open a free account ‚Üó",
    ctaH:"üöÄ Opportunities move fast‚Äîbe ready",
    ctaD:"Unlock or open a free account today to track ‚Ä¢ analyze ‚Ä¢ act in one place.",
    ctaOpen:"Unlock now",
    chatH:"24/7 Finance AI",
    mTitle:"Premium Data",
    chips:["Market summary","Today‚Äôs Top 3","Curated tokens","Safe trade plan","Get my share link"],
    planCopy:[
      {id:"p9",title:"Starter",price:9,desc:"Top 3 today ‚Ä¢ watch zones ‚Ä¢ risk hints ‚Ä¢ checklist & journal template."},
      {id:"p19",title:"Pro",price:19,desc:"Starter + two-way scenarios ‚Ä¢ invalidation ‚Ä¢ conditional alerts ‚Ä¢ R:R templates."},
      {id:"p29",title:"Master",price:29,desc:"Pro + multi-timeframe strategies ‚Ä¢ flow & sentiment board ‚Ä¢ advanced playbooks ‚Ä¢ scheduled Q&A."}
    ],
    ebooks:[
      {title:"Crypto 101 (Free)",price:0,desc:"Wallets ‚Ä¢ Security ‚Ä¢ Cycles ‚Ä¢ Risk management ‚Ä¢ Starter checklist."},
      {title:"DeFi Mastery ($10)",price:10,desc:"Yield ‚Ä¢ Lending ‚Ä¢ Perps ‚Äî operation & optimization."},
      {title:"Risk & Psychology ($19)",price:19,desc:"Discipline ‚Ä¢ journaling ‚Ä¢ R:R frameworks ‚Äî avoid common traps."}
    ],
    freeCTA:"Open chart",
    freeAI:"AI quick take",
    unlockCTA:"Unlock to view"
  }
};
function applyI18N(){
  const t=I[LANG];
  $('#brand').textContent=t.brand; $('#t_brand').textContent='UltraMaster V‚àû';
  $('#tagline').innerHTML=t.tagline; $('#moto').textContent=t.moto; $('#motoDesc').innerHTML=t.motoDesc;
  $('#globeCap').textContent=t.globeCap;
  $('#k1t').textContent=t.k1t; $('#k2t').textContent=t.k2t; $('#k3t').textContent=t.k3t; $('#k4t').textContent=t.k4t;
  $('#hTop3').textContent=t.hTop3; $('#hFree').textContent=t.hFree; $('#hEdu').textContent=t.hEdu;
  $('#hOpp').textContent=t.hOpp; $('#btnRefresh').textContent=t.btnRefresh; $('#hPlan').textContent=t.hPlan;
  $('#hGate').textContent=t.hGate; $('#gatePitch').innerHTML=t.gatePitch;
  $('#addrLbl').childNodes[0].nodeValue = t.addrLbl+" ";
  $('#bundleLbl').textContent=t.bundleLbl; $('#codeLbl').textContent=t.codeLbl; $('#afterUnlockHint').textContent=t.afterUnlockHint;
  $('#unlockedLbl').textContent=t.unlockedLbl;
  $('#algosTitle').textContent=t.algosTitle; $('#algosH').textContent=t.algosH; $('#algosD').textContent=t.algosD; $('#algosC').textContent=t.algosC;
  $('#bnBT').textContent=t.bnBT; $('#bnBH').textContent=t.bnBH; $('#bnBD').textContent=t.bnBD; $('#bnBC').textContent=t.bnBC;
  $('#ctaH').textContent=t.ctaH; $('#ctaD').innerHTML=t.ctaD; $('#ctaOpen').textContent=t.ctaOpen; $('#chatH').textContent=t.chatH; $('#mTitle').textContent=t.mTitle;
  $('#cta_binance').textContent=t.bnBC; $('#cta_algos').textContent=t.algosC; $('#ctaB').textContent=t.bnBC; $('#ctaA').textContent=t.algosC;
  chatInit(true); paintPlans(); paintEdu();
  const plans=I[LANG].planCopy;
  $('#bundleSel').innerHTML=plans.map(b=>`<option value="${b.id}">${b.title} ‚Äî $${b.price}</option>`).join('');
  localStorage.setItem('lang',LANG);
  (window.Web3AINexus||{}).pushEvent?.('LangChange',{lang:LANG});
}
$('#lang')?.addEventListener('click',()=>{LANG=LANG==='vi'?'en':'vi';applyI18N()});

/* ===== ViralShare ===== */
(function ViralShare(){
  const U = new URL(location.href);
  const refIn = U.searchParams.get('ref');
  const peer = localStorage.getItem('peer_id') || Math.random().toString(36).slice(2);
  if(!localStorage.getItem('peer_id')) localStorage.setItem('peer_id', peer);
  if(refIn) localStorage.setItem('ref_by', refIn);
  const base = location.origin + location.pathname;
  const myRef = `${base}?ref=${peer}&utm_source=share&utm_medium=viral&utm_campaign=ultramaster`;
  localStorage.setItem('my_ref', myRef);
  const t = encodeURIComponent(document.title), u = encodeURIComponent(myRef);
  $('#sh_tg').href=`https://t.me/share/url?url=${u}&text=${t}`;
  $('#sh_x').href =`https://twitter.com/intent/tweet?text=${t}&url=${u}`;
  $('#sh_fb').href=`https://www.facebook.com/sharer/sharer.php?u=${u}`;
  $('#sh_in').href=`https://www.linkedin.com/sharing/share-offsite/?url=${u}`;
  $('#shareMine').onclick=async()=>{try{if(navigator.share){await navigator.share({title:document.title,text:'Kh√°m ph√° UltraMaster',url:myRef});}else{await navigator.clipboard.writeText(myRef);alert(LANG==='vi'?'ƒê√£ sao ch√©p li√™n k·∫øt c·ªßa b·∫°n!':'Your referral link is copied!');}}catch(_){}}; 
})();

/* ===== BTC/ETH/USDT dots + strip ===== */
async function tick3(){
  try{
    const r=await j('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether&vs_currencies=usd&include_24hr_change=true');
    if(!r) return;
    const arr=[r.bitcoin?.usd_24h_change,r.ethereum?.usd_24h_change,r.tether?.usd_24h_change];
    [$('#d1'),$('#d2'),$('#d3')].forEach((d,i)=>{const v=+(arr[i]||0); d.style.background=v>=0?'#22c55e':'#ff4d4f';});
    // strip values
    const set=(idP,idC,px,cx)=>{ const up=cx>=0; $(idP).textContent='$'+Number(px||0).toLocaleString(); const el=$(idC); el.textContent=(cx>=0?'+':'')+cx.toFixed(2)+'%'; el.className='tval '+(up?'up':'dn'); };
    set('#btcP','#btcC', r.bitcoin?.usd, r.bitcoin?.usd_24h_change||0);
    set('#ethP','#ethC', r.ethereum?.usd, r.ethereum?.usd_24h_change||0);
    set('#usdP','#usdC', r.tether?.usd, r.tether?.usd_24h_change||0);
  }catch(_){}
}
setInterval(tick3, 10000); tick3();

/* ===== Market data & render ===== */
let LAST_ITEMS=[];
async function fetchLive(){
  try{
    const cg=await j('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=volume_desc&per_page=80&page=1&price_change_percentage=1h,24h,7d');
    const items=(cg||[]).map(c=>({source:"coingecko",symbol:(c.symbol||"").toUpperCase(),name:c.name,price:+c.current_price||0,
      ch24h:+c.price_change_percentage_24h_in_currency||0,vol24h:+c.total_volume||0,mcap:+c.market_cap||0, id:c.id,
      link:`https://www.coingecko.com/en/coins/${c.id}`,
      score:(+c.price_change_percentage_1h_in_currency||0)*0.4+(+c.price_change_percentage_24h_in_currency||0)*0.35+(+c.price_change_percentage_7d_in_currency||0)*0.25+Math.log10((+c.total_volume||1))}));
    const bestBySymbol={}; for(const it of items){const k=it.symbol; if(!bestBySymbol[k]||it.score>bestBySymbol[k].score) bestBySymbol[k]=it;}
    LAST_ITEMS=Object.values(bestBySymbol).sort((a,b)=>b.score-a.score).slice(0,24);
    renderAll(LAST_ITEMS);
    (window.Web3AINexus||{}).pushEvent?.('MarketFeed',{items:LAST_ITEMS});
  }catch(_){}
}
function renderAll(items){
  const t=I[LANG];
  const pro=items.slice(0,3);
  $('#tokenPro').innerHTML=pro.map((x,i)=>`
    <div class="shop-card">
      <h4>#${i+1} ${x.symbol} ‚Äî ${x.name||''}</h4>
      <div class="muted">${LANG==='vi'
        ?'Ba g·ª£i √Ω t·∫≠p trung ‚Äì c√≥ m·ª©c v√†o/ra g·ª£i √Ω & ƒëi·ªÅu ki·ªán v√¥ hi·ªáu h√≥a trong c√°c g√≥i Premium.'
        :'Three focused ideas with guided entries/exits & invalidation inside Premium.'}</div>
      <div class="row" style="margin-top:8px">
        <a class="btn" href="#supergate">${t.unlockCTA}</a>
        <a class="btn out" target="_blank" rel="noopener" href="${x.link}">${t.freeCTA} ‚Üó</a>
      </div>
    </div>`).join('');

  const free=items.slice(3,10);
  $('#tokenFree').innerHTML=free.map(x=>{
    const c=x.ch24h||0, rr=c>=0?'ok':'bad';
    return `<div class="shop-card">
      <h4>${x.symbol} ‚Äî ${x.name||''}</h4>
      <div class="muted">${LANG==='vi'?'Gi√°':'Price'}: $${fmt(x.price)} ¬∑ <b class="${rr}">${c.toFixed(2)}%</b> ¬∑ Vol: $${fmt(x.vol24h)}</div>
      <div class="row" style="margin-top:8px">
        <a class="btn out" target="_blank" rel="noopener" href="${x.link}">${t.freeCTA} ‚Üó</a>
        <button class="btn out" onclick="aiHint('${x.symbol}')">${t.freeAI}</button>
      </div>
    </div>`;
  }).join('');

  $('#kOpps').textContent=items.length;
  $('#ticker').innerHTML=items.slice(0,14).map(x=>`<span class="tag">${x.symbol}: $${fmt(x.price)} (${(x.ch24h||0).toFixed(2)}%)</span>`).join('')||'‚Äî';

  $('#opps').innerHTML=items.slice(0,10).map(x=>{
    const ch=x.ch24h||0,pct=`${ch>=0?'+':''}${ch.toFixed(2)}%`;
    return `<div class="item"><div class="score">+${(x.score||0).toFixed(2)}</div>
      <div style="flex:1;min-width:0">
        <div class="row" style="justify-content:space-between;gap:8px">
          <div><b>${x.symbol}</b> ¬∑ <span class="muted">${x.name||''}</span></div>
          <a class="btn out" target="_blank" rel="noopener" href="${x.link}">${LANG==='vi'?'Chi ti·∫øt':'Details'} ‚Üó</a></div>
        <div class="row" style="gap:8px">
          <span class="tag">${LANG==='vi'?'Gi√°':'Price'}: $${fmt(x.price||0)}</span>
          <span class="tag ${ch>=0?'ok':'bad'}">24h: ${pct}</span>
          <span class="tag">Vol: $${fmt(x.vol24h||0)}</span>
        </div></div></div>`;
  }).join('');
}

/* ===== Plans 9/19/29 ===== */
function paintPlans(){
  const t=I[LANG].planCopy;
  $('#plans').innerHTML=t.map(p=>`
    <div class="shop-card">
      <h4>${p.title} ‚Äî <b>$${p.price}</b></h4>
      <div class="muted">${p.desc}</div>
      <div class="row" style="margin-top:8px">
        <a class="btn" href="#supergate">${LANG==='vi'?'M·ªü kh√≥a $'+p.price:'Unlock $'+p.price} ‚Üó</a>
        <span class="badge">$${p.price}</span>
      </div>
    </div>`).join('');
}

/* ===== Edu ===== */
function paintEdu(){
  const es=I[LANG].ebooks;
  $('#ebooks').innerHTML=es.map(e=>`
    <div class="shop-card">
      <h4>${e.title}</h4>
      <div class="muted">${e.desc}</div>
      <div class="row" style="margin-top:8px">
        ${e.price?`<span class="badge">$${e.price}</span>`:`<span class="badge">${LANG==='vi'?'Mi·ªÖn ph√≠':'Free'}</span>`}
        <a class="btn out" href="#supergate">${LANG==='vi'?'N√¢ng c·∫•p kh√≥a chuy√™n s√¢u':'Upgrade to advanced'} ‚Üó</a>
      </div>
    </div>`).join('');
}

/* ===== Payments: selectable + copy ===== */
let pays=[];
function buildPayList(){
  const row=c=>`<div class="paybtn" onclick="selPay('${c.address}', this)">
      <div><b>${c.name}</b><div class="muted" style="font-size:12px">${c.min||''}</div></div>
      <button class="copy" onclick="event.stopPropagation();copyAddr('${c.address}')">${LANG==='vi'?'Sao ch√©p':'Copy'}</button>
    </div>`;
  $('#payList').innerHTML=pays.map(row).join('');
  const firstBtn=$('#payList .paybtn'); if(firstBtn) firstBtn.classList.add('active');
}
function paintPay(){
  pays=CFG.site.payments.chains||[];
  const first=pays[0]; if(first){ $('#qr').src=qrlink(first.address); $('#payAddr').textContent=first.address; }
  buildPayList();
}
function selPay(addr,el){
  $('#qr').src=qrlink(addr); $('#payAddr').textContent=addr;
  $$('#payList .paybtn').forEach(x=>x.classList.remove('active')); el.classList.add('active');
  (window.Web3AINexus||{}).pushEvent?.('PayEvent',{type:'select',addr});
}
async function copyAddr(addr){
  try{await navigator.clipboard.writeText(addr); alert(LANG==='vi'?'ƒê√£ sao ch√©p ƒë·ªãa ch·ªâ!':'Address copied!'); (window.Web3AINexus||{}).pushEvent?.('PayEvent',{type:'copy',addr}); }catch(_){}
}

/* ===== Paywall ===== */
let SECRET="23061988";
function gate(open){$('#opened').classList.toggle('hidden',!open);}
(function bindPaywall(){
  const saved=localStorage.getItem('unlocked_code')||'';
  const setOpen=(ok,tx)=>{ gate(ok); if(ok){ paintPremium(); if(tx) $('#uMsg').innerHTML='<span style="color:#bff5d0">TX: '+tx+'</span>'; } };
  if(saved){ SECRET=String(CFG.secrets.unlock_code||SECRET); if(saved===SECRET) setOpen(true, localStorage.getItem('tx_hash')); }
  $('#doUnlock').onclick=()=>{const code=$('#unlockCode').value.trim(),tx=$('#txhash').value.trim(); SECRET=String(CFG.secrets.unlock_code||SECRET);
    if(code===SECRET){ setOpen(true,tx); if(tx) localStorage.setItem('tx_hash',tx); localStorage.setItem('unlocked_code',code); $('#uMsg').innerHTML='<span style="color:#bff5d0">‚úî '+(LANG==='vi'?'ƒê√£ m·ªü kh√≥a':'Unlocked')+'</span>'; (window.Web3AINexus||{}).pushEvent?.('PremiumOpen',{}); }
    else $('#uMsg').innerHTML='<span style="color:#ff9b9d">'+(LANG==='vi'?'M√£ kh√¥ng ƒë√∫ng.':'Wrong code.')+'</span>';};
  $('#remember').onclick=()=>{const c=$('#unlockCode').value.trim(); if(c){localStorage.setItem('unlocked_code',c); $('#uMsg').textContent=(LANG==='vi'?'ƒê√£ l∆∞u tr√™n thi·∫øt b·ªã.':'Saved on device.')}};
  $('#relock').onclick=()=>{localStorage.removeItem('unlocked_code'); gate(false);};
})();
function paintPremium(){
  const t=LANG==='vi'?'Xem d·ªØ li·ªáu':'Open data';
  const P=[
    {title:LANG==='vi'?'Alpha Feed Pro':'Alpha Feed Pro',desc:LANG==='vi'?'D√≤ng alpha ms-level: b·∫•t th∆∞·ªùng d√≤ng ti·ªÅn, ngu·ªìn ƒëa k√™nh, l·ªçc nhi·ªÖu.':'ms-level alpha: flow anomalies, multi-source, noise filter.'},
    {title:LANG==='vi'?'Deal Flow Private':'Private Deal Flow',desc:LANG==='vi'?'Seed/Private ƒëang m·ªü: ƒëi·ªÅu ki·ªán ‚Äì ∆∞u ti√™n th·ªùi gian.':'Open seed/private: terms & timing edge.'}
  ];
  $('#premium').innerHTML=P.map(p=>`<div class="shop-card"><h4>${p.title}</h4><div class="muted">${p.desc}</div><button class="btn out" onclick="openDataModal()">${t} ‚Üó</button></div>`).join('');
}

/* ===== Chat AI (template replies) ===== */
function addBubble(txt, who='ai'){
  const b=document.createElement('div'); b.className='bubble '+(who==='me'?'me':'ai'); b.innerHTML=txt; $('#chatBody').appendChild(b); $('#chatBody').scrollTop=1e6;
}
function smartReply(q){
  const s=q.toLowerCase();
  if(/m·ªü kh√≥a|unlock|thanh to√°n|premium|code/.test(s))
    return LANG==='vi'?'B1: Ch·ªçn ph∆∞∆°ng th·ª©c & sao ch√©p ƒë·ªãa ch·ªâ ‚Ä¢ B2: Thanh to√°n nh·ªè ‚Ä¢ B3: Nh·∫≠p m√£ t·∫°i SuperGate.':'Step 1: Choose method & copy address ‚Ä¢ Step 2: Pay small amount ‚Ä¢ Step 3: Enter code at SuperGate.';
  if(/token|ti·ªÅm nƒÉng|coin|top 3|today/.test(s)){
    const top=(LAST_ITEMS||[]).slice(0,3).map(x=>`${x.symbol} $${fmt(x.price)} (${(x.ch24h||0).toFixed(1)}%)`).join(' ‚Ä¢ ');
    return (LANG==='vi'?'Theo d·ªØ li·ªáu hi·ªán t·∫°i: ':'Live picks: ')+top+(LANG==='vi'?'. M·ªü kho√° ƒë·ªÉ xem chi·∫øn l∆∞·ª£c v√†o/ra an to√†n.':'. Unlock to view safe entry/exit.');
  }
  if(/an to√†n|risk|stop|k·∫ø ho·∫°ch|plan|dca/.test(s))
    return LANG==='vi'?'R·ªßi ro 1‚Äì2%/l·ªánh ‚Ä¢ DCA 2‚Äì3 nh·ªãp ‚Ä¢ Stop-loss c·ª©ng ‚Ä¢ RR‚â•1:2 ‚Ä¢ Nh·∫≠t k√Ω giao d·ªãch.':'Risk 1‚Äì2%/trade ‚Ä¢ 2‚Äì3 leg DCA ‚Ä¢ Hard stop ‚Ä¢ RR‚â•1:2 ‚Ä¢ Trading journal.';
  if(/algosone|algo/.test(s))
    return (LANG==='vi'?'AgolsOne: m·ªü t√†i kho·∫£n & sao ch√©p giao d·ªãch AI ':'AgolsOne: open account & copy AI trades ')+`<a target="_blank" rel="noopener" href="https://algosone.page.link/MbtR">${LANG==='vi'?'mi·ªÖn ph√≠':'free'} ‚Üó</a>`;
  if(/binance|bnb/.test(s))
    return (LANG==='vi'?'BNB: h·ªá sinh th√°i giao d·ªãch h√†ng ƒë·∫ßu ‚Äì ':'BNB: leading trading ecosystem ‚Äì ')+`<a target="_blank" rel="noopener" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N">${LANG==='vi'?'m·ªü t√†i kho·∫£n mi·ªÖn ph√≠':'open free account'} ‚Üó</a>`;
  if(/share|chia s·∫ª|ref/.test(s)){
    const myRef=localStorage.getItem('my_ref')||location.href; return (LANG==='vi'?'Li√™n k·∫øt c·ªßa b·∫°n: ':'Your link: ')+`<span class="mono">${myRef}</span>`;
  }
  return LANG==='vi'?'H·ªèi Top 3, token ch·ªçn l·ªçc, k·∫ø ho·∫°ch an to√†n ho·∫∑c g√µ ‚Äúshare‚Äù ƒë·ªÉ l·∫•y link gi·ªõi thi·ªáu.':'Ask Top 3, curated tokens, safe plan, or type ‚Äúshare‚Äù to get your referral link.';
}
function chatInit(rebuild=false){
  const chips=I[LANG].chips; const bar=$('#chipBar'); if(rebuild) bar.innerHTML='';
  chips.forEach(t=>{const b=document.createElement('button'); b.className='btn out'; b.textContent=t; b.onclick=()=>{$('#chatIn').value=t; $('#chatSend').click();}; if(rebuild) bar.appendChild(b);});
  if(!rebuild){
    $('#openChat').onclick=()=>{$('#chat').style.display='flex'; if(!$('#chatBody').dataset.hi){addBubble(LANG==='vi'?'Ch√†o b·∫°n! M√¨nh l√† AI t√†i ch√≠nh 24/7.':'Hi! I am your 24/7 finance AI.'); $('#chatBody').dataset.hi=1;}};
    $('#closeChat').onclick=()=>{$('#chat').style.display='none'};
    $('#chatSend').onclick=()=>{const v=$('#chatIn').value.trim(); if(!v) return; addBubble(v,'me'); $('#chatIn').value=''; addBubble(smartReply(v),'ai');};
  }
}

/* ===== Modal data ===== */
const PREMIUM_DATA={ updated_at:new Date().toISOString(),
  alpha_feed:[
    {type:"flow", text:"ETF/BTC inflow duy tr√¨ ‚Äì theo d√µi v√πng ph·∫£n ·ª©ng cung."},
    {type:"onchain", text:"V√≠ l·ªõn gom mid-cap h·ªá ETH; kh·ªëi l∆∞·ª£ng tƒÉng theo gi·ªù."},
    {type:"macro", text:"Thanh kho·∫£n USD n·ªõi l·ªèng nh·∫π; risk-on c·∫£i thi·ªán."}
  ],
  deals:[{name:"Seed/Private-DeFiX", note:"Allocation nh·ªè, vesting 12m ‚Äì c√¢n ƒë·ªëi r·ªßi ro."}]
};
function openDataModal(){ $('#dataPre').textContent=JSON.stringify(PREMIUM_DATA,null,2); $('#dataModal').style.display='grid';}
$('#openData')?.addEventListener('click', openDataModal);
$('#closeData')?.addEventListener('click', ()=>$('#dataModal').style.display='none');
$('#dataModal')?.addEventListener('click',e=>{ if(e.target.id==='dataModal') $('#dataModal').style.display='none';});
document.addEventListener('keydown',e=>{ if(e.key==='Escape') $('#dataModal').style.display='none';});

/* ===== Radar click opens data ===== */
$('#radar').addEventListener('click', openDataModal);

/* ===== Live counters ===== */
(function peers(){
  const k='umv18_peers'; const now=Date.now(), ttl=25e3; const id=localStorage.getItem('peer_id')||Math.random().toString(36).slice(2); localStorage.setItem('peer_id',id);
  const raw=localStorage.getItem(k); let list=raw?JSON.parse(raw):[]; list=list.filter(x=>now-x.t<ttl); const me=list.find(x=>x.id===id); if(me) me.t=now; else list.push({id,t:now});
  localStorage.setItem(k,JSON.stringify(list)); $('#kLive').textContent=list.length; setTimeout(peers,4000);
})();

/* ===== Boot ===== */
function mountStatic(){
  applyI18N(); paintPlans(); paintEdu(); paintPay();
  const plans=I[LANG].planCopy;
  $('#bundleSel').innerHTML=plans.map(b=>`<option value="${b.id}">${b.title} ‚Äî $${b.price}</option>`).join('');
}
async function boot(){ await loadExternal(); mountStatic(); await fetchLive(); setInterval(fetchLive, 60*1000); $('#autoLbl').textContent=(LANG==='vi'?'T·ª± ƒë·ªông 24/7':'Always-on 24/7');}
boot();

/* ===== Simple AI hint placeholder ===== */
function aiHint(sym){ alert((LANG==='vi'?'Ph√¢n t√≠ch nhanh: ':'Quick take: ')+sym); }
</script>
</body>
</html>
