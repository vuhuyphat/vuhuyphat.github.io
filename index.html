<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>UltraMaster V∞ • Wealthverse Ultimate</title>
<meta name="description" content="Web3 tự vận hành • AI Agents 24/7 • Cơ hội on-chain • QR thanh toán 1 chạm • Viral share.">
<meta name="theme-color" content="#0b0f13">
<style>
/* ===== Design tokens ===== */
:root{
  --bg:#0b0f13;--card:#0f141a;--line:#233041;--txt:#e9eef4;--mut:#a9b8c8;
  --gold:#ffd700;--green:#16a34a;--purple:#6d28d9;--danger:#ff4d4f;
  --pill:#0f1725;--btn:#ffd700;--btnTxt:#0b0f13;--ring:rgba(255,215,0,.25);
  --shadow:0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02) inset;
}
:root.light{
  --bg:#f6f9fc;--card:#ffffff;--line:#e2e8f0;--txt:#0b1020;--mut:#4a5568;
  --gold:#d4af37;--green:#0f7a2a;--purple:#5b21b6;--danger:#e11d48;
  --pill:#eef2f7;--btn:#d4af37;--btnTxt:#121212;--ring:rgba(212,175,55,.25);
  --shadow:0 10px 24px rgba(0,0,0,.08);
}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;background:
  radial-gradient(60% 140% at 50% -10%, rgba(109,40,217,.25),transparent 60%),
  linear-gradient(180deg, rgba(22,163,74,.12),transparent 40%),
  var(--bg);
color:var(--txt);font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto}
.wrap{max-width:1200px;margin:0 auto;padding:20px}
.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:var(--shadow);margin:12px 0;transition:.25s}
.card:hover{transform:translateY(-2px)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border:1px solid var(--line);border-radius:999px;background:var(--pill);color:var(--txt)}
.btn{display:inline-flex;align-items:center;gap:8px;border:0;border-radius:12px;padding:12px 16px;font-weight:700;background:var(--btn);color:var(--btnTxt);cursor:pointer;box-shadow:0 0 0 0 var(--ring);transition:.2s}
.btn:hover{transform:translateY(-1px);box-shadow:0 0 0 6px var(--ring)}
.btn.out{background:transparent;color:var(--txt);border:1px solid var(--line)}
.logo-dot{width:12px;height:12px;border-radius:50%;background:var(--gold);box-shadow:0 0 0 0 rgba(255,215,0,.7);animation:glow 1.8s infinite}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(255,215,0,.7)}70%{box-shadow:0 0 0 14px rgba(255,215,0,0)}100%{box-shadow:0 0 0 0 rgba(255,215,0,0)}}
.hero{position:relative;overflow:hidden}

/* ===== 3D Earth canvas ===== */
.globe3d{width:300px;height:300px;border-radius:50%;display:block;margin:auto;box-shadow:
  inset 12px 0 40px rgba(0,0,0,.35), inset -12px 0 40px rgba(0,0,0,.25), 0 10px 30px rgba(0,0,0,.35)}
.globe-cap{color:var(--mut);text-align:center;margin-top:8px}

/* KPI, tags */
.kpi{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.kbox{background:linear-gradient(180deg, rgba(255,215,0,.12), transparent 60%),var(--card);border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center}
.now{font-size:22px;font-weight:800;color:var(--gold)}
.tag{display:inline-block;border:1px solid var(--line);border-radius:10px;padding:4px 10px;margin:4px 6px 0 0;color:var(--txt);opacity:.85;font-size:13px}
.badge{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(109,40,217,.12)}
.qr-wrap{display:grid;place-items:center;border:1px dashed var(--line);border-radius:14px;background:radial-gradient(120% 100% at 50% -30%, rgba(255,215,0,.12), transparent 60%),transparent}
.qr{width:180px;height:180px;border-radius:12px;background:#fff}
.paybtn{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:transparent;cursor:pointer}
.paybtn.active{outline:2px solid var(--gold);box-shadow:0 0 0 6px var(--ring)}
.copy{font-size:13px;border:1px dashed var(--line);border-radius:8px;padding:4px 10px;background:transparent;color:var(--txt);cursor:pointer}
.footer{padding:32px 0;text-align:center;color:var(--mut)}
small.muted{color:var(--mut)}
/* Chat mini */
.chatfab{position:fixed;right:16px;bottom:16px;z-index:50}
.chatwin{position:fixed;right:16px;bottom:80px;width:min(420px,95vw);max-height:75vh;display:none;flex-direction:column;background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;z-index:49;box-shadow:var(--shadow)}
.chathead{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line)}
.chatbody{padding:12px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{max-width:85%;padding:10px 14px;border:1px solid var(--line);border-radius:12px}
.bubble.me{align-self:flex-end;background:#102235}
.bubble.ai{align-self:flex-start;background:#101a11}
.chatinput{display:flex;gap:8px;padding:12px;border-top:1px solid var(--line)}
.chatinput input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--line);background:transparent;color:var(--txt)}
.hidden{display:none}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
@media(max-width:900px){.header-flex{display:grid;gap:16px}}

/* ===== Partner cards contrast fix (light theme) ===== */
.partner-card{background:#1a1400;border-color:#6b4e00}
.partner-card .btn{background:#ffb000;color:#1a1300}
:root.light .partner-card{background:#fffbe6 !important;border-color:#f2d38a !important;color:#1a1300}
:root.light .partner-card .muted{color:#3a2e00}
:root.light .partner-card .btn{background:#ffc83d;color:#1a1300;border:0}
</style>
</head>
<body>
<div class="wrap" id="app">

  <!-- Top row -->
  <div class="row">
    <span class="pill"><span class="logo-dot"></span><b id="t_brand">UltraMaster V∞</b></span>
    <span class="pill">ENS: <b id="ens">lightunfold.eth</b></span>
    <span class="pill"><span id="hbLbl">Heartbeat</span>: <b id="hb">—</b></span>
    <button class="pill" id="openData">Data</button>
    <button class="pill" id="lang">VI/EN</button>
    <button class="pill" id="theme">🌗 Theme</button>
  </div>

  <!-- Hero -->
  <section class="card hero">
    <div class="header-flex">
      <div>
        <h1 id="brand">LightUnfold • UltraMaster V∞ Ultimate</h1>
        <div class="muted" id="tagline">Web3 Siêu Tự Vận Hành – AI Agents 24/7 • Mở Khóa Top 3 On‑Chain • Token Chọn Lọc Realtime</div>
        <div class="card" style="margin-top:12px">
          <b id="moto">“Biết Sớm – Quyết Định Sớm – Tài Lộc Sớm.”</b><br>
          <small class="muted" id="motoDesc">
            Hội tụ: <b>Khóa học tinh gọn</b>, <b>Phân tích crypto realtime</b>, <b>AI hỏi đáp</b>, <b>Cơ hội sớm nhất</b>.
          </small>
        </div>
        <div class="row" style="margin-top:12px">
          <a class="btn out" id="cta_binance" href="#" target="_blank" rel="noopener">Mở Binance Miễn Phí ↗</a>
          <a class="btn out" id="cta_algos" href="#" target="_blank" rel="noopener">Mở AlgosOne Miễn Phí ↗</a>
        </div>
      </div>
      <div>
        <!-- REAL 3D EARTH -->
        <canvas id="globe3d" class="globe3d"></canvas>
        <div class="globe-cap" id="globeCap">Trái Đất On‑Chain · Mây & Ánh Sáng 3D</div>
      </div>
    </div>
  </section>

  <!-- KPI -->
  <div class="kpi">
    <div class="kbox"><div class="muted" id="k1t">Cơ Hội</div><div class="now" id="kOpps">0</div></div>
    <div class="kbox"><div class="muted" id="k2t">Cập Nhật</div><div class="now" id="kUpd">—</div></div>
    <div class="kbox"><div class="muted" id="k3t">Đang Xem</div><div class="now" id="kLive">—</div></div>
    <div class="kbox"><div class="muted" id="k4t">Doanh Thu</div><div class="now">$<span id="kRev">0</span></div></div>
  </div>

  <!-- Top 3 Tokens -->
  <section class="card" id="secTop3">
    <h3 style="margin:0 0 10px" id="hTop3">⭐ Top 3 Token Tiềm Năng Hôm Nay</h3>
    <div id="tokenPro" class="grid"></div>
  </section>

  <!-- Token Free -->
  <section class="card" id="secFree">
    <h3 style="margin:0 0 10px" id="hFree">📊 Token Chọn Lọc (Miễn Phí)</h3>
    <div id="tokenFree" class="grid"></div>
  </section>

  <!-- Học viện -->
  <section class="card" id="edu">
    <h3 style="margin:0 0 10px" id="hEdu">📚 Học Nhanh – NFT Rewards</h3>
    <div class="grid" id="ebooks"></div>
  </section>

  <!-- Cơ hội nổi bật -->
  <section class="card" id="secOpp">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0" id="hOpp">🔥 Cơ Hội Nổi Bật (Multi‑Chain)</h3>
      <div class="row"><span class="badge" id="scanMode">Quét: On‑Chain</span><button class="btn out" id="refreshNow">↻ Làm mới</button></div>
    </div>
    <div class="muted" id="ticker" style="margin:6px 0 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">—</div>
    <div id="opps" class="grid"></div>
  </section>

  <!-- Premium Plans -->
  <section class="card" id="secPremium">
    <h3 style="margin:0 0 10px" id="hPlan">💠 Premium – Phân Tích Chuyên Sâu & Lộ Trình</h3>
    <div id="plans" class="grid"></div>
  </section>

  <!-- SuperGate: QR + Paywall -->
  <section class="card" id="supergate">
    <h3 style="margin:0 0 10px" id="hGate">🔓 SuperGate (Unlock On‑Chain)</h3>
    <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(280px,1fr))">
      <div class="card">
        <div class="grid" style="grid-template-columns:180px 1fr;align-items:center">
          <div class="qr-wrap"><img id="qr" class="qr" alt="QR"></div>
          <div>
            <div class="muted" id="gatePitch"><b>Thanh toán nhỏ để nhận mã mở khóa.</b></div>
            <div class="muted"><span id="addrLbl">Địa chỉ/ID:</span> <span class="mono" id="payAddr">—</span></div>
            <div id="payList" class="grid" style="grid-template-columns:1fr"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="grid" style="grid-template-columns:1fr">
          <div><label class="muted" id="bundleLbl">Chọn gói</label><select id="bundleSel"></select></div>
          <div><label class="muted" id="codeLbl">Mã mở khóa (sau thanh toán)</label><input id="unlockCode" placeholder="Nhập mã…"></div>
          <div><input id="txhash" placeholder="(Tuỳ chọn) Dán TX Hash / ghi chú"></div>
          <div class="row"><button class="btn" id="doUnlock">Mở khóa</button><button class="btn out" id="remember">Nhớ mã</button></div>
          <div id="uMsg" class="muted"></div>
          <div class="muted" style="margin-top:8px" id="afterUnlockHint">Sau mở khóa, nội dung Premium xuất hiện. Mã được lưu trên thiết bị.</div>
        </div>
      </div>
    </div>

    <div id="opened" class="hidden" style="margin-top:14px">
      <div class="row"><span class="pill" style="background:#11291a;border-color:#20452f;color:#bff5d0" id="unlockedLbl">✔ Đã mở khóa</span><button class="btn out" id="relock">Khoá lại</button></div>
      <div id="premium" class="grid" style="margin-top:12px"></div>
    </div>
  </section>

  <!-- Partners (contrast fixed) -->
  <section class="card" id="secPartners">
    <div class="grid">
      <div class="card partner-card">
        <h4 id="algosH4">AlgosOne – Chiến lược AI & cảnh báo realtime</h4>
        <div class="muted" id="algosWarn">Copy‑trading/chiến lược tự động có rủi ro. Luôn hiểu rõ sản phẩm, quy định & khẩu vị rủi ro trước khi dùng.</div>
        <a class="btn" style="margin-top:8px" id="algosLink" href="#" target="_blank" rel="noopener">Mở miễn phí ↗</a>
      </div>
      <div class="card partner-card">
        <h4 id="bnbH4">BNB – Hệ sinh thái giao dịch</h4>
        <ul class="muted" style="margin:10px 0 0 18px">
          <li id="bnbL1">Khớp lệnh nhanh • phí cạnh tranh</li>
          <li id="bnbL2">Bảo mật nhiều lớp • 2FA</li>
          <li id="bnbL3">Hệ sinh thái Earn • Launchpool</li>
        </ul>
        <a class="btn" style="margin-top:8px" id="bnbLink" href="#" target="_blank" rel="noopener">Mở miễn phí ↗</a>
      </div>
    </div>
  </section>

  <!-- CTA cuối -->
  <section class="card" id="lastCTA">
    <h3 style="margin:0 0 8px" id="ctaH">🚀 Cơ hội nhanh – Chủ động đón lấy</h3>
    <div id="ctaD">Mở khóa hoặc mở tài khoản miễn phí để Theo dõi – Phân tích – Hành động một nơi.</div>
    <div class="row" style="margin-top:10px">
      <a class="btn" href="#supergate" id="ctaOpen">Mở khóa ngay</a>
      <a class="btn out" id="ctaB" href="#" target="_blank" rel="noopener">Mở Binance Miễn Phí ↗</a>
      <a class="btn out" id="ctaA" href="#" target="_blank" rel="noopener">Mở AlgosOne Miễn Phí ↗</a>
      <button class="btn out" id="shareMine">Chia sẻ liên kết của tôi</button>
    </div>
  </section>

  <!-- Footer -->
  <button class="pill" id="goTop" style="position:fixed;left:16px;bottom:90px;z-index:10">↑ Top</button>
  <div class="footer">© <span id="year"></span> Wealthverse • <span id="autoLbl">Tự vận hành 24/7</span></div>
</div>

<!-- ===== Inline CONFIG (giữ nguyên cấu trúc, chỉ sửa nội dung nếu bạn cần) ===== -->
<script id="SITE_CONFIG" type="application/json">
{
  "brand":"LightUnfold • UltraMaster V∞ Ultimate",
  "ens":"lightunfold.eth",
  "links":{
    "binance":"https://www.binance.com/vi/register?ref=GRO_20338_9V44N",
    "algos":"https://algosone.page.link/MbtR"
  },
  "payments":{
    "paypal":{"label":"PayPal","id":"vumumabada@gmail.com","qr":"https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=paypal.me/vumumabada"},
    "vietcombank":{"label":"Vietcombank","id":"9567892030","note":"TRẦN VĂN VŨ • chuyển khoản ghi note email/tx"},
    "momo":{"label":"MoMo","id":"0567892030","qr":"https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=MoMo:0567892030"},
    "eth":{"label":"ETH (ERC‑20)","id":"0x54E15A7b6d4213beE87800432A151d794638E3C2"},
    "usdt":{"label":"USDT (ERC‑20)","id":"0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0"}
  },
  "premium":{
    "unlock_code":"23061988",
    "plans":[
      {"id":"p9","title":"Starter","price":9,"desc":"Top 3 hôm nay • vùng quan sát • checklist rủi ro."},
      {"id":"p19","title":"Pro","price":19,"desc":"Starter + kịch bản 2 chiều • mức vô hiệu hóa • template R:R."},
      {"id":"p29","title":"Master","price":29,"desc":"Pro + đa khung • tâm lý & dòng tiền • playbook nâng cao."}
    ]
  },
  "i18n":{
    "vi":{
      "brand":"LightUnfold • UltraMaster V∞ Ultimate",
      "tagline":"Web3 Siêu Tự Vận Hành – AI Agents 24/7 • Mở Khóa Top 3 On‑Chain • Token Chọn Lọc Realtime",
      "moto":"“Biết Sớm – Quyết Định Sớm – Tài Lộc Sớm.”",
      "motoDesc":"Hội tụ: <b>Khóa học tinh gọn</b>, <b>Phân tích crypto realtime</b>, <b>AI hỏi đáp</b>, <b>Cơ hội sớm nhất</b>.",
      "globeCap":"Trái Đất On‑Chain · Mây & Ánh Sáng 3D",
      "hb":"Heartbeat",
      "k1t":"Cơ Hội","k2t":"Cập Nhật","k3t":"Đang Xem","k4t":"Doanh Thu",
      "hTop3":"⭐ Top 3 Token Tiềm Năng Hôm Nay",
      "hFree":"📊 Token Chọn Lọc (Miễn Phí)",
      "hEdu":"📚 Học Nhanh – NFT Rewards",
      "hOpp":"🔥 Cơ Hội Nổi Bật (Multi‑Chain)",
      "btnRefresh":"Làm mới",
      "hPlan":"💠 Premium – Phân Tích Chuyên Sâu & Lộ Trình",
      "hGate":"🔓 SuperGate (Unlock On‑Chain)",
      "gatePitch":"<b>Thanh toán nhỏ để nhận mã mở khóa.</b>",
      "addrLbl":"Địa chỉ/ID:",
      "unlockedLbl":"✔ Đã mở khóa",
      "ctaH":"🚀 Cơ hội nhanh – Chủ động đón lấy",
      "ctaD":"Mở khóa hoặc mở tài khoản miễn phí để Theo dõi – Phân tích – Hành động một nơi.",
      "ctaOpen":"Mở khóa ngay",
      "ctaBinance":"Mở Binance Miễn Phí ↗",
      "ctaAlgos":"Mở AlgosOne Miễn Phí ↗",
      "algosH4":"AlgosOne – Chiến lược AI & cảnh báo realtime",
      "algosWarn":"Copy‑trading/chiến lược tự động có rủi ro. Luôn hiểu rõ sản phẩm, quy định & khẩu vị rủi ro trước khi dùng.",
      "bnbH4":"BNB – Hệ sinh thái giao dịch",
      "bnbL1":"Khớp lệnh nhanh • phí cạnh tranh",
      "bnbL2":"Bảo mật nhiều lớp • 2FA",
      "bnbL3":"Hệ sinh thái Earn • Launchpool",
      "ctaShare":"Chia sẻ liên kết của tôi",
      "autoLbl":"Tự vận hành 24/7"
    },
    "en":{
      "brand":"LightUnfold • UltraMaster V∞ Ultimate",
      "tagline":"Autonomous Web3 – AI Agents 24/7 • Unlock Top 3 On‑Chain • Curated Tokens in Realtime",
      "moto":"“Know Early – Decide Early – Prosper Early.”",
      "motoDesc":"All‑in‑one: <b>Lean courses</b>, <b>Realtime crypto analysis</b>, <b>AI Q&A</b>, <b>Earliest opportunities</b>.",
      "globeCap":"On‑Chain Earth · 3D Clouds & Lighting",
      "hb":"Heartbeat",
      "k1t":"Opportunities","k2t":"Updates","k3t":"Live Views","k4t":"Revenue",
      "hTop3":"⭐ Top 3 Tokens Today",
      "hFree":"📊 Curated Tokens (Free)",
      "hEdu":"📚 Learn Fast – NFT Rewards",
      "hOpp":"🔥 Featured Opportunities (Multi‑Chain)",
      "btnRefresh":"Refresh",
      "hPlan":"💠 Premium – Deep Analysis & Playbooks",
      "hGate":"🔓 SuperGate (Unlock On‑Chain)",
      "gatePitch":"<b>Make a small payment to get the unlock code.</b>",
      "addrLbl":"Address/ID:",
      "unlockedLbl":"✔ Unlocked",
      "ctaH":"🚀 Move first – Capture upside",
      "ctaD":"Unlock or open a free account to Track – Analyze – Act in one place.",
      "ctaOpen":"Unlock now",
      "ctaBinance":"Open Binance Free ↗",
      "ctaAlgos":"Open AlgosOne Free ↗",
      "algosH4":"AlgosOne – AI strategies & realtime alerts",
      "algosWarn":"Copy‑trading/automation carries risk. Understand products, regulations, and your risk tolerance.",
      "bnbH4":"BNB – Trading ecosystem",
      "bnbL1":"Fast matching • competitive fees",
      "bnbL2":"Multi‑layer security • 2FA",
      "bnbL3":"Ecosystem: Earn • Launchpool",
      "ctaShare":"Share my link",
      "autoLbl":"Always‑On 24/7"
    }
  }
}
</script>

<!-- ===== Libraries: Three.js (only for globe) ===== -->
<script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>

<!-- ===== Core JS: VI/EN switch + links + payments + 3D Earth with Moon (KHÔNG đổi cấu trúc) ===== -->
<script>
(() => {
  const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
  const cfg = JSON.parse(document.getElementById('SITE_CONFIG').textContent.trim());
  let LANG=(localStorage.getItem('lang')||(navigator.language||'vi')).toLowerCase().startsWith('vi')?'vi':'en';

  // ---- i18n: chỉ thay nội dung text, KHÔNG đổi cấu trúc/ID ----
  function tr(k){ return cfg.i18n?.[LANG]?.[k] ?? cfg.i18n?.vi?.[k] ?? ''; }
  function i18n(){
    // Hero
    $('#brand').textContent = tr('brand');
    $('#tagline').innerHTML = tr('tagline');
    $('#moto').textContent = tr('moto');
    $('#motoDesc').innerHTML = tr('motoDesc');
    $('#globeCap').textContent = tr('globeCap');
    $('#hbLbl').textContent = tr('hb') || 'Heartbeat';
    // KPI / sections
    $('#k1t').textContent = tr('k1t'); $('#k2t').textContent = tr('k2t'); $('#k3t').textContent = tr('k3t'); $('#k4t').textContent = tr('k4t');
    $('#hTop3').textContent = tr('hTop3'); $('#hFree').textContent = tr('hFree'); $('#hEdu').textContent = tr('hEdu'); $('#hOpp').textContent = tr('hOpp');
    $('#hPlan').textContent = tr('hPlan'); $('#hGate').textContent = tr('hGate');
    $('#btnRefresh').textContent = tr('btnRefresh') || $('#btnRefresh')?.textContent || 'Refresh';
    // SuperGate labels
    $('#gatePitch').innerHTML = tr('gatePitch');
    $('#addrLbl').textContent = tr('addrLbl');
    $('#unlockedLbl').textContent = tr('unlockedLbl');
    // CTA & buttons
    $('#ctaH').textContent = tr('ctaH'); $('#ctaD').textContent = tr('ctaD'); $('#ctaOpen').textContent = tr('ctaOpen');
    $('#cta_binance').textContent = tr('ctaBinance') || $('#cta_binance').textContent;
    $('#cta_algos').textContent = tr('ctaAlgos') || $('#cta_algos').textContent;
    $('#ctaB').textContent = tr('ctaBinance') || $('#ctaB').textContent;
    $('#ctaA').textContent = tr('ctaAlgos') || $('#ctaA').textContent;
    $('#shareMine').textContent = tr('ctaShare') || $('#shareMine').textContent;
    $('#autoLbl').textContent = tr('autoLbl') || $('#autoLbl').textContent;

    // Partners
    $('#algosH4').textContent = tr('algosH4') || $('#algosH4').textContent;
    $('#algosWarn').textContent = tr('algosWarn') || $('#algosWarn').textContent;
    $('#bnbH4').textContent = tr('bnbH4') || $('#bnbH4').textContent;
    $('#bnbL1').textContent = tr('bnbL1') || $('#bnbL1').textContent;
    $('#bnbL2').textContent = tr('bnbL2') || $('#bnbL2').textContent;
    $('#bnbL3').textContent = tr('bnbL3') || $('#bnbL3').textContent;
  }
  i18n();
  $('#lang').addEventListener('click',()=>{ LANG = (LANG==='vi'?'en':'vi'); localStorage.setItem('lang',LANG); i18n(); });

  // ---- giữ nguyên link/ví như cấu hình ----
  const setHref=(sel,url)=>{ const el=$(sel); if(el && url) el.href = url; };
  setHref('#cta_binance', cfg.links?.binance); setHref('#ctaB', cfg.links?.binance); setHref('#bnbLink', cfg.links?.binance);
  setHref('#cta_algos', cfg.links?.algos); setHref('#ctaA', cfg.links?.algos); setHref('#algosLink', cfg.links?.algos);
  $('#ens').textContent = cfg.ens || 'lightunfold.eth';
  $('#year').textContent = new Date().getFullYear();

  // ---- heartbeat nhỏ (giữ nguyên hành vi) ----
  function beat(){ $('#hb').textContent = new Date().toLocaleTimeString(); $('#kUpd') && ($('#kUpd').textContent = new Date().toLocaleString()); }
  setInterval(beat, 1000); beat();

  // ---- payments (giữ nguyên cấu trúc hiển thị) ----
  const pay = cfg.payments || {}; const payList = $('#payList'); const payAddr = $('#payAddr'); const qr = $('#qr');
  function setQR(text){ qr.src = `https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(text)}`; }
  function paintPays(){ payList.innerHTML=''; Object.entries(pay).forEach(([k,v])=>{
    const row=document.createElement('div'); row.className='paybtn'; row.role='button'; row.tabIndex=0;
    row.innerHTML = `<div><b>${v.label}</b><div class="muted mono">${v.id}</div></div><button class="copy" data-id="${v.id}">Copy</button>`;
    row.onclick=()=>selectPay(k);
    row.querySelector('.copy').onclick=(e)=>{ e.stopPropagation(); navigator.clipboard.writeText(v.id); };
    payList.appendChild(row);
  });}
  function selectPay(key){ $$('.paybtn').forEach(x=>x.classList.remove('active'));
    const v = pay[key]; const idx = Array.from(payList.children).findIndex(n=>n.querySelector('.mono')?.textContent===v.id);
    if(idx>-1) payList.children[idx].classList.add('active'); payAddr.textContent=v.id; setQR(v.qr||v.id);
  }
  paintPays(); const firstKey=Object.keys(pay)[0]; if(firstKey) selectPay(firstKey);

  // ---- plans (giữ nguyên cấu trúc) ----
  const plans = cfg.premium?.plans || []; const bundleSel = $('#bundleSel');
  plans.forEach(p=>{ const o=document.createElement('option'); o.value=p.id; o.textContent=`${p.title} – $${p.price}`; bundleSel.appendChild(o); });

  // ---- unlock (giữ nguyên cấu trúc) ----
  const SECRET=String(cfg.premium?.unlock_code||'');
  function addRevenue(x){ const el=$('#kRev'); const cur=Number(localStorage.getItem('rev')||'0'); const next=Math.max(0,cur+Number(x||0)); localStorage.setItem('rev',next); if(el) el.textContent=next.toLocaleString(); }
  $('#doUnlock').onclick=()=>{ const ok=(String($('#unlockCode').value||'').trim()===SECRET);
    $('#uMsg').textContent = ok ? (LANG==='vi'?'Mở khóa thành công!':'Unlocked!') : (LANG==='vi'?'Sai mã.':'Wrong code.');
    if(ok){ $('#opened').classList.remove('hidden'); localStorage.setItem('premium_unlocked','1'); addRevenue(plans.find(p=>p.id===$('#bundleSel').value)?.price||0); paintPremium(); }
  };
  $('#remember').onclick=()=>{ localStorage.setItem('remember_code',$('#unlockCode').value||''); };
  $('#relock').onclick=()=>{ $('#opened').classList.add('hidden'); localStorage.removeItem('premium_unlocked'); };
  if(localStorage.getItem('premium_unlocked')==='1') $('#opened').classList.remove('hidden');
  function paintPremium(){ const box=$('#premium'); box.innerHTML=''; ['Playbook đa khung','Checklist rủi ro','Bảng tâm lý & dòng tiền','Q&A theo lịch'].forEach(x=>{ const c=document.createElement('div'); c.className='card'; c.innerHTML=`<b>${x}</b><div class="muted">Nội dung hiển thị sau mở khóa.</div>`; box.appendChild(c); }); }

  // ---- share giữ nguyên ----
  const peer=localStorage.getItem('peer_id')||Math.random().toString(36).slice(2); localStorage.setItem('peer_id',peer);
  const base=location.origin+location.pathname; const myRef=`${base}?ref=${peer}&utm_source=share&utm_medium=viral&utm_campaign=ultramaster`;
  const te=encodeURIComponent(document.title), ue=encodeURIComponent(myRef);
  const map={sh_tg:`https://t.me/share/url?url=${ue}&text=${te}`, sh_x:`https://twitter.com/intent/tweet?text=${te}&url=${ue}`, sh_fb:`https://www.facebook.com/sharer/sharer.php?u=${ue}`, sh_in:`https://www.linkedin.com/sharing/share-offsite/?url=${ue}`};
  for(const id in map){ const el=document.getElementById(id); if(el) el.href=map[id]; }
  document.getElementById('shareMine')?.addEventListener('click', async()=>{ try{ if(navigator.share){ await navigator.share({title:document.title,text:'Khám Phá UltraMaster',url:myRef}); } else { await navigator.clipboard.writeText(myRef); alert(LANG==='vi'?'Đã sao chép liên kết!':'Link copied!'); } }catch(_){} });

  // ---- VI/EN theme (không đổi cấu trúc) ----
  let THEME=localStorage.getItem('theme')||'dark';
  function setTheme(m){document.documentElement.classList.toggle('light',m==='light');localStorage.setItem('theme',m)}
  setTheme(THEME);
  $('#theme').addEventListener('click',()=>{ THEME=(THEME==='dark'?'light':'dark'); setTheme(THEME); });

  // ---- 3D Earth + Moon (xanh, mây, ánh trăng) ----
  try{
    const canvas = document.getElementById('globe3d');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias:true, alpha:true });
    const DPR = Math.min(window.devicePixelRatio||1, 2);
    const W = canvas.clientWidth || 300, H = canvas.clientHeight || 300;
    renderer.setPixelRatio(DPR); renderer.setSize(W, H, false);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, W/H, 0.1, 100); camera.position.z = 6;

    const ambient = new THREE.AmbientLight(0xffffff, 0.55);
    const sun = new THREE.DirectionalLight(0xffffff, 0.95); sun.position.set(6,3,4);
    scene.add(ambient, sun);

    const loader   = new THREE.TextureLoader();
    const earthTex = loader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg');
    const normalTx = loader.load('https://threejs.org/examples/textures/planets/earth_normal_2048.jpg');
    const specTx   = loader.load('https://threejs.org/examples/textures/planets/earth_specular_2048.jpg');
    const cloudTx  = loader.load('https://threejs.org/examples/textures/planets/earth_clouds_1024.png');
    const moonTex  = loader.load('https://threejs.org/examples/textures/planets/moon_1024.jpg');

    const earth = new THREE.Mesh(
      new THREE.SphereGeometry(2.4, 64, 64),
      new THREE.MeshPhongMaterial({
        map: earthTex, bumpMap: normalTx, bumpScale:0.04,
        specularMap: specTx, specular: new THREE.Color('rgb(80,80,80)')
      })
    );
    scene.add(earth);

    const clouds = new THREE.Mesh(
      new THREE.SphereGeometry(2.46, 64, 64),
      new THREE.MeshLambertMaterial({ map: cloudTx, transparent:true, opacity:0.42 })
    );
    scene.add(clouds);

    // Moon fly-by + moonlight
    const moon = new THREE.Mesh(
      new THREE.SphereGeometry(0.65, 32, 32),
      new THREE.MeshStandardMaterial({ map: moonTex, roughness:1, metalness:0 })
    );
    const moonLight = new THREE.PointLight(0xbfd4ff, 1.2, 18);
    const moonGroup = new THREE.Group(); moonGroup.add(moon); moonGroup.add(moonLight);
    scene.add(moonGroup);

    function resize(){ const w=canvas.clientWidth||300, h=canvas.clientHeight||300; renderer.setSize(w,h,false); camera.aspect=w/h; camera.updateProjectionMatrix(); }
    window.addEventListener('resize', resize);

    let t=0;
    function animate(){
      requestAnimationFrame(animate);
      earth.rotation.y += 0.0026;
      clouds.rotation.y += 0.0032;
      t += 0.0022; const r=5.2;
      moonGroup.position.set(Math.cos(t)*r, Math.sin(t*1.1)*0.8, Math.sin(t)*r*0.4);
      moonLight.position.set(0,0,0);
      renderer.render(scene, camera);
    }
    animate();
  }catch(e){
    console.warn('WebGL not available, fallback static.', e);
  }

  // nhỏ: nút mở/đóng data modal giữ nguyên
  $('#openData').onclick=()=>{ const m=document.getElementById('dataModal'); if(m){ m.classList.remove('hidden'); document.getElementById('dataPre').textContent='{}'; } };
  $('#closeData')?.addEventListener('click',()=>document.getElementById('dataModal')?.classList.add('hidden'));
})();
</script>

<!-- Floating share (kept last to avoid overlap) -->
<div class="row" style="position:fixed;right:16px;bottom:16px;gap:8px;z-index:9;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px">
  <a id="sh_tg" target="_blank" title="Share Telegram">📣</a>
  <a id="sh_x" target="_blank" title="Share X">𝕏</a>
  <a id="sh_fb" target="_blank" title="Share Facebook">f</a>
  <a id="sh_in" target="_blank" title="Share LinkedIn">in</a>
</div>

<!-- Chat mini -->
<button class="btn chatfab" id="openChat">🧠 Chat AI 24/7</button>
<div class="chatwin" id="chat">
  <div class="chathead"><b id="chatH">AI Tài chính</b><button class="btn out" id="closeChat">Đóng</button></div>
  <div class="chatbody" id="chatBody"></div>
  <div class="chatinput">
    <input id="chatIn" placeholder="Hỏi về token, kế hoạch lệnh…">
    <button class="btn" id="chatSend">Gửi</button>
  </div>
</div>

<!-- Modal data (nguyên bản) -->
<div id="dataModal" class="hidden" style="position:fixed;inset:0;background:rgba(0,0,0,.55);place-items:center;z-index:99">
  <div class="card" style="width:min(95vw,960px);height:min(85vh,760px);display:flex;flex-direction:column">
    <div class="row" style="justify-content:space-between"><b id="mTitle">Dữ liệu Premium On‑Chain</b><button class="btn out" id="closeData">Đóng</button></div>
    <pre id="dataPre" style="flex:1;margin:0;padding:12px;overflow:auto;background:#0b0f13;color:#cfe0ef;border:1px solid var(--line);border-radius:12px"></pre>
  </div>
</div>
</body>
</html>
