<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>LightUnfold ‚Ä¢ Web3 AI X1000</title>
<meta name="description" content="Trang Web3 AI t·ª± ƒë·ªông 24/7 ‚Ä¢ Qu√©t th·ªã tr∆∞·ªùng, n·∫°p d·ªØ li·ªáu li√™n t·ª•c, thanh to√°n ƒëa k√™nh, affiliate, PWA offline.">
<link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°Ô∏è</text></svg>">
<meta property="og:title" content="LightUnfold ‚Ä¢ Web3 AI X1000">
<meta property="og:description" content="Qu√©t d·ªØ li·ªáu crypto/top c∆° h·ªôi m·ªói 10 ph√∫t ‚Ä¢ Thanh to√°n nhanh b·∫±ng QR ‚Ä¢ Ch·∫°y 24/7.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://vuhuyphat.github.io/">
<meta name="theme-color" content="#0b0f13">
<style>
:root{--bg:#0b0f13;--panel:#10171f;--line:#1c2a3a;--txt:#e9eef4;--muted:#9fb3c8;--brand:#7dc1ff;--accent:#ffad33;--ok:#1ec28b}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--txt);font:16px/1.55 system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial}
a{color:var(--brand);text-decoration:none}img{max-width:100%;height:auto}
.container{max-width:1040px;margin:0 auto;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:rgba(255,255,255,0.02);
  padding:6px 12px;border-radius:999px;color:var(--muted)}
h1{margin:10px 0 6px;font-weight:800;letter-spacing:.2px}
.muted{color:var(--muted)}small.muted{font-size:.9em}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:16px}
.card h3{margin:0 0 10px}
.badge{display:inline-block;background:#0e1b28;border:1px solid var(--line);border-radius:999px;padding:6px 10px}
.item{padding:12px;border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,0.01)}
.item strong{font-size:18px}
.price{font-weight:700}
.chg{font-variant-numeric:tabular-nums}
.up{color:var(--ok)}.down{color:#f36}
.actions{display:flex;gap:8px;flex-wrap:wrap}
.btn{border:0;border-radius:10px;padding:10px 12px;font-weight:700;cursor:pointer}
.btn-cta{background:var(--accent);color:#231700}
.btn-ghost{background:#0e1b28;color:var(--txt);border:1px solid var(--line)}
footer{color:var(--muted);text-align:center;padding:28px 16px}
.sep{height:1px;background:linear-gradient(90deg,transparent, #203246 30%, #203246 70%, transparent);margin:16px 0}
.kv{display:flex;gap:10px;flex-wrap:wrap}
.kv div{padding:8px 12px;border:1px solid var(--line);border-radius:9px;color:var(--muted)}
#hb.ok{color:var(--ok)}
.shimmer{background:linear-gradient(90deg,rgba(255,255,255,.06),rgba(255,255,255,.12),rgba(255,255,255,.06));
  background-size:200% 100%;animation:sh 1.2s infinite}
@keyframes sh{0%{background-position:200% 0}100%{background-position:-200% 0}}
</style>
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","name":"LightUnfold ‚Ä¢ Web3 AI X1000","url":"https://vuhuyphat.github.io/",
"potentialAction":{"@type":"SearchAction","target":"https://vuhuyphat.github.io/?q={query}","query-input":"required name=query"}}
</script>
</head>
<body>
  <div class="container">
    <div class="row">
      <span class="pill">ENS: <b id="ens">lightunfold.eth</b></span>
      <span class="pill">Heartbeat: <b id="hb">‚Äî</b></span>
      <a class="pill" href="data/latest.json" target="_blank">data</a>
      <a class="pill" href="config.json" target="_blank">config</a>
    </div>
    <h1 id="brand">LightUnfold ‚Ä¢ Web3 AI X1000</h1>
    <div id="tagline" class="muted">Trang Web3 AI t·ª± ƒë·ªông 24/7</div>

    <div class="sep"></div>

    <section class="card">
      <h3>üî• C∆° h·ªôi n·ªïi b·∫≠t</h3>
      <div id="opps" class="grid"></div>
      <small class="muted" id="updated"></small>
    </section>

    <section class="card">
      <h3>üí≥ Thanh to√°n</h3>
      <div id="pays" class="grid"></div>
      <div class="kv" style="margin-top:10px">
        <div>Li√™n h·ªá: <code id="pay-contact"></code></div>
        <div>Web3 ‚Ä¢ Phi t·∫≠p trung ‚Ä¢ M·ªü r·ªông</div>
      </div>
    </section>

    <section class="card">
      <h3>ü§ù Affiliate</h3>
      <div id="affs" class="grid"></div>
    </section>

    <footer>¬© <span id="year"></span> LightUnfold ‚Ä¢ Ch·∫°y 24/7 ‚Ä¢ PWA offline</footer>
  </div>

<script>
/* ========= SW: t·∫°o service worker t·ª´ Blob (kh√¥ng c·∫ßn file ri√™ng) ========= */
if ('serviceWorker' in navigator) {
  const swCode = `
    const CACHE='x1000-v1';
    const CORE=['./','index.html','config.json','data/latest.json'];
    self.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(CORE)).then(()=>self.skipWaiting()))});
    self.addEventListener('activate',e=>{e.waitUntil(self.clients.claim())});
    self.addEventListener('fetch',e=>{
      const url=new URL(e.request.url);
      if(url.origin===location.origin && (url.pathname.endsWith('/data/latest.json')||url.pathname.endsWith('/config.json'))){
        // Network-first, fallback cache
        e.respondWith(fetch(e.request).then(r=>{
          const copy=r.clone();caches.open(CACHE).then(c=>c.put(e.request,copy));return r;
        }).catch(()=>caches.match(e.request)));
      }else{
        e.respondWith(caches.match(e.request).then(m=>m||fetch(e.request)));
      }
    });
  `;
  const blobUrl = URL.createObjectURL(new Blob([swCode], {type:'text/javascript'}));
  navigator.serviceWorker.register(blobUrl).catch(()=>{});
}

/* ========= ti·ªán √≠ch ========= */
const $ = (s)=>document.querySelector(s);
const fmt = (n, d=2)=>Number(n||0).toLocaleString('en-US',{minimumFractionDigits:d,maximumFractionDigits:d});
const ago = (ts)=>{try{const t=new Date(ts);const m=Math.max(0,(Date.now()-t)/60000)|0;return m?m+' ph√∫t tr∆∞·ªõc':'v·ª´a xong';}catch{ return '‚Äî'}};
const qrlink = (data)=>`https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(data)}`;

/* ========= c·∫•u h√¨nh m·∫∑c ƒë·ªãnh n·∫øu thi·∫øu file ========= */
const defaultCfg = {
  site:{ brand:"LightUnfold ‚Ä¢ Web3 AI X1000", ens:"lightunfold.eth",
    tagline:"20,000+ AI ‚Ä¢ 200+ qu·ªëc gia ‚Ä¢ 200+ ng√¥n ng·ªØ ‚Ä¢ t·ª± ƒë·ªông 24/7 ‚Ä¢ chuy·ªÉn ƒë·ªïi X1000",
    contact:"@you" },
  payments:{
    eth:"0x54E15A7b6d4213beE87800432A151d794638E3C2",
    usdt_erc20:"0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0",
    momo:"0567892030", vietcombank:"9567892030", paypal:"vumumabada@gmail.com"
  },
  affiliates:[
    {name:"Binance", url:"https://www.binance.com/vi/register?ref=GRO_20338_9V44N"},
    {name:"AlgosOne", url:"https://algosone.page.link/MbtR"}
  ]
};

async function getJSON(url, fallback){
  try{
    const r = await fetch(url,{cache:'no-store'});
    if(!r.ok) throw 0;
    return await r.json();
  }catch(e){
    return fallback;
  }
}

/* ========= render ========= */
function renderHeader(cfg){
  $('#brand').textContent = cfg?.site?.brand || defaultCfg.site.brand;
  $('#ens').textContent   = cfg?.site?.ens   || defaultCfg.site.ens;
  $('#tagline').textContent = cfg?.site?.tagline || defaultCfg.site.tagline;
  $('#pay-contact').textContent = cfg?.site?.contact || defaultCfg.site.contact || '';
  $('#year').textContent = new Date().getFullYear();
}

function renderOpps(payload){
  const wrap = $('#opps');
  wrap.innerHTML = '';
  const items = payload?.items||[];
  if(!items.length){
    wrap.innerHTML = `<div class="item shimmer">ƒêang c·∫≠p nh·∫≠t d·ªØ li·ªáu‚Ä¶</div>`;
    $('#updated').textContent = '';
    return;
  }
  for(const it of items){
    const ch24 = Number(it.ch24h||0);
    const dir = ch24>=0?'up':'down';
    const el = document.createElement('div');
    el.className='item';
    el.innerHTML = `
      <div class="row" style="justify-content:space-between;align-items:center">
        <div><strong>${(it.symbol||'').toUpperCase()}</strong> <small class="muted">${it.name||''}</small></div>
        <a class="badge" href="${it.link||'#'}" target="_blank">Chi ti·∫øt ‚Üó</a>
      </div>
      <div class="row" style="margin-top:6px">
        <div>Gi√°: <span class="price">$${fmt(it.price,4)}</span></div>
        <div>24h: <b class="chg ${dir}">${fmt(ch24,2)}%</b></div>
        <div>Vol 24h: $${fmt(it.vol24h||0,0)}</div>
      </div>`;
    wrap.appendChild(el);
  }
  $('#updated').textContent = 'C·∫≠p nh·∫≠t: '+(payload.generated_at? ago(payload.generated_at):'‚Äî');
  $('#hb').textContent = 'ONLINE'; $('#hb').classList.add('ok');
}

function renderPayments(cfg){
  const p = (cfg?.payments)||defaultCfg.payments;
  const payCards = [];

  if(p.eth) payCards.push({
    title:'ETH (EVM)',
    addr:p.eth,
    deep:`ethereum:${p.eth}`,
    note:'N·∫°p ETH/USDT tr√™n m·∫°ng EVM.'
  });
  if(p.usdt_erc20) payCards.push({
    title:'USDT-ERC20',
    addr:p.usdt_erc20,
    deep:`ethereum:${p.usdt_erc20}/transfer?contractAddress=0xdac17f958d2ee523a2206206994597c13d831ec7`,
    note:'USDT m·∫°ng Ethereum.'
  });
  if(p.momo) payCards.push({
    title:'MoMo',
    addr:p.momo,
    deep:`momo://payment/${p.momo}`,
    note:'Qu√©t tr√™n ·ª©ng d·ª•ng MoMo.'
  });
  if(p.vietcombank) payCards.push({
    title:'Vietcombank',
    addr:p.vietcombank,
    deep:`vietcombank://pay/${p.vietcombank}`,
    note:'Chuy·ªÉn kho·∫£n nhanh 24/7.'
  });
  if(p.paypal) payCards.push({
    title:'PayPal',
    addr:p.paypal,
    deep:`https://www.paypal.me/${encodeURIComponent(p.paypal.split('@')[0])}`,
    note:'Thanh to√°n qu·ªëc t·∫ø.'
  });

  const wrap = $('#pays'); wrap.innerHTML='';
  for(const c of payCards){
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `
      <div class="row" style="justify-content:space-between;align-items:center">
        <strong>${c.title}</strong>
        <a class="badge" href="${c.deep}" target="_blank">M·ªü v√≠/·ª©ng d·ª•ng ‚Üó</a>
      </div>
      <div class="row" style="align-items:center;margin-top:8px">
        <img alt="QR" width="110" height="110" style="border-radius:10px;border:1px solid var(--line)" src="${qrlink(c.deep)}">
        <div>
          <div class="muted">ƒê·ªãa ch·ªâ</div>
          <code style="display:inline-block;margin:4px 0">${c.addr}</code><br>
          <small class="muted">${c.note||''}</small>
          <div class="actions" style="margin-top:8px">
            <button class="btn btn-cta" onclick="navigator.clipboard.writeText('${c.addr}').then(()=>alert('ƒê√£ copy ƒë·ªãa ch·ªâ'))">Copy ƒë·ªãa ch·ªâ</button>
            <a class="btn btn-ghost" href="${c.deep}" target="_blank">Thanh to√°n ‚Üó</a>
          </div>
        </div>
      </div>`;
    wrap.appendChild(el);
  }
}

function renderAffiliates(cfg){
  const list = cfg?.affiliates || defaultCfg.affiliates;
  const wrap = $('#affs'); wrap.innerHTML='';
  for(const a of list){
    const el = document.createElement('div'); el.className='item';
    el.innerHTML = `<div class="row" style="justify-content:space-between;align-items:center">
      <div><strong>${a.name}</strong><br><small class="muted">${a.desc||'ƒêƒÉng k√Ω ƒë·ªÉ nh·∫≠n ∆∞u ƒë√£i.'}</small></div>
      <a class="btn btn-ghost" href="${a.url}" target="_blank">M·ªü ‚Üó</a>
    </div>`;
    wrap.appendChild(el);
  }
}

/* ========= load & auto refresh ========= */
async function boot(){
  const cfg = await getJSON('config.json', defaultCfg);
  renderHeader(cfg); renderPayments(cfg); renderAffiliates(cfg);

  const data = await getJSON('data/latest.json', null);
  if(data){ localStorage.setItem('x1000_data', JSON.stringify(data)); renderOpps(data); }
  else{
    const cached = localStorage.getItem('x1000_data');
    if(cached){ renderOpps(JSON.parse(cached)); $('#hb').textContent='CACHED'; $('#hb').classList.add('ok'); }
    else{ renderOpps({items:[]}); }
  }
}
boot();

// refresh th√¥ng minh m·ªói 60s (backoff khi l·ªói)
let tick=60, backoff=60;
setInterval(async()=>{
  try{
    const d = await getJSON('data/latest.json', null);
    if(d){ renderOpps(d); localStorage.setItem('x1000_data', JSON.stringify(d)); backoff=60; }
    tick = 60;
  }catch{ tick = Math.min(300, backoff*=1.5); }
}, 60*1000);
</script>
</body>
</html>
