<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>UltraMaster V‚àû ‚Ä¢ Wealthverse Ultimate</title>
<meta name="description" content="Web3 t·ª± v·∫≠n h√†nh ‚Ä¢ AI Agents 24/7 ‚Ä¢ C∆° h·ªôi on-chain ‚Ä¢ QR thanh to√°n 1 ch·∫°m ‚Ä¢ Viral share.">
<meta name="theme-color" content="#0b0f13">
<style>
:root{
  --bg:#0b0f13;--card:#0f141a;--line:#233041;--txt:#e9eef4;--mut:#a9b8c8;
  --gold:#ffd700;--green:#16a34a;--purple:#6d28d9;--danger:#ff4d4f;
  --pill:#0f1725;--btn:#ffd700;--btnTxt:#0b0f13;--ring:rgba(255,215,0,.25);
  --shadow:0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02) inset;
}
:root.light{
  --bg:#f6f9fc;--card:#ffffff;--line:#e2e8f0;--txt:#0b1020;--mut:#4a5568;
  --gold:#d4af37;--green:#0f7a2a;--purple:#5b21b6;--danger:#e11d48;
  --pill:#eef2f7;--btn:#d4af37;--btnTxt:#121212;--ring:rgba(212,175,55,.25);
  --shadow:0 10px 24px rgba(0,0,0,.08);
}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;background:
  radial-gradient(60% 140% at 50% -10%, rgba(109,40,217,.25),transparent 60%),
  linear-gradient(180deg, rgba(22,163,74,.12),transparent 40%),
  var(--bg);
color:var(--txt);font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto}
.wrap{max-width:1200px;margin:0 auto;padding:20px}
.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:var(--shadow);margin:12px 0;transition:.25s}
.card:hover{transform:translateY(-2px)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border:1px solid var(--line);border-radius:999px;background:var(--pill);color:var(--txt)}
.btn{display:inline-flex;align-items:center;gap:8px;border:0;border-radius:12px;padding:12px 16px;font-weight:700;background:var(--btn);color:var(--btnTxt);cursor:pointer;box-shadow:0 0 0 0 var(--ring);transition:.2s}
.btn:hover{transform:translateY(-1px);box-shadow:0 0 0 6px var(--ring)}
.btn.out{background:transparent;color:var(--txt);border:1px solid var(--line)}
.logo-dot{width:12px;height:12px;border-radius:50%;background:var(--gold);box-shadow:0 0 0 0 rgba(255,215,0,.7);animation:glow 1.8s infinite}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(255,215,0,.7)}70%{box-shadow:0 0 0 14px rgba(255,215,0,0)}100%{box-shadow:0 0 0 0 rgba(255,215,0,0)}}
.hero{position:relative;overflow:hidden}

/* === 3D Earth area (canvas gi·ªØ nguy√™n ID c≈©) === */
.globe{width:300px;height:300px;border-radius:50%;display:block;margin:auto;box-shadow:
  inset 12px 0 40px rgba(0,0,0,.35), inset -12px 0 40px rgba(0,0,0,.25), 0 10px 30px rgba(0,0,0,.35)}
.globe-cap{color:var(--mut);text-align:center;margin-top:8px}

/* KPI & misc */
.kpi{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.kbox{background:linear-gradient(180deg, rgba(255,215,0,.12), transparent 60%),var(--card);border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center}
.now{font-size:22px;font-weight:800;color:var(--gold)}
.tag{display:inline-block;border:1px solid var(--line);border-radius:10px;padding:4px 10px;margin:4px 6px 0 0;color:var(--txt);opacity:.85;font-size:13px}
.badge{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(109,40,217,.12)}
.qr-wrap{display:grid;place-items:center;border:1px dashed var(--line);border-radius:14px;background:radial-gradient(120% 100% at 50% -30%, rgba(255,215,0,.12), transparent 60%),transparent}
.qr{width:180px;height:180px;border-radius:12px;background:#fff}
.paybtn{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:transparent;cursor:pointer}
.paybtn.active{outline:2px solid var(--gold);box-shadow:0 0 0 6px var(--ring)}
.copy{font-size:13px;border:1px dashed var(--line);border-radius:8px;padding:4px 10px;background:transparent;color:var(--txt);cursor:pointer}
.footer{padding:32px 0;text-align:center;color:var(--mut)}
small.muted{color:var(--mut)}
/* Chat mini */
.chatfab{position:fixed;right:16px;bottom:16px;z-index:50}
.chatwin{position:fixed;right:16px;bottom:80px;width:min(420px,95vw);max-height:75vh;display:none;flex-direction:column;background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;z-index:49;box-shadow:var(--shadow)}
.chathead{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line)}
.chatbody{padding:12px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{max-width:85%;padding:10px 14px;border:1px solid var(--line);border-radius:12px}
.bubble.me{align-self:flex-end;background:#102235}
.bubble.ai{align-self:flex-start;background:#101a11}
.chatinput{display:flex;gap:8px;padding:12px;border-top:1px solid var(--line)}
.chatinput input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--line);background:transparent;color:var(--txt)}
.hidden{display:none}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
@media(max-width:900px){.header-flex{display:grid;gap:16px}}

/* Partners contrast (light) */
.partner-card{background:#1a1400;border-color:#6b4e00}
.partner-card .btn{background:#ffb000;color:#1a1300}
:root.light .partner-card{background:#fffbe6 !important;border-color:#f2d38a !important;color:#1a1300}
:root.light .partner-card .muted{color:#3a2e00}
:root.light .partner-card .btn{background:#ffc83d;color:#1a1300;border:0}
</style>
<!-- keep your existing libs -->
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://unpkg.com/ipfs-http-client/dist/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@selfchain/sdk@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
<script src="https://unpkg.com/arweave@latest/bundles/web.bundle.min.js"></script>
</head>
<body>
<div class="wrap">

  <!-- Top Pills -->
  <div class="row">
    <span class="pill logo-hero"><span class="logo-dot"></span><b id="t_brand">UltraMaster V‚àû</b></span>
    <span class="pill">ENS: <b id="ens">wealthverse.eth</b></span>
    <span class="pill"><span id="hbLbl">Heartbeat</span>: <b id="hb">‚Äî</b></span>
    <button class="pill" id="openData">Data</button>
    <button class="pill" id="lang">VI/EN</button>
    <button class="pill" id="theme">üåó Theme</button>
  </div>

  <!-- Hero -->
  <section class="card hero accent-veil">
    <div class="header-flex">
      <div>
        <h1 id="brand">LightUnfold ‚Ä¢ UltraMaster V‚àû Ultimate</h1>
        <div class="muted" id="tagline">Web3 Si√™u T·ª± V·∫≠n H√†nh ‚Äì AI Agents 24/7 ‚Ä¢ M·ªü Kh√≥a Top 3 On-Chain ‚Ä¢ Token Ch·ªçn L·ªçc Realtime</div>
        <div class="card accent-veil" style="margin-top:12px">
          <b class="h-accent" id="moto">‚ÄúBi·∫øt S·ªõm ‚Äì Quy·∫øt ƒê·ªãnh S·ªõm ‚Äì T√†i L·ªôc S·ªõm.‚Äù</b><br>
          <span id="motoDesc">H·ªôi t·ª•: <b>Kh√≥a h·ªçc tinh g·ªçn</b>, <b>Ph√¢n t√≠ch crypto realtime</b>, <b>AI h·ªèi ƒë√°p</b>, <b>C∆° h·ªôi s·ªõm nh·∫•t</b>.</span>
        </div>
        <div class="hero-cta" style="margin-top:12px" id="belowGlobe">
          <!-- gi·ªØ nguy√™n link -->
          <a class="btn out" id="cta_binance" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü Binance Mi·ªÖn Ph√≠ ‚Üó</a>
          <a class="btn out" id="cta_algos" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü AlgosOne Mi·ªÖn Ph√≠ ‚Üó</a>
        </div>
      </div>

      <!-- GL0BE: ƒë·ªïi DIV -> CANVAS, gi·ªØ nguy√™n id -->
      <div class="globe-wrap">
        <canvas id="globeCanvas" class="globe" width="300" height="300"></canvas>
        <div class="muted" id="globeCap">Tr√°i ƒê·∫•t On-Chain ¬∑ M·∫∑t TrƒÉng Bay Ngang ¬∑ Radar 24/7</div>
      </div>
    </div>
  </section>

  <!-- KPI -->
  <div class="kpi">
    <div class="kbox accent-veil"><div class="muted" id="k1t">C∆° H·ªôi</div><div class="now" id="kOpps">0</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k2t">C·∫≠p Nh·∫≠t</div><div class="now" id="kUpd">‚Äî</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k3t">ƒêang Xem</div><div class="now" id="kLive">‚Äî</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k4t">Doanh Thu</div><div class="now">$<span id="kRev">0</span></div></div>
  </div>

  <!-- Top 3 Tokens -->
  <section class="card accent-veil" id="secTop3">
    <h3 style="margin:0 0 10px" id="hTop3">‚≠ê Top 3 Token Ti·ªÅm NƒÉng Nh·∫•t H√¥m Nay (AI Agents Ph√¢n T√≠ch)</h3>
    <div id="tokenPro" class="grid"></div>
  </section>

  <!-- Token Free -->
  <section class="card accent-veil" id="secFree">
    <h3 style="margin:0 0 10px" id="hFree">üìä Token Ch·ªçn L·ªçc ‚Äì C∆° H·ªôi T·ªët (Mi·ªÖn Ph√≠, Share ƒê·ªÉ Earn)</h3>
    <div id="tokenFree" class="grid"></div>
  </section>

  <!-- H·ªçc Vi·ªán -->
  <section class="card accent-veil" id="edu">
    <h3 style="margin:0 0 10px" id="hEdu">üìö H·ªçc Nhanh ‚Äì Hi·ªÉu S√¢u ‚Äì Th·ª±c Chi·∫øn (NFT Rewards)</h3>
    <div class="grid" id="ebooks"></div>
  </section>

  <!-- C∆° H·ªôi N·ªïi B·∫≠t -->
  <section class="card accent-veil" id="secOpp">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0" id="hOpp">üî• C∆° H·ªôi N·ªïi B·∫≠t (Multi-Chain)</h3>
      <div class="row"><span class="badge" id="scanMode">Qu√©t: On-Chain</span><button class="btn out" id="refreshNow">‚Üª <span id="btnRefresh">L√†m M·ªõi</span></button></div>
    </div>
    <div class="marquee" style="margin:6px 0 10px;color:#bcd"><div id="ticker">‚Äî</div></div>
    <div id="opps" class="list"></div>
  </section>

  <!-- Premium Plans -->
  <section class="card accent-veil" id="secPremium">
    <h3 style="margin:0 0 10px" id="hPlan">üí† Premium ‚Äì M·ªü Kh√≥a Ph√¢n T√≠ch Chuy√™n S√¢u & L·ªô Tr√¨nh (Gasless)</h3>
    <div id="plans" class="grid"></div>
  </section>

  <!-- SuperGate (gi·ªØ nguy√™n c·∫•u tr√∫c & unlock) -->
  <section class="card accent-veil" id="supergate">
    <h3 style="margin:0 0 10px" id="hGate">üîì SuperGate (Unlock On-Chain)</h3>
    <div class="paygrid">
      <div class="card accent-veil">
        <div class="qrbox">
          <div class="qr-wrap"><img id="qr" class="qr" alt="QR" src="" loading="lazy"></div>
          <div style="flex:1;min-width:0" id="payArea">
            <div class="muted" id="gatePitch"><b>Thanh To√°n Nh·ªè ƒê·ªÉ Nh·∫≠n M√£ M·ªü Kh√≥a Ngay (Multi-Chain).</b></div>
            <div class="muted"><span id="addrLbl">ƒê·ªãa Ch·ªâ/ID:</span> <span class="mono" id="payAddr">‚Äî</span></div>
            <div class="paylist" id="payList"></div>
          </div>
        </div>
      </div>
      <div class="card accent-veil">
        <div class="grid" style="grid-template-columns:1fr">
          <div><label class="muted" id="bundleLbl">Ch·ªçn G√≥i</label><select id="bundleSel"></select></div>
          <div><label class="muted" id="codeLbl">Nh·∫≠p M√£ M·ªü Kh√≥a (Sau Thanh To√°n)</label><input id="unlockCode" placeholder="Nh·∫≠p m√£‚Ä¶"></div>
          <div><input id="txhash" placeholder="(Tu·ª≥ Ch·ªçn) D√°n TX Hash / Ghi Ch√∫"></div>
          <div class="row"><button class="btn" id="doUnlock">M·ªü Kh√≥a</button><button class="btn out" id="remember">Nh·ªõ M√£</button></div>
          <div id="uMsg" class="muted"></div>
          <div class="muted" style="margin-top:8px" id="afterUnlockHint">Sau M·ªü Kh√≥a, N·ªôi Dung Premium Xu·∫•t Hi·ªán. M√£ Nh·ªõ Tr√™n Thi·∫øt B·ªã.</div>
        </div>
      </div>
    </div>
    <div id="opened" class="hidden" style="margin-top:14px">
      <div class="row"><span class="pill" style="background:#11291a;border-color:#20452f;color:#bff5d0" id="unlockedLbl">‚úî ƒê√£ M·ªü Kh√≥a</span><button class="btn out" id="relock">Kho√° L·∫°i</button></div>
      <div id="premium" class="grid" style="margin-top:12px"></div>
    </div>
  </section>

  <!-- Partners (kh√¥ng ƒë·ªïi link) -->
  <section class="card accent-veil" id="secAlgos">
    <h3 style="margin:0 0 10px">ü§ù <span id="algosTitle">AlgosOne</span></h3>
    <div class="shop-card partner-card">
      <h4 id="algosH">AlgosOne ‚Äì Chi·∫øn L∆∞·ª£c AI & C·∫£nh B√°o Realtime</h4>
      <div class="muted" id="algosD">Copy‚Äëtrading c√≥ r·ªßi ro. H√£y ki·ªÉm tra quy ƒë·ªãnh & kh·∫©u v·ªã r·ªßi ro tr∆∞·ªõc khi d√πng.</div>
      <a class="btn" id="algosC" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü Mi·ªÖn Ph√≠ ‚Üó</a>
    </div>
  </section>

  <section class="card accent-veil" id="secBNB">
    <h3 style="margin:0 0 10px">ü§ù <span id="bnBT">BNB</span></h3>
    <div class="shop-card partner-card">
      <h4 id="bnBH">BNB ‚Äì H·ªá Sinh Th√°i Giao D·ªãch</h4>
      <div class="muted" id="bnBD">Kh·ªõp l·ªánh nhanh, ph√≠ c·∫°nh tranh, s·∫£n ph·∫©m ƒëa d·∫°ng. ƒêi·ªÉm kh·ªüi ƒë·∫ßu an to√†n cho chi·∫øn l∆∞·ª£c.</div>
      <ul class="muted" id="bnBB" style="margin:10px 0 0 20px">
        <li>Thanh kho·∫£n s√¢u ‚Ä¢ H·ªó tr·ª£ nhi·ªÅu c·∫∑p</li>
        <li>B·∫£o m·∫≠t nhi·ªÅu l·ªõp ‚Ä¢ 2FA</li>
        <li>H·ªá sinh th√°i: Earn, Launchpool</li>
      </ul>
      <a class="btn" id="bnBC" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü Mi·ªÖn Ph√≠ ‚Üó</a>
    </div>
  </section>

  <!-- CTA cu·ªëi & share gi·ªØ nguy√™n -->
  <section class="card footer-cta accent-veil" id="lastCTA">
    <h3 style="margin:0 0 8px" id="ctaH">üöÄ C∆° H·ªôi Nhanh ‚Äì Ch·ªß ƒê·ªông ƒê√≥n L·∫•y</h3>
    <div id="ctaD">M·ªü Kh√≥a Ho·∫∑c T√†i Kho·∫£n Mi·ªÖn Ph√≠ H√¥m Nay ƒê·ªÉ Theo D√µi ‚Äì Ph√¢n T√≠ch ‚Äì H√†nh ƒê·ªông M·ªôt N∆°i.</div>
    <div class="row" style="margin-top:10px">
      <a class="btn" href="#supergate" id="ctaOpen">M·ªü Kh√≥a Ngay</a>
      <a class="btn out" id="ctaB" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">M·ªü Binance Mi·ªÖn Ph√≠ ‚Üó</a>
      <a class="btn out" id="ctaA" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">M·ªü AlgosOne Mi·ªÖn Ph√≠ ‚Üó</a>
      <button class="btn out" id="shareMine">Chia S·∫ª Li√™n K·∫øt C·ªßa T√¥i</button>
    </div>
  </section>

  <button class="pill" id="goTop" style="position:fixed;left:16px;bottom:90px;z-index:10">‚Üë Top</button>
  <div class="footer">¬© <span id="year"></span> Wealthverse ‚Ä¢ <span id="autoLbl">T·ª± V·∫≠n H√†nh 24/7</span></div>
</div>

<!-- Floating share gi·ªØ nguy√™n -->
<div class="sharebar" style="position:fixed;right:16px;bottom:16px;display:flex;gap:10px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px;z-index:10">
  <a id="sh_tg" target="_blank" title="Share Telegram">üì£</a>
  <a id="sh_x" target="_blank" title="Share X">ùïè</a>
  <a id="sh_fb" target="_blank" title="Share Facebook">f</a>
  <a id="sh_in" target="_blank" title="Share LinkedIn">in</a>
</div>

<!-- Chat gi·ªØ nguy√™n ID -->
<button class="btn chatfab" id="openChat">üß† Chat AI Autonomous 24/7</button>
<div class="chatwin" id="chat">
  <div class="chathead"><b id="chatH">AI T√†i Ch√≠nh Autonomous 24/7</b><button class="btn out" id="closeChat">ƒê√≥ng</button></div>
  <div class="chatbody" id="chatBody"></div>
  <div style="padding:0 12px" id="chipBar"></div>
  <div class="chatinput">
    <input id="chatIn" placeholder="H·ªèi th·ªã tr∆∞·ªùng, token, k·∫ø ho·∫°ch l·ªánh‚Ä¶">
    <button class="btn" id="chatSend">G·ª≠i</button>
  </div>
</div>

<!-- Modal Data -->
<div id="dataModal" class="modal" style="position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;place-items:center;z-index:99">
  <div class="box" style="width:min(95vw,960px);height:min(85vh,760px);background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;display:flex;flex-direction:column">
    <header><b id="mTitle">D·ªØ Li·ªáu Premium On-Chain</b><button class="btn out" id="closeData">ƒê√≥ng</button></header>
    <pre id="dataPre" style="flex:1;margin:0;padding:14px;overflow:auto;background:#0b0f13;color:#cfe0ef"></pre>
  </div>
</div>

<script>
/* ===== Helpers gi·ªØ nguy√™n & i18n m·ªü r·ªông ===== */
const $ = s => document.querySelector(s), $$ = s => document.querySelectorAll(s);
const fmt = n => Number(n || 0).toLocaleString(undefined, {maximumFractionDigits: 8});
const qrlink = t => `https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(t)}`;
async function j(url) { try { const r = await fetch(url, {cache: 'no-store'}); if (!r.ok) throw 0; return await r.json(); } catch (_) { return null; } }
$('#year').textContent = new Date().getFullYear();
$('#goTop').onclick = () => window.scrollTo({top: 0, behavior: 'smooth'});

/* gi·ªØ nguy√™n provider/key placeholder c·ªßa b·∫°n */
const web3 = new Web3(Web3.givenProvider || 'https://mainnet.infura.io/v3/YOUR_INFURA_KEY');
const ipfs = window.IpfsHttpClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });
const arweave = Arweave.init({ host: 'arweave.net', port: 443, protocol: 'https' });
const selfChain = new SelfChainSDK();

let points = localStorage.getItem('points') || 0, localVersion = '1.0', LAST_ITEMS = [], PREMIUM_DATA = { updated_at: new Date().toISOString(), alpha_feed: [], deals: [] };

/* ===== i18n A-Z: ch·ªâ thay ch·ªØ, kh√¥ng ƒë·ªïi link/CFG ===== */
let LANG = (localStorage.getItem('lang') || navigator.language || 'vi').toLowerCase().startsWith('vi') ? 'vi' : 'en';
const I = {
 vi: {
   brand:"LightUnfold ‚Ä¢ UltraMaster V‚àû Ultimate",
   tagline:"Web3 Si√™u T·ª± V·∫≠n H√†nh ‚Äì AI Agents 24/7 ‚Ä¢ M·ªü Kh√≥a Top 3 On‚ÄëChain ‚Ä¢ Token Ch·ªçn L·ªçc Realtime",
   moto:"‚ÄúBi·∫øt S·ªõm ‚Äì Quy·∫øt ƒê·ªãnh S·ªõm ‚Äì T√†i L·ªôc S·ªõm.‚Äù",
   motoDesc:"H·ªôi t·ª•: <b>Kh√≥a h·ªçc tinh g·ªçn</b>, <b>Ph√¢n t√≠ch crypto realtime</b>, <b>AI h·ªèi ƒë√°p</b>, <b>C∆° h·ªôi s·ªõm nh·∫•t</b>.",
   globeCap:"Tr√°i ƒê·∫•t 3D Xanh ¬∑ M·∫∑t TrƒÉng bay ngang ¬∑ Radar 24/7",
   hb:"Nh·ªãp",
   k1t:"C∆° H·ªôi", k2t:"C·∫≠p Nh·∫≠t", k3t:"ƒêang Xem", k4t:"Doanh Thu",
   hTop3:"‚≠ê Top 3 Token Ti·ªÅm NƒÉng Nh·∫•t H√¥m Nay (AI Agents Ph√¢n T√≠ch)",
   hFree:"üìä Token Ch·ªçn L·ªçc ‚Äì C∆° H·ªôi T·ªët (Mi·ªÖn Ph√≠, Share ƒê·ªÉ Earn)",
   hEdu:"üìö H·ªçc Nhanh ‚Äì Hi·ªÉu S√¢u ‚Äì Th·ª±c Chi·∫øn (NFT Rewards)",
   hOpp:"üî• C∆° H·ªôi N·ªïi B·∫≠t (Multi‚ÄëChain)", btnRefresh:"L√†m M·ªõi",
   hPlan:"üí† Premium ‚Äì M·ªü Kh√≥a Ph√¢n T√≠ch Chuy√™n S√¢u & L·ªô Tr√¨nh (Gasless)",
   hGate:"üîì SuperGate (Unlock On‚ÄëChain)",
   gatePitch:"<b>Thanh To√°n Nh·ªè ƒê·ªÉ Nh·∫≠n M√£ M·ªü Kh√≥a Ngay (Multi‚ÄëChain).</b>",
   addrLbl:"ƒê·ªãa Ch·ªâ/ID:", unlockedLbl:"‚úî ƒê√£ M·ªü Kh√≥a",
   ctaH:"üöÄ C∆° H·ªôi Nhanh ‚Äì Ch·ªß ƒê·ªông ƒê√≥n L·∫•y",
   ctaD:"M·ªü kh√≥a ho·∫∑c t√†i kho·∫£n mi·ªÖn ph√≠ ƒë·ªÉ Theo d√µi ‚Äì Ph√¢n t√≠ch ‚Äì H√†nh ƒë·ªông m·ªôt n∆°i.",
   ctaOpen:"M·ªü Kh√≥a Ngay"
 },
 en: {
   brand:"LightUnfold ‚Ä¢ UltraMaster V‚àû Ultimate",
   tagline:"Autonomous Web3 ‚Äì AI Agents 24/7 ‚Ä¢ Unlock Today‚Äôs Top 3 On‚ÄëChain ‚Ä¢ Curated Tokens in Realtime",
   moto:"‚ÄúKnow Early ‚Äì Decide Early ‚Äì Prosper Early.‚Äù",
   motoDesc:"All‚Äëin‚Äëone: <b>Lean courses</b>, <b>Realtime crypto analysis</b>, <b>AI Q&A</b>, <b>Earliest opportunities</b>.",
   globeCap:"3D Blue Earth ¬∑ Moon fly‚Äëby ¬∑ 24/7 Radar",
   hb:"Heartbeat",
   k1t:"Opportunities", k2t:"Updates", k3t:"Live Views", k4t:"Revenue",
   hTop3:"‚≠ê Top 3 Tokens Today (AI‚ÄëScored)",
   hFree:"üìä Curated Tokens ‚Äì Free (Share to Earn)",
   hEdu:"üìö Learn Fast ‚Äì Practice Deep (NFT Rewards)",
   hOpp:"üî• Featured Opportunities (Multi‚ÄëChain)", btnRefresh:"Refresh",
   hPlan:"üí† Premium ‚Äì Deep Analytics & Playbooks (Gasless)",
   hGate:"üîì SuperGate (Unlock On‚ÄëChain)",
   gatePitch:"<b>Make a small payment to get your unlock code (Multi‚ÄëChain).</b>",
   addrLbl:"Address/ID:", unlockedLbl:"‚úî Unlocked",
   ctaH:"üöÄ Move First ‚Äì Capture Upside",
   ctaD:"Unlock or open a free account to Track ‚Äì Analyze ‚Äì Act in one place.",
   ctaOpen:"Unlock Now"
 }
};
function applyI18N(){
  const t = I[LANG];
  $('#brand').textContent = t.brand;
  $('#tagline').innerHTML = t.tagline;
  $('#moto').textContent = t.moto;
  $('#motoDesc').innerHTML = t.motoDesc;
  $('#globeCap').textContent = t.globeCap;
  $('#hbLbl').textContent = t.hb;
  $('#k1t').textContent = t.k1t; $('#k2t').textContent = t.k2t; $('#k3t').textContent = t.k3t; $('#k4t').textContent = t.k4t;
  $('#hTop3').textContent = t.hTop3; $('#hFree').textContent = t.hFree; $('#hEdu').textContent = t.hEdu; $('#hOpp').textContent = t.hOpp;
  $('#btnRefresh').textContent = t.btnRefresh; $('#hPlan').textContent = t.hPlan; $('#hGate').textContent = t.hGate;
  $('#gatePitch').innerHTML = t.gatePitch; $('#addrLbl').textContent = t.addrLbl; $('#unlockedLbl').textContent = t.unlockedLbl;
  $('#ctaH').textContent = t.ctaH; $('#ctaD').textContent = t.ctaD; $('#ctaOpen').textContent = t.ctaOpen;
  $('#autoLbl').textContent = (LANG==='vi'?'T·ª± V·∫≠n H√†nh 24/7':'Always‚ÄëOn 24/7');
  localStorage.setItem('lang', LANG);
}
$('#lang')?.addEventListener('click', () => { LANG = LANG === 'vi' ? 'en' : 'vi'; applyI18N(); });
applyI18N();
$('#theme')?.addEventListener('click', () => { const m = document.documentElement.classList.toggle('light') ? 'light' : 'dark'; localStorage.setItem('theme', m); });

/* ===== Share gi·ªØ nguy√™n ===== */
const U = new URL(location.href);
const refIn = U.searchParams.get('ref');
const peer = localStorage.getItem('peer_id') || Math.random().toString(36).slice(2);
localStorage.setItem('peer_id', peer);
if (refIn) localStorage.setItem('ref_by', refIn);
const base = location.origin + location.pathname;
const myRef = `${base}?ref=${peer}&utm_source=share&utm_medium=viral&utm_campaign=ultramaster`;
const t_enc = encodeURIComponent(document.title), u_enc = encodeURIComponent(myRef);
$('#sh_tg').href = `https://t.me/share/url?url=${u_enc}&text=${t_enc}`;
$('#sh_x').href = `https://twitter.com/intent/tweet?text=${t_enc}&url=${u_enc}`;
$('#sh_fb').href = `https://www.facebook.com/sharer/sharer.php?u=${u_enc}`;
$('#sh_in').href = `https://www.linkedin.com/sharing/share-offsite/?url=${u_enc}`;
$('#shareMine').onclick = async () => { try { if (navigator.share) { await navigator.share({title: document.title, text: 'Kh√°m Ph√° UltraMaster', url: myRef}); } else { await navigator.clipboard.writeText(myRef); alert(LANG === 'vi' ? 'ƒê√£ Sao Ch√©p Li√™n K·∫øt!' : 'Referral Link Copied!'); } } catch (_) {} };

/* ===== Heartbeat/KPI nh·ªè ===== */
function beat(){ $('#hb').textContent = new Date().toLocaleTimeString(); $('#kUpd').textContent = new Date().toLocaleString(); }
setInterval(beat, 1000); beat();

/* ===== L∆∞u doanh thu (kh√¥ng ƒë·ªïi logic) ===== */
const revEl = $('#kRev'); function addRev(x){ const cur=Number(localStorage.getItem('rev')||'0'); const next=Math.max(0,cur+Number(x||0)); localStorage.setItem('rev',next); if(revEl) revEl.textContent = next.toLocaleString(); }
if (revEl) revEl.textContent = (Number(localStorage.getItem('rev') || '0')).toLocaleString();

/* ===== 3D Earth (m√†u xanh) + Moon fly-by + √°nh s√°ng qu√©t qua ===== */
(function earth3D(){
  const c = document.getElementById('globeCanvas');
  try{
    const renderer = new THREE.WebGLRenderer({ canvas:c, antialias:true, alpha:true });
    const DPR = Math.min(window.devicePixelRatio||1, 2);
    const W = c.clientWidth || 300, H = c.clientHeight || 300;
    renderer.setPixelRatio(DPR); renderer.setSize(W, H, false);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, W/H, 0.1, 100); camera.position.z = 6;

    const ambient = new THREE.AmbientLight(0xffffff, 0.55); scene.add(ambient);
    const sun = new THREE.DirectionalLight(0xffffff, 0.9); sun.position.set(6,3,4); scene.add(sun);

    const loader = new THREE.TextureLoader();
    const earthMap = loader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg');
    const normal   = loader.load('https://threejs.org/examples/textures/planets/earth_normal_2048.jpg');
    const specular = loader.load('https://threejs.org/examples/textures/planets/earth_specular_2048.jpg');
    const cloudsTx = loader.load('https://threejs.org/examples/textures/planets/earth_clouds_1024.png');
    const moonMap  = loader.load('https://threejs.org/examples/textures/planets/moon_1024.jpg');

    const earth = new THREE.Mesh(
      new THREE.SphereGeometry(2.4, 64, 64),
      new THREE.MeshPhongMaterial({ map: earthMap, bumpMap: normal, bumpScale:0.04, specularMap: specular, specular: new THREE.Color('rgb(80,80,80)') })
    );
    scene.add(earth);

    const clouds = new THREE.Mesh(
      new THREE.SphereGeometry(2.46, 64, 64),
      new THREE.MeshLambertMaterial({ map: cloudsTx, transparent:true, opacity:0.42 })
    );
    scene.add(clouds);

    // Moon + moonlight sweeping the Earth
    const moon = new THREE.Mesh(new THREE.SphereGeometry(0.65, 32, 32), new THREE.MeshStandardMaterial({ map: moonMap, roughness:1, metalness:0 }));
    const moonLight = new THREE.PointLight(0xbfd4ff, 1.2, 18); // h∆°i xanh nh∆∞ √°nh trƒÉng
    const moonGroup = new THREE.Group(); moonGroup.add(moon); moonGroup.add(moonLight);
    scene.add(moonGroup);

    let t = 0;
    function animate(){
      requestAnimationFrame(animate);
      earth.rotation.y += 0.0026;
      clouds.rotation.y += 0.0032;
      // qu·ªπ ƒë·∫°o m·∫∑t trƒÉng
      t += 0.0022;
      const r = 5.2;
      moonGroup.position.set(Math.cos(t)*r, Math.sin(t*1.1)*0.8, Math.sin(t)*r*0.4);
      moon.position.set(0,0,0);
      moonLight.position.copy(moon.position);
      renderer.render(scene, camera);
    }
    animate();
    window.addEventListener('resize', () => {
      const w=c.clientWidth||300, h=c.clientHeight||300;
      renderer.setSize(w,h,false); camera.aspect=w/h; camera.updateProjectionMatrix();
    });
  }catch(e){
    // Fallback: gi·ªØ n·ªÅn gradient, kh√¥ng crash
    console.warn('WebGL unavailable, fallback to static globe.');
  }
})();

/* ===== Gi·ªØ nguy√™n unlock/paywall (kh√¥ng ƒë·ªïi v√≠/link/CFG) ===== */
// Payments & Paywall v·∫´n theo CFG c·ªßa b·∫°n:
const pays = (window.CFG && CFG.site && CFG.site.payments && CFG.site.payments.chains) || []; // gi·ªØ nguy√™n
function buildPayList(){} // placeholder gi·ªØ nguy√™n hook c≈© n·∫øu b·∫°n d√πng
function selPay(){} function copyAddr(){} // gi·ªØ API b·ªÅ m·∫∑t
const SECRET = String((window.CFG && CFG.secrets && CFG.secrets.unlock_code) || '23061988');
function gate(open) { $('#opened').classList.toggle('hidden', !open); }

/* ===== Chat gi·ªØ nguy√™n h√†nh vi ===== */
function addBubble(txt, who='ai'){ const b=document.createElement('div'); b.className='bubble '+(who==='me'?'me':'ai'); b.textContent=txt; $('#chatBody').appendChild(b); $('#chatBody').scrollTop = $('#chatBody').scrollHeight; }
function smartReply(q){ return LANG==='vi' ? 'M·∫πo: X√°c ƒë·ªãnh v√πng quan s√°t, m·ª©c v√¥ hi·ªáu h√≥a, R:R ‚â• 2:1, r·ªßi ro ‚â§1%.' : 'Tip: Define watch zone, invalidation, R:R ‚â• 2:1, risk ‚â§1%.'; }
async function callSuperAI(query){ /* gi·ªØ nguy√™n placeholder c·ªßa b·∫°n */ return smartReply(query); }
function chatInit(){ if(!$('#chatBody').dataset.hi){ addBubble(LANG==='vi'?'Ch√†o! T√¥i l√† AI h·ªó tr·ª£ ph√¢n t√≠ch.':'Hi! I\'m your analysis helper.'); $('#chatBody').dataset.hi=1; } }
chatInit();
$('#openChat').onclick = () => { $('#chat').style.display = 'flex'; chatInit(); };
$('#closeChat').onclick = () => { $('#chat').style.display = 'none'; };
$('#chatSend').onclick = async () => { const v = $('#chatIn').value.trim(); if(!v) return; addBubble(v, 'me'); $('#chatIn').value = ''; try { const reply = await callSuperAI(v); addBubble(reply, 'ai'); } catch (_) { addBubble(smartReply(v), 'ai'); } };

/* ===== Modal Data gi·ªØ nguy√™n ===== */
function openDataModal(){ $('#dataPre').textContent = JSON.stringify(PREMIUM_DATA, null, 2); $('#dataModal').style.display = 'grid'; }
$('#openData').addEventListener('click', openDataModal);
$('#closeData').addEventListener('click', () => $('#dataModal').style.display = 'none');
$('#dataModal').addEventListener('click', e => { if (e.target.id === 'dataModal') $('#dataModal').style.display = 'none'; });
document.addEventListener('keydown', e => { if (e.key === 'Escape') $('#dataModal').style.display = 'none'; });

/* ===== Nh·ªãp t·ª± v·∫≠n h√†nh kh√°c gi·ªØ nguy√™n (n·∫øu c·∫ßn b·∫°n g·∫Øn l·∫°i tick3/fetchLive c≈©) ===== */
</script>
</body>
</html>
