<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LightUnfold ‚Äî One‚ÄëPaste Ultra</title>

  <!-- OG/SEO t·ªëi thi·ªÉu -->
  <meta name="description" content="M·ªôt l·∫ßn d√°n l√† ch·∫°y: thanh to√°n & gi·ªõi thi·ªáu th√¥ng minh, t·ª± h·ªçc & t·ª± xoay theo th·ªã tr∆∞·ªùng." />
  <meta property="og:title" content="LightUnfold ‚Äî One‚ÄëPaste Ultra" />
  <meta property="og:description" content="Thanh to√°n & affiliate g·∫Øn s·∫µn. T·ª± h·ªçc CTR, t·ª± xoay offer theo v√πng. ENS/IPFS auto." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://lightunfold.eth.limo/" />

  <style>
    :root{--bg:#0d0f14;--card:#141824;--muted:#9fb0c9;--text:#f7f8fa;--pri:#00ffa3;--sec:#1e90ff;--line:#212a3f}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:960px;margin:0 auto;padding:20px}
    h1{margin:4px 0 2px;font-size:28px;color:var(--sec)}
    .sub{color:var(--muted);font-size:14px;margin-bottom:14px}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:780px){.grid{grid-template-columns:1.1fr .9fr}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px}
    .card h3{margin:0 0 8px;font-size:16px}
    .row{display:flex;flex-wrap:wrap;gap:10px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:10px;border:1px solid #2b3550;background:#1f2636;color:#eaf3ff;text-decoration:none;font-weight:600}
    .btn.pri{background:linear-gradient(90deg,var(--pri),var(--sec));color:#07141d;border:none}
    .tag{display:inline-block;padding:4px 8px;border-radius:999px;background:#1c2538;color:#cfe6ff;font-size:12px}
    .note{color:var(--muted);font-size:13px}
    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .kpi .box{background:#101526;border:1px solid #1a2236;border-radius:10px;padding:10px;text-align:center}
    img.qr{width:100%;border-radius:10px;border:1px solid #223}
    .sp{height:8px}
    .tiny{font-size:12px;color:#aab6d6}
    .muted{color:#9fb0c9}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>LightUnfold ‚Äî One‚ÄëPaste Ultra</h1>
    <div class="sub">M·ªôt l·∫ßn d√°n l√† ch·∫°y ‚Ä¢ ENS/IPFS t·ª± ƒë·ªông ‚Ä¢ T·ª± h·ªçc CTR ‚Ä¢ T·ª± xoay offer theo th·ªã tr∆∞·ªùng</div>

    <div class="grid">
      <!-- C·ªôt tr√°i: CTA & Thanh to√°n -->
      <div class="card">
        <h3>Thanh to√°n nhanh</h3>
        <div class="row">
          <a class="btn pri" id="btnETH" href="ethereum:lightunfold.eth">üí∏ G·ª≠i ETH ‚Üí lightunfold.eth</a>
          <button class="btn" id="copyUSDT">üîó Copy USDT (ERC20)</button>
          <a class="btn" target="_blank" rel="noopener" id="btnPayPal" href="#">ü™ô PayPal.me</a>
        </div>
        <div class="sp"></div>
        <div class="row">
          <div class="card" style="flex:1;min-width:220px">
            <div><b>USDT (ERC20):</b> <span id="usdtAddr">0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0</span></div>
            <div class="tiny sp">D√°n ƒë·ªãa ch·ªâ tr√™n trong v√≠ c·ªßa b·∫°n, ch·ªçn m·∫°ng ERC‚Äë20.</div>
          </div>
          <div class="card" style="flex:1;min-width:220px">
            <div><b>MoMo:</b> 0567892030</div>
            <div class="tiny">M·ªü MoMo ‚Üí chuy·ªÉn t·ªõi s·ªë tr√™n (ghi n·ªôi dung chuy·ªÉn kho·∫£n n·∫øu c·∫ßn).</div>
          </div>
        </div>
        <div class="sp"></div>
        <div class="row">
          <div class="card" style="flex:1;min-width:260px">
            <div><b>Vietcombank:</b> 9567892030 ‚Äî TR·∫¶N VƒÇN V≈®</div>
            <img class="qr" id="vietqr" alt="VietQR" />
            <div class="tiny">Qu√©t VietQR ho·∫∑c chuy·ªÉn kho·∫£n th·ªß c√¥ng. N·ªôi dung: <b>LightUnfold</b></div>
          </div>
          <div class="card" style="flex:1;min-width:220px">
            <div><b>PayPal:</b> <span id="ppEmail">vumumabada@gmail.com</span></div>
            <div class="sp"></div>
            <a class="btn" target="_blank" rel="noopener" id="btnPayPal2">üîì M·ªü PayPal</a>
          </div>
        </div>
      </div>

      <!-- C·ªôt ph·∫£i: Offer xoay + Tr·∫°ng th√°i -->
      <div class="card" id="offerCard">
        <h3>∆Øu ƒë√£i n·ªïi b·∫≠t (t·ª± h·ªçc & xoay)</h3>
        <div class="row" id="offerBox">
          <!-- s·∫Ω ƒë∆∞·ª£c JS ch√®n -->
        </div>
        <div class="sp"></div>
        <div class="row" style="gap:6px">
          <span class="tag" id="tagRegion">Region: ‚Ä¶</span>
          <button class="btn" data-region="VN">VN</button>
          <button class="btn" data-region="GLOBAL">Global</button>
          <button class="btn" data-region="CRYPTO">Crypto</button>
        </div>
        <div class="sp"></div>
        <div class="kpi">
          <div class="box"><div class="tiny muted">L∆∞·ª£t xem</div><div id="kpiViews" style="font-weight:700">0</div></div>
          <div class="box"><div class="tiny muted">L∆∞·ª£t nh·∫•p</div><div id="kpiClicks" style="font-weight:700">0</div></div>
          <div class="box"><div class="tiny muted">CTR (local)</div><div id="kpiCTR" style="font-weight:700">0%</div></div>
        </div>
      </div>
    </div>

    <div class="sp"></div>
    <div class="card">
      <div class="tiny">
        L·ªëi v√†o: <a href="https://vuhuyphat.github.io/" target="_blank" rel="noopener">vuhuyphat.github.io</a> ‚Ä¢
        <a href="https://lightunfold.eth.limo/" target="_blank" rel="noopener">lightunfold.eth.limo</a> ‚Ä¢
        M·ªôt l·∫ßn d√°n l√† ch·∫°y ‚Äî mu·ªën n√¢ng c·∫•p AI sau n√†y ch·ªâ c·∫ßn th√™m <code>offers.json</code> (tu·ª≥ ch·ªçn).
      </div>
    </div>
  </div>

  <script>
  /* ====== AutoBrain ‚Äî One‚ÄëPaste Ultra (an to√†n) ======
     - T·ª± h·ªçc CTR, t·ª± xoay offer (Binance/AlgosOne)
     - T·ª± g·ª£i √Ω theo v√πng (VN/Global/Crypto)
     - Kh√¥ng t·ª± g·ª≠i giao d·ªãch. Kh√¥ng c·∫ßn backend. */

  // 1) C·∫•u h√¨nh c·ªë ƒë·ªãnh (ƒë√£ x√°c nh·∫≠n)
  const PAYMENT = {
    momo: { phone: "0567892030" },
    bank: { bank: "Vietcombank", account: "9567892030", name: "TR·∫¶N VƒÇN V≈®" },
    paypal: { email: "vumumabada@gmail.com" },
    usdt: { chain: "ERC20", addr: "0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0" },
    eth: { ens: "lightunfold.eth" }
  };
  const BASE_OFFERS = [
    { id:"binance", title:"Nh·∫≠n th∆∞·ªüng tr√™n Binance", 
      url:"https://www.binance.com/referral/earn-together/refer-in-hotsummer/claim?hl=vi&ref=GRO_20338_9V44N",
      regions:["VN","GLOBAL"] },
    { id:"algos", title:"AlgosOne ‚Äî C∆° h·ªôi m·ªü r·ªông thu nh·∫≠p",
      url:"https://algosone.page.link/MbtR",
      regions:["GLOBAL","CRYPTO","VN"] }
  ];

  // 2) Utils
  const LS="ab_ultra_v1";
  const $ = (s,p=document)=>p.querySelector(s);
  function load(){try{return JSON.parse(localStorage.getItem(LS)||"{}")}catch{return{}}}
  function save(v){localStorage.setItem(LS,JSON.stringify(v))}
  function today(){return new Date().toISOString().slice(0,10)}
  function isVN(){ const lang=(navigator.language||"").toLowerCase(); const tz=Intl.DateTimeFormat().resolvedOptions().timeZone||""; return lang.startsWith("vi")||tz.includes("Bangkok")||tz.includes("Ho_Chi_Minh"); }

  // 3) N·∫°p offers.json (tu·ª≥ ch·ªçn). N·∫øu kh√¥ng c√≥, d√πng BASE_OFFERS
  async function loadOffers(){
    try{
      const r=await fetch(location.origin+'/offers.json?ts='+Date.now(),{cache:'no-store'});
      if(!r.ok) return BASE_OFFERS;
      const js=await r.json();
      if(Array.isArray(js.offers)&&js.offers.length){
        const mapped = js.offers.map((o,i)=>({
          id: o.id || ('ext'+i),
          title: o.title || 'Offer',
          url: o.url,
          regions: o.regions || ["GLOBAL","VN","CRYPTO"]
        }));
        return [...mapped, ...BASE_OFFERS]; // ∆∞u ti√™n json + fallback
      }
      return BASE_OFFERS;
    }catch{ return BASE_OFFERS; }
  }

  // 4) Bandit Œµ‚Äëgreedy + UCB (+ decay theo ng√†y)
  function pickOffer(OFFERS, region){
    const s=load(); s.stats=s.stats||{}; s.totalViews=s.totalViews||0;
    if(s.lastDecay!==today()){
      for(const k in s.stats){ s.stats[k].views=(s.stats[k].views||0)*0.95; s.stats[k].clicks=(s.stats[k].clicks||0)*0.95; }
      s.lastDecay=today(); save(s);
    }
    const pool=OFFERS.filter(o=>o.regions.includes(region));
    if(!pool.length) return OFFERS[0];
    const eps=0.12;
    if(Math.random()<eps) return pool[Math.floor(Math.random()*pool.length)];
    let best=pool[0],score=-1;
    for(const o of pool){
      const st=s.stats[o.id]||{};
      const ctr=(st.clicks||0)/Math.max(1,(st.views||0));
      const ucb=ctr + Math.sqrt(2*Math.log(1+(s.totalViews||1))/Math.max(1,(st.views||0)));
      if(ucb>score){score=ucb;best=o;}
    }
    return best;
  }
  function markView(id){ const s=load(); s.stats=s.stats||{}; s.stats[id]=s.stats[id]||{views:0,clicks:0}; s.stats[id].views++; s.totalViews=(s.totalViews||0)+1; save(s); renderKPI(); }
  function markClick(id){ const s=load(); s.stats=s.stats||{}; s.stats[id]=s.stats[id]||{views:0,clicks:0}; s.stats[id].clicks++; save(s); renderKPI(); }
  function renderKPI(){ const s=load(); const st=s.stats||{}; let v=0,c=0; Object.values(st).forEach(x=>{v+=x.views||0;c+=x.clicks||0}); $('#kpiViews').textContent=Math.round(v); $('#kpiClicks').textContent=Math.round(c); $('#kpiCTR').textContent= (v?((c/v)*100).toFixed(1):'0.0')+'%'; }

  // 5) G·ª£i √Ω v√πng & g·∫Øn n√∫t chuy·ªÉn v√πng
  function getRegion(){ return localStorage.getItem('ab_region') || (isVN() ? 'VN' : 'GLOBAL'); }
  function bindRegionButtons(){
    document.querySelectorAll('button[data-region]').forEach(b=>{
      b.onclick=()=>{ localStorage.setItem('ab_region', b.dataset.region); location.reload(); }
    });
    $('#tagRegion').textContent = 'Region: ' + getRegion();
  }

  // 6) Render offer xoay
  async function renderOfferBox(){
    const region=getRegion();
    const OFFERS=await loadOffers();
    const pick=pickOffer(OFFERS,region);
    const box=$('#offerBox');
    box.innerHTML=`
      <a class="btn" id="offerLink" href="${pick.url}" target="_blank" rel="noopener">üî• ${pick.title}</a>
      <a class="btn" target="_blank" rel="noopener" href="https://www.binance.com/referral/earn-together/refer-in-hotsummer/claim?hl=vi&ref=GRO_20338_9V44N">üöÄ Binance</a>
      <a class="btn" target="_blank" rel="noopener" href="https://algosone.page.link/MbtR">üåê AlgosOne</a>
    `;
    $('#offerLink').addEventListener('click',()=>markClick(pick.id));
    markView(pick.id);
  }

  // 7) Thanh to√°n: n√∫t & QR
  function setupPayments(){
    // USDT copy
    $('#copyUSDT').onclick = async () => {
      await navigator.clipboard.writeText(PAYMENT.usdt.addr);
      alert('ƒê√£ copy ƒë·ªãa ch·ªâ USDT (ERC20).');
    };
    // PayPal links
    const id = PAYMENT.paypal.email.split('@')[0];
    $('#btnPayPal').href = `https://www.paypal.com/paypalme/${encodeURIComponent(id)}`;
    $('#btnPayPal2').href = `https://www.paypal.com/paypalme/${encodeURIComponent(id)}`;
    // VietQR
    const qr = `https://img.vietqr.io/image/VCB-${encodeURIComponent(PAYMENT.bank.account)}-compact.png?addInfo=LightUnfold&accountName=${encodeURIComponent(PAYMENT.bank.name)}`;
    $('#vietqr').src = qr;
  }

  // 8) Status ENS (nh·∫π)
  (async ()=>{
    try{
      const r=await fetch('https://lightunfold.eth.limo/',{method:'HEAD',cache:'no-store'});
      if(!r.ok) console.log('eth.limo ch·∫≠m, fallback d√πng github pages.');
    }catch{ /* im l·∫∑ng */ }
  })();

  // 9) Kh·ªüi ƒë·ªông
  (async function start(){
    setupPayments();
    bindRegionButtons();
    renderKPI();
    renderOfferBox();
  })();
  </script>
</body>
</html>
