<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>UltraMaster Vâˆ â€¢ Wealthverse Ultimate</title>
<meta name="description" content="Web3 tá»± váº­n hÃ nh â€¢ AI Agents 24/7 â€¢ CÆ¡ há»™i on-chain â€¢ QR thanh toÃ¡n 1 cháº¡m â€¢ Viral share.">
<meta name="theme-color" content="#0b0f13">
<style>
:root{
  --bg:#0b0f13;--card:#0f141a;--line:#233041;--txt:#e9eef4;--mut:#a9b8c8;
  --gold:#ffd700;--green:#16a34a;--purple:#6d28d9;--danger:#ff4d4f;
  --pill:#0f1725;--btn:#ffd700;--btnTxt:#0b0f13;--ring:rgba(255,215,0,.25);
  --shadow:0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02) inset;
}
:root.light{
  --bg:#f6f9fc;--card:#ffffff;--line:#e2e8f0;--txt:#0b1020;--mut:#4a5568;
  --gold:#d4af37;--green:#0f7a2a;--purple:#5b21b6;--danger:#e11d48;
  --pill:#eef2f7;--btn:#d4af37;--btnTxt:#121212;--ring:rgba(212,175,55,.25);
  --shadow:0 10px 24px rgba(0,0,0,.08);
}
*{box-sizing:border-box}html,body{height:100%}
body{margin:0;background:
  radial-gradient(60% 140% at 50% -10%, rgba(109,40,217,.25),transparent 60%),
  linear-gradient(180deg, rgba(22,163,74,.12),transparent 40%),
  var(--bg);
color:var(--txt);font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto}
.wrap{max-width:1200px;margin:0 auto;padding:20px}
.card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;box-shadow:var(--shadow);margin:12px 0;transition:.25s}
.card:hover{transform:translateY(-2px)}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.pill{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border:1px solid var(--line);border-radius:999px;background:var(--pill);color:var(--txt)}
.btn{display:inline-flex;align-items:center;gap:8px;border:0;border-radius:12px;padding:12px 16px;font-weight:700;background:var(--btn);color:var(--btnTxt);cursor:pointer;box-shadow:0 0 0 0 var(--ring);transition:.2s}
.btn:hover{transform:translateY(-1px);box-shadow:0 0 0 6px var(--ring)}
.btn.out{background:transparent;color:var(--txt);border:1px solid var(--line)}
.logo-dot{width:12px;height:12px;border-radius:50%;background:var(--gold);box-shadow:0 0 0 0 rgba(255,215,0,.7);animation:glow 1.8s infinite}
@keyframes glow{0%{box-shadow:0 0 0 0 rgba(255,215,0,.7)}70%{box-shadow:0 0 0 14px rgba(255,215,0,0)}100%{box-shadow:0 0 0 0 rgba(255,215,0,0)}}
.hero{position:relative;overflow:hidden}

/* === 3D Earth area (canvas giá»¯ nguyÃªn ID cÅ©) === */
.globe{width:300px;height:300px;border-radius:50%;display:block;margin:auto;box-shadow:
  inset 12px 0 40px rgba(0,0,0,.35), inset -12px 0 40px rgba(0,0,0,.25), 0 10px 30px rgba(0,0,0,.35)}
.globe-cap{color:var(--mut);text-align:center;margin-top:8px}

/* KPI & misc */
.kpi{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.kbox{background:linear-gradient(180deg, rgba(255,215,0,.12), transparent 60%),var(--card);border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center}
.now{font-size:22px;font-weight:800;color:var(--gold)}
.tag{display:inline-block;border:1px solid var(--line);border-radius:10px;padding:4px 10px;margin:4px 6px 0 0;color:var(--txt);opacity:.85;font-size:13px}
.badge{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(109,40,217,.12)}
.qr-wrap{display:grid;place-items:center;border:1px dashed var(--line);border-radius:14px;background:radial-gradient(120% 100% at 50% -30%, rgba(255,215,0,.12), transparent 60%),transparent}
.qr{width:180px;height:180px;border-radius:12px;background:#fff}
.paybtn{display:flex;justify-content:space-between;align-items:center;border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:transparent;cursor:pointer}
.paybtn.active{outline:2px solid var(--gold);box-shadow:0 0 0 6px var(--ring)}
.copy{font-size:13px;border:1px dashed var(--line);border-radius:8px;padding:4px 10px;background:transparent;color:var(--txt);cursor:pointer}
.footer{padding:32px 0;text-align:center;color:var(--mut)}
small.muted{color:var(--mut)}
/* Chat mini */
.chatfab{position:fixed;right:16px;bottom:16px;z-index:50}
.chatwin{position:fixed;right:16px;bottom:80px;width:min(420px,95vw);max-height:75vh;display:none;flex-direction:column;background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;z-index:49;box-shadow:var(--shadow)}
.chathead{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid var(--line)}
.chatbody{padding:12px;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{max-width:85%;padding:10px 14px;border:1px solid var(--line);border-radius:12px}
.bubble.me{align-self:flex-end;background:#102235}
.bubble.ai{align-self:flex-start;background:#101a11}
.chatinput{display:flex;gap:8px;padding:12px;border-top:1px solid var(--line)}
.chatinput input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--line);background:transparent;color:var(--txt)}
.hidden{display:none}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
@media(max-width:900px){.header-flex{display:grid;gap:16px}}

/* Partners contrast (light) */
.partner-card{background:#1a1400;border-color:#6b4e00}
.partner-card .btn{background:#ffb000;color:#1a1300}
:root.light .partner-card{background:#fffbe6 !important;border-color:#f2d38a !important;color:#1a1300}
:root.light .partner-card .muted{color:#3a2e00}
:root.light .partner-card .btn{background:#ffc83d;color:#1a1300;border:0}
</style>
<!-- keep your existing libs -->
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script src="https://unpkg.com/ipfs-http-client/dist/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@selfchain/sdk@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
<script src="https://unpkg.com/arweave@latest/bundles/web.bundle.min.js"></script>
</head>
<body>
<div class="wrap">

  <!-- Top Pills -->
  <div class="row">
    <span class="pill logo-hero"><span class="logo-dot"></span><b id="t_brand">UltraMaster Vâˆ</b></span>
    <span class="pill">ENS: <b id="ens">wealthverse.eth</b></span>
    <span class="pill"><span id="hbLbl">Heartbeat</span>: <b id="hb">â€”</b></span>
    <button class="pill" id="openData">Data</button>
    <button class="pill" id="lang">VI/EN</button>
    <button class="pill" id="theme">ğŸŒ— Theme</button>
  </div>

  <!-- Hero -->
  <section class="card hero accent-veil">
    <div class="header-flex">
      <div>
        <h1 id="brand">LightUnfold â€¢ UltraMaster Vâˆ Ultimate</h1>
        <div class="muted" id="tagline">Web3 SiÃªu Tá»± Váº­n HÃ nh â€“ AI Agents 24/7 â€¢ Má»Ÿ KhÃ³a Top 3 On-Chain â€¢ Token Chá»n Lá»c Realtime</div>
        <div class="card accent-veil" style="margin-top:12px">
          <b class="h-accent" id="moto">â€œBiáº¿t Sá»›m â€“ Quyáº¿t Äá»‹nh Sá»›m â€“ TÃ i Lá»™c Sá»›m.â€</b><br>
          <span id="motoDesc">Há»™i tá»¥: <b>KhÃ³a há»c tinh gá»n</b>, <b>PhÃ¢n tÃ­ch crypto realtime</b>, <b>AI há»i Ä‘Ã¡p</b>, <b>CÆ¡ há»™i sá»›m nháº¥t</b>.</span>
        </div>
        <div class="hero-cta" style="margin-top:12px" id="belowGlobe">
          <!-- giá»¯ nguyÃªn link -->
          <a class="btn out" id="cta_binance" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">Má»Ÿ Binance Miá»…n PhÃ­ â†—</a>
          <a class="btn out" id="cta_algos" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">Má»Ÿ AlgosOne Miá»…n PhÃ­ â†—</a>
        </div>
      </div>

      <!-- GL0BE: Ä‘á»•i DIV -> CANVAS, giá»¯ nguyÃªn id -->
      <div class="globe-wrap">
        <canvas id="globeCanvas" class="globe" width="300" height="300"></canvas>
        <div class="muted" id="globeCap">TrÃ¡i Äáº¥t On-Chain Â· Máº·t TrÄƒng Bay Ngang Â· Radar 24/7</div>
      </div>
    </div>
  </section>

  <!-- KPI -->
  <div class="kpi">
    <div class="kbox accent-veil"><div class="muted" id="k1t">CÆ¡ Há»™i</div><div class="now" id="kOpps">0</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k2t">Cáº­p Nháº­t</div><div class="now" id="kUpd">â€”</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k3t">Äang Xem</div><div class="now" id="kLive">â€”</div></div>
    <div class="kbox accent-veil"><div class="muted" id="k4t">Doanh Thu</div><div class="now">$<span id="kRev">0</span></div></div>
  </div>

  <!-- Top 3 Tokens -->
  <section class="card accent-veil" id="secTop3">
    <h3 style="margin:0 0 10px" id="hTop3">â­ Top 3 Token Tiá»m NÄƒng Nháº¥t HÃ´m Nay (AI Agents PhÃ¢n TÃ­ch)</h3>
    <div id="tokenPro" class="grid"></div>
  </section>

  <!-- Token Free -->
  <section class="card accent-veil" id="secFree">
    <h3 style="margin:0 0 10px" id="hFree">ğŸ“Š Token Chá»n Lá»c â€“ CÆ¡ Há»™i Tá»‘t (Miá»…n PhÃ­, Share Äá»ƒ Earn)</h3>
    <div id="tokenFree" class="grid"></div>
  </section>

  <!-- Há»c Viá»‡n -->
  <section class="card accent-veil" id="edu">
    <h3 style="margin:0 0 10px" id="hEdu">ğŸ“š Há»c Nhanh â€“ Hiá»ƒu SÃ¢u â€“ Thá»±c Chiáº¿n (NFT Rewards)</h3>
    <div class="grid" id="ebooks"></div>
  </section>

  <!-- CÆ¡ Há»™i Ná»•i Báº­t -->
  <section class="card accent-veil" id="secOpp">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0" id="hOpp">ğŸ”¥ CÆ¡ Há»™i Ná»•i Báº­t (Multi-Chain)</h3>
      <div class="row"><span class="badge" id="scanMode">QuÃ©t: On-Chain</span><button class="btn out" id="refreshNow">â†» <span id="btnRefresh">LÃ m Má»›i</span></button></div>
    </div>
    <div class="marquee" style="margin:6px 0 10px;color:#bcd"><div id="ticker">â€”</div></div>
    <div id="opps" class="list"></div>
  </section>

  <!-- Premium Plans -->
  <section class="card accent-veil" id="secPremium">
    <h3 style="margin:0 0 10px" id="hPlan">ğŸ’  Premium â€“ Má»Ÿ KhÃ³a PhÃ¢n TÃ­ch ChuyÃªn SÃ¢u & Lá»™ TrÃ¬nh (Gasless)</h3>
    <div id="plans" class="grid"></div>
  </section>

  <!-- SuperGate (giá»¯ nguyÃªn cáº¥u trÃºc & unlock) -->
  <section class="card accent-veil" id="supergate">
    <h3 style="margin:0 0 10px" id="hGate">ğŸ”“ SuperGate (Unlock On-Chain)</h3>
    <div class="paygrid">
      <div class="card accent-veil">
        <div class="qrbox">
          <div class="qr-wrap"><img id="qr" class="qr" alt="QR" src="" loading="lazy"></div>
          <div style="flex:1;min-width:0" id="payArea">
            <div class="muted" id="gatePitch"><b>Thanh ToÃ¡n Nhá» Äá»ƒ Nháº­n MÃ£ Má»Ÿ KhÃ³a Ngay (Multi-Chain).</b></div>
            <div class="muted"><span id="addrLbl">Äá»‹a Chá»‰/ID:</span> <span class="mono" id="payAddr">â€”</span></div>
            <div class="paylist" id="payList"></div>
          </div>
        </div>
      </div>
      <div class="card accent-veil">
        <div class="grid" style="grid-template-columns:1fr">
          <div><label class="muted" id="bundleLbl">Chá»n GÃ³i</label><select id="bundleSel"></select></div>
          <div><label class="muted" id="codeLbl">Nháº­p MÃ£ Má»Ÿ KhÃ³a (Sau Thanh ToÃ¡n)</label><input id="unlockCode" placeholder="Nháº­p mÃ£â€¦"></div>
          <div><input id="txhash" placeholder="(Tuá»³ Chá»n) DÃ¡n TX Hash / Ghi ChÃº"></div>
          <div class="row"><button class="btn" id="doUnlock">Má»Ÿ KhÃ³a</button><button class="btn out" id="remember">Nhá»› MÃ£</button></div>
          <div id="uMsg" class="muted"></div>
          <div class="muted" style="margin-top:8px" id="afterUnlockHint">Sau Má»Ÿ KhÃ³a, Ná»™i Dung Premium Xuáº¥t Hiá»‡n. MÃ£ Nhá»› TrÃªn Thiáº¿t Bá»‹.</div>
        </div>
      </div>
    </div>
    <div id="opened" class="hidden" style="margin-top:14px">
      <div class="row"><span class="pill" style="background:#11291a;border-color:#20452f;color:#bff5d0" id="unlockedLbl">âœ” ÄÃ£ Má»Ÿ KhÃ³a</span><button class="btn out" id="relock">KhoÃ¡ Láº¡i</button></div>
      <div id="premium" class="grid" style="margin-top:12px"></div>
    </div>
  </section>

  <!-- Partners (khÃ´ng Ä‘á»•i link) -->
  <section class="card accent-veil" id="secAlgos">
    <h3 style="margin:0 0 10px">ğŸ¤ <span id="algosTitle">AlgosOne</span></h3>
    <div class="shop-card partner-card">
      <h4 id="algosH">AlgosOne â€“ Chiáº¿n LÆ°á»£c AI & Cáº£nh BÃ¡o Realtime</h4>
      <div class="muted" id="algosD">Copyâ€‘trading cÃ³ rá»§i ro. HÃ£y kiá»ƒm tra quy Ä‘á»‹nh & kháº©u vá»‹ rá»§i ro trÆ°á»›c khi dÃ¹ng.</div>
      <a class="btn" id="algosC" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">Má»Ÿ Miá»…n PhÃ­ â†—</a>
    </div>
  </section>

  <section class="card accent-veil" id="secBNB">
    <h3 style="margin:0 0 10px">ğŸ¤ <span id="bnBT">BNB</span></h3>
    <div class="shop-card partner-card">
      <h4 id="bnBH">BNB â€“ Há»‡ Sinh ThÃ¡i Giao Dá»‹ch</h4>
      <div class="muted" id="bnBD">Khá»›p lá»‡nh nhanh, phÃ­ cáº¡nh tranh, sáº£n pháº©m Ä‘a dáº¡ng. Äiá»ƒm khá»Ÿi Ä‘áº§u an toÃ n cho chiáº¿n lÆ°á»£c.</div>
      <ul class="muted" id="bnBB" style="margin:10px 0 0 20px">
        <li>Thanh khoáº£n sÃ¢u â€¢ Há»— trá»£ nhiá»u cáº·p</li>
        <li>Báº£o máº­t nhiá»u lá»›p â€¢ 2FA</li>
        <li>Há»‡ sinh thÃ¡i: Earn, Launchpool</li>
      </ul>
      <a class="btn" id="bnBC" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">Má»Ÿ Miá»…n PhÃ­ â†—</a>
    </div>
  </section>

  <!-- CTA cuá»‘i & share giá»¯ nguyÃªn -->
  <section class="card footer-cta accent-veil" id="lastCTA">
    <h3 style="margin:0 0 8px" id="ctaH">ğŸš€ CÆ¡ Há»™i Nhanh â€“ Chá»§ Äá»™ng ÄÃ³n Láº¥y</h3>
    <div id="ctaD">Má»Ÿ KhÃ³a Hoáº·c TÃ i Khoáº£n Miá»…n PhÃ­ HÃ´m Nay Äá»ƒ Theo DÃµi â€“ PhÃ¢n TÃ­ch â€“ HÃ nh Äá»™ng Má»™t NÆ¡i.</div>
    <div class="row" style="margin-top:10px">
      <a class="btn" href="#supergate" id="ctaOpen">Má»Ÿ KhÃ³a Ngay</a>
      <a class="btn out" id="ctaB" href="https://www.binance.com/vi/register?ref=GRO_20338_9V44N" target="_blank" rel="noopener">Má»Ÿ Binance Miá»…n PhÃ­ â†—</a>
      <a class="btn out" id="ctaA" href="https://algosone.page.link/MbtR" target="_blank" rel="noopener">Má»Ÿ AlgosOne Miá»…n PhÃ­ â†—</a>
      <button class="btn out" id="shareMine">Chia Sáº» LiÃªn Káº¿t Cá»§a TÃ´i</button>
    </div>
  </section>

  <button class="pill" id="goTop" style="position:fixed;left:16px;bottom:90px;z-index:10">â†‘ Top</button>
  <div class="footer">Â© <span id="year"></span> Wealthverse â€¢ <span id="autoLbl">Tá»± Váº­n HÃ nh 24/7</span></div>
</div>

<!-- Floating share giá»¯ nguyÃªn -->
<div class="sharebar" style="position:fixed;right:16px;bottom:16px;display:flex;gap:10px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px;z-index:10">
  <a id="sh_tg" target="_blank" title="Share Telegram">ğŸ“£</a>
  <a id="sh_x" target="_blank" title="Share X">ğ•</a>
  <a id="sh_fb" target="_blank" title="Share Facebook">f</a>
  <a id="sh_in" target="_blank" title="Share LinkedIn">in</a>
</div>

<!-- Chat giá»¯ nguyÃªn ID -->
<button class="btn chatfab" id="openChat">ğŸ§  Chat AI Autonomous 24/7</button>
<div class="chatwin" id="chat">
  <div class="chathead"><b id="chatH">AI TÃ i ChÃ­nh Autonomous 24/7</b><button class="btn out" id="closeChat">ÄÃ³ng</button></div>
  <div class="chatbody" id="chatBody"></div>
  <div style="padding:0 12px" id="chipBar"></div>
  <div class="chatinput">
    <input id="chatIn" placeholder="Há»i thá»‹ trÆ°á»ng, token, káº¿ hoáº¡ch lá»‡nhâ€¦">
    <button class="btn" id="chatSend">Gá»­i</button>
  </div>
</div>

<!-- Modal Data -->
<div id="dataModal" class="modal" style="position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;place-items:center;z-index:99">
  <div class="box" style="width:min(95vw,960px);height:min(85vh,760px);background:var(--card);border:1px solid var(--line);border-radius:16px;overflow:hidden;display:flex;flex-direction:column">
    <header><b id="mTitle">Dá»¯ Liá»‡u Premium On-Chain</b><button class="btn out" id="closeData">ÄÃ³ng</button></header>
    <pre id="dataPre" style="flex:1;margin:0;padding:14px;overflow:auto;background:#0b0f13;color:#cfe0ef"></pre>
  </div>
</div>

<script>
/* ===== Helpers giá»¯ nguyÃªn & i18n má»Ÿ rá»™ng ===== */
const $ = s => document.querySelector(s), $$ = s => document.querySelectorAll(s);
const fmt = n => Number(n || 0).toLocaleString(undefined, {maximumFractionDigits: 8});
const qrlink = t => `https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(t)}`;
async function j(url) { try { const r = await fetch(url, {cache: 'no-store'}); if (!r.ok) throw 0; return await r.json(); } catch (_) { return null; } }
$('#year').textContent = new Date().getFullYear();
$('#goTop').onclick = () => window.scrollTo({top: 0, behavior: 'smooth'});

/* giá»¯ nguyÃªn provider/key placeholder cá»§a báº¡n */
const web3 = new Web3(Web3.givenProvider || 'https://mainnet.infura.io/v3/YOUR_INFURA_KEY');
const ipfs = window.IpfsHttpClient({ host: 'ipfs.infura.io', port: 5001, protocol: 'https' });
const arweave = Arweave.init({ host: 'arweave.net', port: 443, protocol: 'https' });
const selfChain = new SelfChainSDK();

let points = localStorage.getItem('points') || 0, localVersion = '1.0', LAST_ITEMS = [], PREMIUM_DATA = { updated_at: new Date().toISOString(), alpha_feed: [], deals: [] };

/* ===== i18n A-Z: chá»‰ thay chá»¯, khÃ´ng Ä‘á»•i link/CFG ===== */
let LANG = (localStorage.getItem('lang') || navigator.language || 'vi').toLowerCase().startsWith('vi') ? 'vi' : 'en';
const I = {
 vi: {
   brand:"LightUnfold â€¢ UltraMaster Vâˆ Ultimate",
   tagline:"Web3 SiÃªu Tá»± Váº­n HÃ nh â€“ AI Agents 24/7 â€¢ Má»Ÿ KhÃ³a Top 3 Onâ€‘Chain â€¢ Token Chá»n Lá»c Realtime",
   moto:"â€œBiáº¿t Sá»›m â€“ Quyáº¿t Äá»‹nh Sá»›m â€“ TÃ i Lá»™c Sá»›m.â€",
   motoDesc:"Há»™i tá»¥: <b>KhÃ³a há»c tinh gá»n</b>, <b>PhÃ¢n tÃ­ch crypto realtime</b>, <b>AI há»i Ä‘Ã¡p</b>, <b>CÆ¡ há»™i sá»›m nháº¥t</b>.",
   globeCap:"TrÃ¡i Äáº¥t 3D Xanh Â· Máº·t TrÄƒng bay ngang Â· Radar 24/7",
   hb:"Nhá»‹p",
   k1t:"CÆ¡ Há»™i", k2t:"Cáº­p Nháº­t", k3t:"Äang Xem", k4t:"Doanh Thu",
   hTop3:"â­ Top 3 Token Tiá»m NÄƒng Nháº¥t HÃ´m Nay (AI Agents PhÃ¢n TÃ­ch)",
   hFree:"ğŸ“Š Token Chá»n Lá»c â€“ CÆ¡ Há»™i Tá»‘t (Miá»…n PhÃ­, Share Äá»ƒ Earn)",
   hEdu:"ğŸ“š Há»c Nhanh â€“ Hiá»ƒu SÃ¢u â€“ Thá»±c Chiáº¿n (NFT Rewards)",
   hOpp:"ğŸ”¥ CÆ¡ Há»™i Ná»•i Báº­t (Multiâ€‘Chain)", btnRefresh:"LÃ m Má»›i",
   hPlan:"ğŸ’  Premium â€“ Má»Ÿ KhÃ³a PhÃ¢n TÃ­ch ChuyÃªn SÃ¢u & Lá»™ TrÃ¬nh (Gasless)",
   hGate:"ğŸ”“ SuperGate (Unlock Onâ€‘Chain)",
   gatePitch:"<b>Thanh ToÃ¡n Nhá» Äá»ƒ Nháº­n MÃ£ Má»Ÿ KhÃ³a Ngay (Multiâ€‘Chain).</b>",
   addrLbl:"Äá»‹a Chá»‰/ID:", unlockedLbl:"âœ” ÄÃ£ Má»Ÿ KhÃ³a",
   ctaH:"ğŸš€ CÆ¡ Há»™i Nhanh â€“ Chá»§ Äá»™ng ÄÃ³n Láº¥y",
   ctaD:"Má»Ÿ khÃ³a hoáº·c tÃ i khoáº£n miá»…n phÃ­ Ä‘á»ƒ Theo dÃµi â€“ PhÃ¢n tÃ­ch â€“ HÃ nh Ä‘á»™ng má»™t nÆ¡i.",
   ctaOpen:"Má»Ÿ KhÃ³a Ngay"
 },
 en: {
   brand:"LightUnfold â€¢ UltraMaster Vâˆ Ultimate",
   tagline:"Autonomous Web3 â€“ AI Agents 24/7 â€¢ Unlock Todayâ€™s Top 3 Onâ€‘Chain â€¢ Curated Tokens in Realtime",
   moto:"â€œKnow Early â€“ Decide Early â€“ Prosper Early.â€",
   motoDesc:"Allâ€‘inâ€‘one: <b>Lean courses</b>, <b>Realtime crypto analysis</b>, <b>AI Q&A</b>, <b>Earliest opportunities</b>.",
   globeCap:"3D Blue Earth Â· Moon flyâ€‘by Â· 24/7 Radar",
   hb:"Heartbeat",
   k1t:"Opportunities", k2t:"Updates", k3t:"Live Views", k4t:"Revenue",
   hTop3:"â­ Top 3 Tokens Today (AIâ€‘Scored)",
   hFree:"ğŸ“Š Curated Tokens â€“ Free (Share to Earn)",
   hEdu:"ğŸ“š Learn Fast â€“ Practice Deep (NFT Rewards)",
   hOpp:"ğŸ”¥ Featured Opportunities (Multiâ€‘Chain)", btnRefresh:"Refresh",
   hPlan:"ğŸ’  Premium â€“ Deep Analytics & Playbooks (Gasless)",
   hGate:"ğŸ”“ SuperGate (Unlock Onâ€‘Chain)",
   gatePitch:"<b>Make a small payment to get your unlock code (Multiâ€‘Chain).</b>",
   addrLbl:"Address/ID:", unlockedLbl:"âœ” Unlocked",
   ctaH:"ğŸš€ Move First â€“ Capture Upside",
   ctaD:"Unlock or open a free account to Track â€“ Analyze â€“ Act in one place.",
   ctaOpen:"Unlock Now"
 }
};
function applyI18N(){
  const t = I[LANG];
  $('#brand').textContent = t.brand;
  $('#tagline').innerHTML = t.tagline;
  $('#moto').textContent = t.moto;
  $('#motoDesc').innerHTML = t.motoDesc;
  $('#globeCap').textContent = t.globeCap;
  $('#hbLbl').textContent = t.hb;
  $('#k1t').textContent = t.k1t; $('#k2t').textContent = t.k2t; $('#k3t').textContent = t.k3t; $('#k4t').textContent = t.k4t;
  $('#hTop3').textContent = t.hTop3; $('#hFree').textContent = t.hFree; $('#hEdu').textContent = t.hEdu; $('#hOpp').textContent = t.hOpp;
  $('#btnRefresh').textContent = t.btnRefresh; $('#hPlan').textContent = t.hPlan; $('#hGate').textContent = t.hGate;
  $('#gatePitch').innerHTML = t.gatePitch; $('#addrLbl').textContent = t.addrLbl; $('#unlockedLbl').textContent = t.unlockedLbl;
  $('#ctaH').textContent = t.ctaH; $('#ctaD').textContent = t.ctaD; $('#ctaOpen').textContent = t.ctaOpen;
  $('#autoLbl').textContent = (LANG==='vi'?'Tá»± Váº­n HÃ nh 24/7':'Alwaysâ€‘On 24/7');
  localStorage.setItem('lang', LANG);
}
$('#lang')?.addEventListener('click', () => { LANG = LANG === 'vi' ? 'en' : 'vi'; applyI18N(); });
applyI18N();
$('#theme')?.addEventListener('click', () => { const m = document.documentElement.classList.toggle('light') ? 'light' : 'dark'; localStorage.setItem('theme', m); });

/* ===== Share giá»¯ nguyÃªn ===== */
const U = new URL(location.href);
const refIn = U.searchParams.get('ref');
const peer = localStorage.getItem('peer_id') || Math.random().toString(36).slice(2);
localStorage.setItem('peer_id', peer);
if (refIn) localStorage.setItem('ref_by', refIn);
const base = location.origin + location.pathname;
const myRef = `${base}?ref=${peer}&utm_source=share&utm_medium=viral&utm_campaign=ultramaster`;
const t_enc = encodeURIComponent(document.title), u_enc = encodeURIComponent(myRef);
$('#sh_tg').href = `https://t.me/share/url?url=${u_enc}&text=${t_enc}`;
$('#sh_x').href = `https://twitter.com/intent/tweet?text=${t_enc}&url=${u_enc}`;
$('#sh_fb').href = `https://www.facebook.com/sharer/sharer.php?u=${u_enc}`;
$('#sh_in').href = `https://www.linkedin.com/sharing/share-offsite/?url=${u_enc}`;
$('#shareMine').onclick = async () => { try { if (navigator.share) { await navigator.share({title: document.title, text: 'KhÃ¡m PhÃ¡ UltraMaster', url: myRef}); } else { await navigator.clipboard.writeText(myRef); alert(LANG === 'vi' ? 'ÄÃ£ Sao ChÃ©p LiÃªn Káº¿t!' : 'Referral Link Copied!'); } } catch (_) {} };

/* ===== Heartbeat/KPI nhá» ===== */
function beat(){ $('#hb').textContent = new Date().toLocaleTimeString(); $('#kUpd').textContent = new Date().toLocaleString(); }
setInterval(beat, 1000); beat();

/* ===== LÆ°u doanh thu (khÃ´ng Ä‘á»•i logic) ===== */
const revEl = $('#kRev'); function addRev(x){ const cur=Number(localStorage.getItem('rev')||'0'); const next=Math.max(0,cur+Number(x||0)); localStorage.setItem('rev',next); if(revEl) revEl.textContent = next.toLocaleString(); }
if (revEl) revEl.textContent = (Number(localStorage.getItem('rev') || '0')).toLocaleString();

/* ===== 3D Earth (mÃ u xanh) + Moon fly-by + Ã¡nh sÃ¡ng quÃ©t qua ===== */
(function earth3D(){
  const c = document.getElementById('globeCanvas');
  try{
    const renderer = new THREE.WebGLRenderer({ canvas:c, antialias:true, alpha:true });
    const DPR = Math.min(window.devicePixelRatio||1, 2);
    const W = c.clientWidth || 300, H = c.clientHeight || 300;
    renderer.setPixelRatio(DPR); renderer.setSize(W, H, false);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, W/H, 0.1, 100); camera.position.z = 6;

    const ambient = new THREE.AmbientLight(0xffffff, 0.55); scene.add(ambient);
    const sun = new THREE.DirectionalLight(0xffffff, 0.9); sun.position.set(6,3,4); scene.add(sun);

    const loader = new THREE.TextureLoader();
    const earthMap = loader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg');
    const normal   = loader.load('https://threejs.org/examples/textures/planets/earth_normal_2048.jpg');
    const specular = loader.load('https://threejs.org/examples/textures/planets/earth_specular_2048.jpg');
    const cloudsTx = loader.load('https://threejs.org/examples/textures/planets/earth_clouds_1024.png');
    const moonMap  = loader.load('https://threejs.org/examples/textures/planets/moon_1024.jpg');

    const earth = new THREE.Mesh(
      new THREE.SphereGeometry(2.4, 64, 64),
      new THREE.MeshPhongMaterial({ map: earthMap, bumpMap: normal, bumpScale:0.04, specularMap: specular, specular: new THREE.Color('rgb(80,80,80)') })
    );
    scene.add(earth);

    const clouds = new THREE.Mesh(
      new THREE.SphereGeometry(2.46, 64, 64),
      new THREE.MeshLambertMaterial({ map: cloudsTx, transparent:true, opacity:0.42 })
    );
    scene.add(clouds);

    // Moon + moonlight sweeping the Earth
    const moon = new THREE.Mesh(new THREE.SphereGeometry(0.65, 32, 32), new THREE.MeshStandardMaterial({ map: moonMap, roughness:1, metalness:0 }));
    const moonLight = new THREE.PointLight(0xbfd4ff, 1.2, 18); // hÆ¡i xanh nhÆ° Ã¡nh trÄƒng
    const moonGroup = new THREE.Group(); moonGroup.add(moon); moonGroup.add(moonLight);
    scene.add(moonGroup);

    let t = 0;
    function animate(){
      requestAnimationFrame(animate);
      earth.rotation.y += 0.0026;
      clouds.rotation.y += 0.0032;
      // quá»¹ Ä‘áº¡o máº·t trÄƒng
      t += 0.0022;
      const r = 5.2;
      moonGroup.position.set(Math.cos(t)*r, Math.sin(t*1.1)*0.8, Math.sin(t)*r*0.4);
      moon.position.set(0,0,0);
      moonLight.position.copy(moon.position);
      renderer.render(scene, camera);
    }
    animate();
    window.addEventListener('resize', () => {
      const w=c.clientWidth||300, h=c.clientHeight||300;
      renderer.setSize(w,h,false); camera.aspect=w/h; camera.updateProjectionMatrix();
    });
  }catch(e){
    // Fallback: giá»¯ ná»n gradient, khÃ´ng crash
    console.warn('WebGL unavailable, fallback to static globe.');
  }
})();

/* ===== Giá»¯ nguyÃªn unlock/paywall (khÃ´ng Ä‘á»•i vÃ­/link/CFG) ===== */
// Payments & Paywall váº«n theo CFG cá»§a báº¡n:
const pays = (window.CFG && CFG.site && CFG.site.payments && CFG.site.payments.chains) || []; // giá»¯ nguyÃªn
function buildPayList(){} // placeholder giá»¯ nguyÃªn hook cÅ© náº¿u báº¡n dÃ¹ng
function selPay(){} function copyAddr(){} // giá»¯ API bá» máº·t
const SECRET = String((window.CFG && CFG.secrets && CFG.secrets.unlock_code) || '23061988');
function gate(open) { $('#opened').classList.toggle('hidden', !open); }

/* ===== Chat giá»¯ nguyÃªn hÃ nh vi ===== */
function addBubble(txt, who='ai'){ const b=document.createElement('div'); b.className='bubble '+(who==='me'?'me':'ai'); b.textContent=txt; $('#chatBody').appendChild(b); $('#chatBody').scrollTop = $('#chatBody').scrollHeight; }
function smartReply(q){ return LANG==='vi' ? 'Máº¹o: XÃ¡c Ä‘á»‹nh vÃ¹ng quan sÃ¡t, má»©c vÃ´ hiá»‡u hÃ³a, R:R â‰¥ 2:1, rá»§i ro â‰¤1%.' : 'Tip: Define watch zone, invalidation, R:R â‰¥ 2:1, risk â‰¤1%.'; }
async function callSuperAI(query){ /* giá»¯ nguyÃªn placeholder cá»§a báº¡n */ return smartReply(query); }
function chatInit(){ if(!$('#chatBody').dataset.hi){ addBubble(LANG==='vi'?'ChÃ o! TÃ´i lÃ  AI há»— trá»£ phÃ¢n tÃ­ch.':'Hi! I\'m your analysis helper.'); $('#chatBody').dataset.hi=1; } }
chatInit();
$('#openChat').onclick = () => { $('#chat').style.display = 'flex'; chatInit(); };
$('#closeChat').onclick = () => { $('#chat').style.display = 'none'; };
$('#chatSend').onclick = async () => { const v = $('#chatIn').value.trim(); if(!v) return; addBubble(v, 'me'); $('#chatIn').value = ''; try { const reply = await callSuperAI(v); addBubble(reply, 'ai'); } catch (_) { addBubble(smartReply(v), 'ai'); } };

/* ===== Modal Data giá»¯ nguyÃªn ===== */
function openDataModal(){ $('#dataPre').textContent = JSON.stringify(PREMIUM_DATA, null, 2); $('#dataModal').style.display = 'grid'; }
$('#openData').addEventListener('click', openDataModal);
$('#closeData').addEventListener('click', () => $('#dataModal').style.display = 'none');
$('#dataModal').addEventListener('click', e => { if (e.target.id === 'dataModal') $('#dataModal').style.display = 'none'; });
document.addEventListener('keydown', e => { if (e.key === 'Escape') $('#dataModal').style.display = 'none'; });

/* ===== Nhá»‹p tá»± váº­n hÃ nh khÃ¡c giá»¯ nguyÃªn (náº¿u cáº§n báº¡n gáº¯n láº¡i tick3/fetchLive cÅ©) ===== */
</script>
</body>
</html>
