<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>LightUnfold ‚Ä¢ HyperPrime Web3 AI</title>
<meta name="description" content="Web3 AI t·ª± ƒë·ªông 24/7: d·ªØ li·ªáu ƒëa ngu·ªìn, c∆° h·ªôi n·ªïi b·∫≠t, thanh to√°n QR, n·ªôi dung cao c·∫•p b·∫±ng m√£ m·ªü kh√≥a, si√™u lan t·ªèa.">
<link rel="canonical" href="https://vuhuyphat.github.io/">
<meta property="og:title" content="LightUnfold ‚Ä¢ HyperPrime Web3 AI">
<meta property="og:description" content="N·ªÅn t·∫£ng Web3 AI X1000 t·ª± v·∫≠n h√†nh 24/7, qu√©t th·ªã tr∆∞·ªùng, hi·ªÉn th·ªã c∆° h·ªôi, b√°n g√≥i b√°o c√°o, affiliate to√†n c·∫ßu.">
<meta property="og:type" content="website">
<meta name="theme-color" content="#0b0f13">
<style>
:root{
  --bg:#0b0f13;--card:#0f141a;--line:#1c2534;--txt:#e9eef4;--mut:#98a6b3;--brand:#7dc1ff;--accent:#ffb000;
  --good:#20c997;--bad:#ff4d4f;--pill:#111824;--glow:0 0 0 1px var(--line), 0 10px 30px rgba(0,0,0,.35)
}
*{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--txt);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial}
a{color:var(--brand);text-decoration:none}
.wrap{max-width:1100px;margin:0 auto;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--pill);color:var(--mut)}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;margin-top:14px;box-shadow:var(--glow)}
h1{margin:8px 0 6px;font-size:28px}h3{margin:0 0 8px}
.muted{color:var(--mut)}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.btn{display:inline-flex;gap:8px;align-items:center;background:var(--accent);color:#1a1300;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.out{background:transparent;border:1px solid var(--line);color:var(--txt)}
.badge{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--line);border-radius:999px;padding:4px 10px}
.kpi{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
.kpi .box{flex:1 1 160px;background:var(--pill);border:1px solid var(--line);border-radius:12px;padding:10px}
.now{font-size:22px;font-weight:800}
.list .item{display:flex;gap:10px;align-items:flex-start;padding:10px 0;border-top:1px dashed var(--line)}
.list .score{min-width:60px;text-align:center;border:1px solid var(--line);border-radius:8px;padding:4px 6px;color:#ffdca8;background:#241a00}
.tag{display:inline-block;border:1px solid var(--line);border-radius:8px;padding:2px 8px;margin:2px 4px 0 0;color:var(--mut);font-size:12px}
.pos{background:rgba(32,201,151,.15);color:var(--good);border-color:rgba(32,201,151,.4)}
.neg{background:rgba(255,77,79,.15);color:var(--bad);border-color:rgba(255,77,79,.4)}
.pay{display:flex;gap:14px}.pay img{width:160px;height:160px;border-radius:12px;border:1px solid var(--line);background:#000}
.pay .meta{flex:1;min-width:0}.mono{font-family:ui-monospace,SFMono-Regular,Consolas,monospace;word-break:break-all}
.section-title{display:flex;justify-content:space-between;align-items:center;gap:10px}
.tabbar{display:flex;gap:8px;flex-wrap:wrap}
.tabbar .tab{padding:6px 10px;border:1px solid var(--line);border-radius:999px;cursor:pointer}
.tabbar .tab.act{background:var(--accent);color:#1a1300;border:0}
.sharebar{position:fixed;right:12px;bottom:12px;display:flex;gap:8px;background:#10161d;border:1px solid #1c2836;border-radius:12px;padding:8px;z-index:9999}
.sharebar a{font-size:18px}
.appgrid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}
.appgrid a{display:block;padding:10px;border:1px solid var(--line);border-radius:12px;background:var(--pill);text-align:center}
.hr{height:1px;background:linear-gradient(90deg,transparent,#1c2534,transparent);margin:10px 0}
.marquee{white-space:nowrap;overflow:hidden}
.marquee>div{display:inline-block;animation:mar 25s linear infinite}
@keyframes mar{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.footer{padding:30px 0;text-align:center;color:var(--mut)}
.light{--bg:#f7fafc;--card:#ffffff;--line:#e2e8f0;--txt:#0b0f13;--mut:#4a5568;--brand:#2563eb;--pill:#f3f6fb;--glow:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="row">
    <span class="pill">ENS: <b id="ens">‚Äî</b></span>
    <span class="pill">Heartbeat: <b id="hb">‚Äî</b></span>
    <a class="pill" href="config.json" target="_blank">config</a>
    <a class="pill" href="data/latest.json" target="_blank">data</a>
    <span class="pill" id="langSwitch">VI/EN</span>
    <span class="pill" id="themeSwitch">üåó</span>
  </div>

  <h1 id="brand">LightUnfold ‚Ä¢ HyperPrime</h1>
  <div class="muted" id="tagline">‚Äî</div>

  <div class="kpi">
    <div class="box"><div class="muted">C∆° h·ªôi</div><div class="now" id="kOpps">0</div></div>
    <div class="box"><div class="muted">C·∫≠p nh·∫≠t</div><div class="now" id="kUpd">‚Äî</div></div>
    <div class="box"><div class="muted">Ng√¥n ng·ªØ</div><div class="now" id="kLoc">vi/en</div></div>
  </div>

  <!-- Ticker -->
  <div class="card">
    <div class="marquee"><div id="ticker">‚Äî</div></div>
  </div>

  <!-- Opportunities -->
  <div class="card">
    <div class="section-title">
      <h3>üî• C∆° h·ªôi n·ªïi b·∫≠t</h3>
      <div class="row">
        <span class="badge" id="scanMode">qu√©t: data</span>
        <button class="btn out" id="refreshNow">‚Üª L√†m m·ªõi</button>
      </div>
    </div>
    <div id="opps" class="list"></div>
  </div>

  <!-- Payments -->
  <div class="card">
    <h3 style="margin:0 0 8px">üí≥ Thanh to√°n</h3>
    <div id="pays" class="grid"></div>
    <div class="muted" style="margin-top:6px">Qu√©t QR / click ƒë·ªÉ thanh to√°n. T·ªëi thi·ªÉu: <span id="mins"></span>. Li√™n h·ªá <span id="contact"></span>.</div>
  </div>

  <!-- Paywall -->
  <div class="card">
    <h3 style="margin:0 0 8px">üîì N·ªôi dung cao c·∫•p</h3>
    <div class="grid">
      <div>
        <input id="unlockCode" class="mono" placeholder="Nh·∫≠p m√£ m·ªü kh√≥a‚Ä¶"
               style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:var(--pill);color:var(--txt)">
        <div style="height:8px"></div>
        <input id="txHash" class="mono" placeholder="(Tu·ª≥ ch·ªçn) D√°n TX hash/b·∫±ng ch·ª©ng"
               style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:var(--pill);color:var(--txt)">
        <div class="row" style="margin-top:8px">
          <button class="btn" id="btnUnlock">M·ªü kh√≥a</button>
          <button class="btn out" id="btnRemember">Nh·ªõ tr√™n thi·∫øt b·ªã</button>
          <button class="btn out" id="btnLock">Kho√°</button>
        </div>
        <div id="uMsg" class="muted" style="margin-top:6px"></div>
      </div>
      <div id="premium" class="grid"></div>
    </div>
  </div>

  <!-- Bundles / Store -->
  <div class="card">
    <div class="section-title">
      <h3>üß∞ G√≥i s·∫£n ph·∫©m / B√°o c√°o</h3>
      <div class="tabbar" id="timeTabs">
        <div class="tab act" data-t="day">Ng√†y</div>
        <div class="tab" data-t="month">Th√°ng</div>
        <div class="tab" data-t="quarter">Qu√Ω</div>
        <div class="tab" data-t="year">NƒÉm</div>
      </div>
    </div>
    <div id="bundles" class="grid"></div>
  </div>

  <!-- Affiliate -->
  <div class="card">
    <h3 style="margin:0 0 8px">ü§ù Affiliate</h3>
    <div id="affs" class="grid"></div>
  </div>

  <!-- Command Center: link t·ªõi c√°c file c≈© -->
  <div class="card">
    <h3 style="margin:0 0 8px">üß≠ Command Center</h3>
    <div class="appgrid" id="apps"></div>
    <div class="hr"></div>
    <div class="muted">Hub n√†y t·ª± ph√°t hi·ªán & li√™n k·∫øt ƒë·∫øn c√°c c√¥ng c·ª• c≈© (dex, hyper_v2, pro, super_auto, super_share, xportal‚Ä¶).</div>
  </div>

  <div class="footer">¬© <span id="year"></span> LightUnfold ‚Ä¢ T·ª± ƒë·ªông 24/7 ‚Ä¢ HyperPrime</div>
</div>

<!-- Share floating -->
<div class="sharebar" id="sharebar">
  <a id="sh_tg" target="_blank">üì£</a>
  <a id="sh_x"  target="_blank">ùïè</a>
  <a id="sh_fb" target="_blank">f</a>
  <a id="sh_in" target="_blank">in</a>
</div>

<script>
/* ==================== I18N + THEME ==================== */
const T={vi:{pay_hint:"Qu√©t QR / click ƒë·ªÉ thanh to√°n. T·ªëi thi·ªÉu: {mins}. Li√™n h·ªá {contact}."},
         en:{pay_hint:"Scan/click to pay. Minimum: {mins}. Contact {contact}."}};
const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
let LANG=(localStorage.getItem("lang")||navigator.language||"vi").toLowerCase().startsWith("vi")?"vi":"en";
function setLang(l){LANG=l;localStorage.setItem("lang",l);$("#langSwitch").innerText=(l==="vi"?"VI/EN":"EN/VI");}
$("#langSwitch").onclick=()=>setLang(LANG==="vi"?"en":"vi");
function setTheme(m){document.documentElement.classList.toggle("light",m==="light");localStorage.setItem("theme",m);}
setTheme(localStorage.getItem("theme")||"dark");
$("#themeSwitch").onclick=()=>setTheme(document.documentElement.classList.contains("light")?"dark":"light");

/* ==================== UTIL ==================== */
const fmt=n=>Number(n||0).toLocaleString(undefined,{maximumFractionDigits:8});
const ago=iso=>{if(!iso) return "‚Äî"; const s=(Date.now()-new Date(iso))/1000|0; if(s<60) return s+"s"; const m=s/60|0;if(m<60) return m+"m"; const h=m/60|0; if(h<24) return h+"h"; return (h/24|0)+"d";}
const qrlink=t=>`https://api.qrserver.com/v1/create-qr-code/?size=320x320&data=${encodeURIComponent(t)}`;
async function j(url){try{const r=await fetch(url,{cache:"no-store"});if(!r.ok) throw 0;return await r.json()}catch(_){return null}}
function linkify(url,label){return url?`<a href="${url}" target="_blank">${label||url}</a>`:""}
function btnCopy(text,el){navigator.clipboard.writeText(text).then(()=>{el.textContent="‚úì ƒê√£ sao ch√©p";setTimeout(()=>el.textContent="Sao ch√©p",1200)})}

/* ==================== LOAD CONFIG + DATA ==================== */
const FALLBACK_CFG={
  site:{brand:"LightUnfold ‚Ä¢ Web3 AI X1000",ens:"lightunfold.eth",
    tagline:"20,000+ AI ‚Ä¢ 200+ qu·ªëc gia ‚Ä¢ 200+ ng√¥n ng·ªØ ‚Ä¢ t·ª± ƒë·ªông 24/7 ‚Ä¢ chuy·ªÉn ƒë·ªïi X1000",
    contact:{email:"vumumabada@gmail.com"},
    payments:{
      qr_auto:true,
      chains:[
        {name:"ETH (EVM)", address:"0x54E15A7b6d4213beE87800432A151d794638E3C2", explorer:"https://etherscan.io/address/0x54E15A7b6d4213beE87800432A151d794638E3C2", min:0.0005},
        {name:"USDT (ERC20)", address:"0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0", explorer:"https://etherscan.io/token/USDT?a=0x5da80d0f7e2df3cb0aa73d6a942bbe36b046b8f0", min:5}
      ],
      offchain:{momo:"0567892030",vietcombank:"9567892030",paypal:"vumumabada@gmail.com"}
    },
    affiliates:[
      {name:"Binance",url:"https://www.binance.com/vi/register?ref=GRO_20338_9V44N"},
      {name:"AlgosOne",url:"https://algosone.page.link/MbtR"},
      {name:"OKX",url:"https://www.okx.com/join/your-code"},
      {name:"Bybit",url:"https://www.bybit.com/invite?ref=your-code"},
    ]},
  schedule:{refresh_minutes:10},
  store:{bundles:[
      {title:"Alpha Signals X",price:99,desc:"T√≠n hi·ªáu ng·∫Øn h·∫°n x√°c su·∫•t cao.",tags:["Scalping","DeFi","Spot"]},
      {title:"ETF & BTC Flow",price:79,desc:"D√≤ng v·ªën ETF/BTC ‚Äì qu·ªπ & miner.",tags:["BTC","ETF","Flow"]},
      {title:"Altseason Radar",price:69,desc:"Chu k·ª≥ v·ªën h√≥a & leader/laggard.",tags:["Cycle","Momentum"]},
      {title:"Whale Watcher Pro",price:89,desc:"Theo d√µi v√≠ c√° voi & giao d·ªãch l·ªõn.",tags:["Onchain","Whales"]},
      {title:"Airdrop Hunter",price:59,desc:"L·ªãch farming & ƒëi·ªÉm t√≠ch l≈©y.",tags:["Quest","Points"]},
      {title:"Perp Heatmap",price:79,desc:"Funding, OI, liquidation map.",tags:["Futures","Heatmap"]},
      {title:"Narrative Scanner",price:49,desc:"Xu h∆∞·ªõng L2, AI, RWA, GameFi.",tags:["Narrative"]},
      {title:"Risk Guard",price:39,desc:"C·∫£nh b√°o r·ªßi ro smart-money & dev activity.",tags:["Risk","Safety"]},
      {title:"Tokenomics Lens",price:69,desc:"L·ªãch vesting & pha lo√£ng.",tags:["Vesting","FDV"]},
      {title:"Copy-Trade Radar",price:59,desc:"Theo d√µi trader m·∫´u & t√≠n hi·ªáu sao ch√©p.",tags:["Copy","Social"]},
    ],
    premium:[
      {title:"Alpha Feed Pro",desc:"D√≤ng tin alpha si√™u nhanh (ƒë·ªô tr·ªÖ ms).",bullets:["B·∫•t th∆∞·ªùng d√≤ng ti·ªÅn","Ngu·ªìn ƒëa k√™nh","B·ªô l·ªçc nhi·ªÖu"],link:"data/latest.json"},
      {title:"Deal Flow Private",desc:"T·ªïng h·ª£p deal/seed ƒëang m·ªü private.",bullets:["ƒêi·ªÅu ki·ªán","∆Øu ti√™n th·ªùi gian"]}
    ]
  },
  secrets:{unlock_code:"X1000VIP"}
};

let CFG=FALLBACK_CFG, LATEST=null;

async function boot(){
  const cfg = await j("config.json"); if(cfg) CFG=Object.assign({},FALLBACK_CFG,cfg);
  const latest = await j("data/latest.json"); LATEST=latest;

  // header
  $("#year").textContent=new Date().getFullYear();
  $("#brand").textContent=CFG.site?.brand||FALLBACK_CFG.site.brand;
  $("#tagline").textContent=CFG.site?.tagline||"";
  $("#ens").textContent=CFG.site?.ens||"‚Äî";
  $("#kLoc").textContent=(CFG.site?.locales||["vi","en"]).join("/");

  // contact + mins
  const mins=(()=>{const m={}; (CFG.site?.payments?.chains||[]).forEach(c=>{if(c.name.includes("ETH"))m.ETH=c.min||0.0005; if(c.name.includes("USDT"))m.USDT=c.min||5}); return m})();
  $("#mins").textContent = ["ETH ‚â• "+(mins.ETH||0.0005),"USDT ‚â• "+(mins.USDT||5)].join(", ");
  const contactStr = (CFG.site?.contact?.email||CFG.site?.contact||"").toString();
  $("#contact").innerHTML = linkify(`mailto:${contactStr}`,contactStr);

  // payments
  renderPays();

  // affiliates
  const affs=CFG.site?.affiliates||[];
  $("#affs").innerHTML=affs.map(a=>`<div class="card"><div class="section-title"><b>${a.name}</b><a class="btn out" target="_blank" href="${a.url}">M·ªü ‚Üó</a></div><div class="muted">${a.tag||"ƒê·ªëi t√°c"}</div></div>`).join("");

  // command center auto-discovery
  const names=["dex.html","hyper_v2.html","pro.html","super_auto.html","super_share.html","xpeotl.html","xportal.html"];
  $("#apps").innerHTML=names.map(n=>`<a href="${n}" target="_blank">${n.replace(".html","").replaceAll("_"," ").toUpperCase()}</a>`).join("");

  // paywall
  paintPremium();
  bindPaywall();

  // share links
  const u=encodeURIComponent(location.href), t=encodeURIComponent(document.title);
  $("#sh_tg").href = `https://t.me/share/url?url=${u}`;
  $("#sh_x").href  = `https://twitter.com/intent/tweet?text=${t}&url=${u}`;
  $("#sh_fb").href = `https://www.facebook.com/sharer/sharer.php?u=${u}`;
  $("#sh_in").href = `https://www.linkedin.com/sharing/share-offsite/?url=${u}`;

  // data
  await loadDataSmart();

  // auto refresh
  const every=Math.max(3, Number(CFG.schedule?.refresh_minutes||10));
  setInterval(loadDataSmart, every*60*1000);

  // PWA mini
  try{registerSW()}catch(_){}
}
boot();

/* ==================== RENDER PAYMENTS ==================== */
function renderPays(){
  const P=CFG.site?.payments||{};
  const chains=P.chains||[];
  const off=P.offchain||{};
  const items=[];
  chains.forEach(c=>{
    const isETH=/ETH/i.test(c.name), isUSDT=/USDT/i.test(c.name);
    const open = isETH ? "https://metamask.app.link/" : (isUSDT ? "https://metamask.app.link/" : "#");
    items.push(`
      <div class="card">
        <div class="pay">
          <img alt="QR" src="${qrlink(c.address)}" loading="lazy">
          <div class="meta">
            <div class="section-title"><b>${c.name}</b><a class="btn out" target="_blank" href="${open}">M·ªü v√≠/·ª©ng d·ª•ng ‚Üó</a></div>
            <div class="muted">ƒê/c nh·∫≠n: <span class="mono">${c.address}</span></div>
            ${c.explorer?`<div class="muted">Explorer: ${linkify(c.explorer,"Xem tr√™n chain ‚Üó")}</div>`:""}
            ${c.min?`<div class="muted">T·ªëi thi·ªÉu: ${c.min} ${isETH?"ETH":"USDT"}</div>`:""}
            <div class="row" style="margin-top:8px">
              <button class="btn" onclick="btnCopy('${c.address}',this)">Sao ch√©p</button>
              <a class="btn out" href="${qrlink(c.address)}" download>‚ö° T·∫£i QR</a>
            </div>
          </div>
        </div>
      </div>
    `);
  });
  if(off.momo) items.push(payBox("MoMo",off.momo,"V√≠ MoMo Vi·ªát Nam."));
  if(off.vietcombank) items.push(payBox("Vietcombank",off.vietcombank,"Chuy·ªÉn kho·∫£n VCB."));
  if(off.paypal) items.push(payBox("PayPal",off.paypal,`Thanh to√°n PayPal. ${linkify("https://www.paypal.me/"+off.paypal.split("@")[0],"M·ªü PayPal.me")}`));
  $("#pays").innerHTML=items.join("");
  function payBox(label,addr,hint){return `
    <div class="card"><div class="pay">
      <img alt="QR" src="${qrlink(addr)}" loading="lazy">
      <div class="meta">
        <div class="section-title"><b>${label}</b><span></span></div>
        <div class="muted">${hint||""}</div>
        <div class="mono">${addr}</div>
        <div class="row" style="margin-top:8px">
          <button class="btn" onclick="btnCopy('${addr}',this)">Sao ch√©p</button>
          <a class="btn out" href="${qrlink(addr)}" download>‚ö° T·∫£i QR</a>
        </div>
      </div>
    </div></div>`}
}

/* ==================== DATA LOAD ==================== */
async function loadDataSmart(){
  const latest = await j("data/latest.json");
  if(latest && Array.isArray(latest.items)){
    $("#hb").textContent="LIVE";
    $("#kUpd").textContent=ago(latest.generated_at);
    $("#scanMode").textContent="qu√©t: data";
    renderOpps(latest.items);
    return;
  }
  // fallback qu√©t tr·ª±c ti·∫øp
  const items = await scanLive();
  $("#scanMode").textContent="qu√©t: fallback";
  $("#hb").textContent="LIVE";
  $("#kUpd").textContent=ago(new Date().toISOString());
  renderOpps(items);
}
$("#refreshNow").onclick=loadDataSmart;

async function scanLive(){
  const items=[];
  try{
    const cg=await j("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=volume_desc&per_page=50&page=1&price_change_percentage=1h,24h,7d");
    if(Array.isArray(cg)) for(const c of cg){
      items.push({source:"coingecko",symbol:(c.symbol||"").toUpperCase(),name:c.name,
        price:+c.current_price||0,ch24h:+c.price_change_percentage_24h_in_currency||0,
        vol24h:+c.total_volume||0,
        score:(+c.price_change_percentage_1h_in_currency||0)*0.4+(+c.price_change_percentage_24h_in_currency||0)*0.35+(+c.price_change_percentage_7d_in_currency||0)*0.25+Math.log10((+c.total_volume||1)),
        link:`https://www.coingecko.com/en/coins/${c.id}`});
    }
  }catch(_){}
  try{
    const cl=await j("https://api.coinlore.net/api/tickers/?start=0&limit=50");
    const data=cl?.data||[];
    for(const c of data){
      items.push({source:"coinlore",symbol:(c.symbol||"").toUpperCase(),name:c.name,
        price:+c.price_usd||0,ch24h:+c.percent_change_24h||0,vol24h:+c.volume24||0,
        score:(+c.percent_change_24h||0)*0.7+Math.log10((+c.volume24||1)),
        link:`https://www.coinlore.com/coin/${(c.name||"").toLowerCase().replace(/\s+/g,"-")}`});
    }
  }catch(_){}
  const best={}; for(const it of items){if(!it.symbol) continue; const k=it.symbol; if(!best[k]||it.score>best[k].score) best[k]=it;}
  const out=Object.values(best).sort((a,b)=>b.score-a.score).slice(0,CFG.feeds?.top_n||10);
  return out;
}

function renderOpps(items){
  $("#kOpps").textContent=items.length||0;
  $("#opps").innerHTML=(items||[]).map(x=>{
    const ch=x.ch24h||0, pct=`${ch>=0?'+':''}${ch.toFixed(2)}%`;
    return `<div class="item">
      <div class="score">+${(x.score||0).toFixed(2)}</div>
      <div style="flex:1;min-width:0">
        <div class="section-title"><div><b>${x.symbol}</b> ¬∑ <span class="muted">${x.name||""}</span></div>
          <a class="btn out" target="_blank" href="${x.link||'#'}">Chi ti·∫øt ‚Üó</a></div>
        <div class="row" style="gap:8px">
          <span class="tag">Gi√°: $${fmt(x.price||0)}</span>
          <span class="tag ${ch>=0?'pos':'neg'}">24h: ${pct}</span>
          <span class="tag">Kh·ªëi l∆∞·ª£ng: $${fmt(x.vol24h||0)}</span>
          <span class="tag">Ngu·ªìn: ${x.source}</span>
        </div>
      </div>
    </div>`}).join("");
  $("#ticker").innerHTML = (items||[]).map(x=>`<span class="tag">${x.symbol}: $${fmt(x.price)} (${(x.ch24h||0).toFixed(2)}%)</span>`).join("")||"‚Äî";
}

/* ==================== STORE + TIME TABS ==================== */
($("#timeTabs").onclick=function(e){
  const b=e.target.closest(".tab"); if(!b) return; $$("#timeTabs .tab").forEach(x=>x.classList.remove("act")); b.classList.add("act");
  const t=b.dataset.t; renderBundles(t);
});
function renderBundles(mode="day"){
  const B=CFG.store?.bundles||[];
  $("#bundles").innerHTML=B.map(b=>{
    const badge = `<span class="badge">$${b.price}</span><span class="badge">${mode}</span>`;
    const tags=(b.tags||[]).map(t=>`<span class="tag">${t}</span>`).join("");
    return `<div class="card">
      <div class="section-title"><b>${b.title}</b><div class="row">${badge}</div></div>
      <div class="muted">${b.desc||""}</div>
      <div style="margin-top:6px">${tags}</div>
      <div class="row" style="margin-top:10px">
        <button class="btn" onclick="document.getElementById('unlockCode').focus()">Mua & nh·∫≠p m√£ ƒë·ªÉ xem</button>
      </div>
    </div>`}).join("");
}
renderBundles();

/* ==================== PAYWALL ==================== */
function paintPremium(){
  const P=CFG.store?.premium||[];
  $("#premium").innerHTML=P.map(p=>`<div class="card"><b>${p.title}</b>
    <div class="muted">${p.desc||""}</div>
    ${p.bullets?`<ul>${p.bullets.map(x=>`<li>${x}</li>`).join("")}</ul>`:""}
    ${p.link?`<a class="btn out" target="_blank" href="${p.link}">Xem d·ªØ li·ªáu ‚Üó</a>`:""}
  </div>`).join("");
}
function bindPaywall(){
  const SECRET=String(CFG.secrets?.unlock_code||"X1000VIP");
  const saved=localStorage.getItem("unlocked_code")||"";
  const uMsg=$("#uMsg");
  if(saved===SECRET) uMsg.innerHTML='<span style="color:var(--good)">‚úî ƒê√£ m·ªü kh√≥a tr√™n thi·∫øt b·ªã</span>';
  $("#btnUnlock").onclick=()=>{
    const code=$("#unlockCode").value.trim(),tx=$("#txHash").value.trim();
    if(code===SECRET){ localStorage.setItem("unlocked_code",code); if(tx) localStorage.setItem("tx_hash",tx);
      uMsg.innerHTML='<span style="color:var(--good)">‚úî Th√†nh c√¥ng! B·∫°n ƒë√£ c√≥ quy·ªÅn xem m·ª•c cao c·∫•p.</span>'; }
    else uMsg.innerHTML='<span style="color:var(--bad)">‚úñ M√£ kh√¥ng ƒë√∫ng. Li√™n h·ªá h·ªó tr·ª£ sau thanh to√°n.</span>';
  };
  $("#btnRemember").onclick=()=>{const code=$("#unlockCode").value.trim(); if(code){localStorage.setItem("unlocked_code",code); uMsg.textContent="ƒê√£ l∆∞u m√£ tr√™n thi·∫øt b·ªã.";}}
  $("#btnLock").onclick=()=>{localStorage.removeItem("unlocked_code"); uMsg.textContent="ƒê√£ kho√°. Nh·∫≠p m√£ ƒë·ªÉ m·ªü l·∫°i."}
}

/* ==================== PWA MINI (inline SW) ==================== */
function registerSW(){
  const sw=`
    const CORE=['./','index.html','index_hyperprime.html','config.json','data/latest.json'];
    self.addEventListener('install',e=>{e.waitUntil(caches.open('hp-core').then(c=>c.addAll(CORE)).then(()=>self.skipWaiting()))});
    self.addEventListener('activate',e=>{e.waitUntil(self.clients.claim())});
    self.addEventListener('fetch',e=>{
      const u=new URL(e.request.url);
      if(u.origin===location.origin){ e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request))); return; }
      e.respondWith(fetch(e.request).catch(()=>caches.match('./'))); // offline graceful
    });
  `;
  const blob=new Blob([sw],{type:'text/javascript'});
  const url=URL.createObjectURL(blob);
  navigator.serviceWorker.register(url,{scope:'./'});
}

/* ==================== INIT TEXTS ==================== */
document.getElementById("brand").textContent = CFG.site?.brand || FALLBACK_CFG.site.brand;
document.getElementById("tagline").textContent = CFG.site?.tagline || FALLBACK_CFG.site.tagline;
document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>
