<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>LightUnfold • HyperCore Web3 AI</title>
<meta name="theme-color" content="#0b0f13">
<meta name="description" content="Web3 AI tự động 24/7: cơ hội nổi bật, QR thanh toán, nội dung cao cấp với mã mở khóa, đa ngôn ngữ, PWA, siêu nhẹ.">
<meta property="og:title" content="LightUnfold • HyperCore Web3 AI">
<meta property="og:description" content="Web3 AI tự động 24/7: cơ hội nổi bật, QR thanh toán, nội dung cao cấp với mã mở khóa, đa ngôn ngữ, PWA, siêu nhẹ.">
<meta property="og:type" content="website">
<link rel="manifest" href="manifest.webmanifest">
<style>
  :root{--bg:#0b0f13;--card:#0f141a;--border:#1f2a3a;--text:#e9eef4;--muted:#98a6b3;--accent:#ff9800;--good:#2ecc71;--bad:#ff4d4f;--pill:#121922;--link:#79c0ff}
  *{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--text);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto}
  a{color:var(--link);text-decoration:none}a:hover{opacity:.9}
  .wrap{max-width:1100px;margin:0 auto;padding:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .pill{background:var(--pill);border:1px solid var(--border);border-radius:999px;padding:6px 10px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin-top:14px}
  h1{margin:8px 0 6px;font-size:28px}h3{margin:0 0 10px}.muted{color:var(--muted)}
  .grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
  .btn{background:var(--accent);color:#1a1200;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn.out{background:transparent;border:1px solid var(--border);color:var(--text)}
  .badgelink{padding:6px 10px;border:1px solid var(--border);border-radius:999px}
  .flex{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .item{border-top:1px dashed var(--border);padding:12px 0}
  .chip{display:inline-block;border-radius:8px;padding:2px 8px;margin-left:6px;font-weight:700}
  .pos{background:rgba(46,204,113,.15);color:var(--good);border:1px solid rgba(46,204,113,.35)}
  .neg{background:rgba(255,77,79,.15);color:var(--bad);border:1px solid rgba(255,77,79,.35)}
  .qr{background:#fff;padding:8px;border-radius:10px}
  .paygrid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
  .field{display:flex;gap:8px;align-items:center}
  input,textarea{width:100%;background:#0b1117;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px}
  .hidden{display:none}.ok{color:var(--good)}.err{color:var(--bad)}.fade{animation:fade .5s ease}
  @keyframes fade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
  .marquee{overflow:hidden;white-space:nowrap;border-top:1px dashed var(--border);border-bottom:1px dashed var(--border);padding:8px 0;margin-top:8px}
  .marquee-inner{display:inline-block;padding-right:40px;animation:scroll 24s linear infinite}
  @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
</style>
</head>
<body>
<div class="wrap">
  <div class="row">
    <span class="pill">ENS: <b id="ens">—</b></span>
    <span class="pill">Heartbeat: <b id="hb">—</b></span>
    <a class="pill" href="config.json" target="_blank">config</a>
    <a class="pill" href="data/latest.json" target="_blank">data</a>
    <span class="pill" id="langSwitch">VI / EN</span>
    <span class="pill" id="themeSwitch">🌗 Theme</span>
  </div>

  <h1 id="brand">Web3 AI • HyperCore</h1>
  <div class="muted" id="tagline">—</div>

  <div class="card">
    <div class="flex">
      <h3 style="margin:0" data-i="hot">🔥 Cơ hội nổi bật</h3>
      <span class="badgelink" id="refreshNow">↻ làm mới</span>
      <span class="badgelink" id="autoTick">auto: on</span>
    </div>
    <div id="opps" class="fade"></div>
    <div class="marquee"><div id="ticker" class="marquee-inner"></div></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px" data-i="pay">💳 Thanh toán</h3>
    <div id="pays" class="paygrid"></div>
    <div class="muted" style="margin-top:6px" data-i="hint">
      Quét QR / bấm để thanh toán. Sau khi thanh toán, nhập mã để mở nội dung cao cấp.
    </div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px" data-i="unlock">🔓 Nội dung cao cấp</h3>
    <div id="gate-locked">
      <div class="grid">
        <div>
          <div class="field"><input id="unlockCode" placeholder="Nhập mã mở khóa (từ chủ trang)"></div>
          <div class="field"><input id="txHash" placeholder="(Tuỳ chọn) Dán TX hash / bằng chứng"></div>
          <div class="row">
            <button class="btn" id="btnUnlock">Mở khóa</button>
            <button class="btn out" id="btnRemember">Nhớ trên thiết bị</button>
          </div>
          <div id="uMsg" class="muted" style="margin-top:6px"></div>
        </div>
        <div class="muted">
          <b>Cách hoạt động:</b>
          <ul>
            <li>Thanh toán (ETH/USDT/MoMo/VCB/PayPal…)</li>
            <li>Nhận mã ➜ nhập để mở khóa (lưu cục bộ)</li>
            <li>Dán TX hash (tuỳ chọn) để lưu lại trên thiết bị</li>
          </ul>
        </div>
      </div>
    </div>
    <div id="gate-open" class="hidden">
      <div class="row"><span class="pill ok">✔ Đã mở khóa</span><button class="btn out" id="btnLock">Khoá lại</button></div>
      <div class="grid" id="premium"></div>
    </div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">🤝 Affiliate</h3>
    <div id="affs" class="grid"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">🧰 Gói / Báo cáo</h3>
    <div id="bundles" class="grid"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">📰 Tin nhanh (AI)</h3>
    <div id="news" class="grid"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">📈 Widget nhúng</h3>
    <div class="grid" id="embeds"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">📣 Lan tỏa</h3>
    <div class="grid" id="socials"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">⚙️ Cache & PWA</h3>
    <div id="pwa" class="muted">Đang kích hoạt...</div>
  </div>

  <div class="muted" style="text-align:center;padding:26px 0">© <span id="year"></span> LightUnfold • Tự động 24/7 • HyperCore</div>
</div>

<script>
(async function(){
  // i18n
  const T={vi:{hot:"🔥 Cơ hội nổi bật",pay:"💳 Thanh toán",hint:"Quét QR / bấm để thanh toán. Sau khi thanh toán, nhập mã để mở nội dung cao cấp.",unlock:"🔓 Nội dung cao cấp"},
           en:{hot:"🔥 Hot opportunities",pay:"💳 Payments",hint:"Scan/click to pay. After payment, enter code to unlock premium content.",unlock:"🔓 Premium Content"}};
  const $=s=>document.querySelector(s), $$=s=>document.querySelectorAll(s);
  let LANG=(localStorage.lang||navigator.language||"vi").slice(0,2).toLowerCase().startsWith("vi")?"vi":"en";
  function i18n(){ $$('[data-i]').forEach(el=>{const k=el.dataset.i; if(T[LANG][k]) el.textContent=T[LANG][k];}); }
  $('#langSwitch').onclick=()=>{LANG=(LANG==='vi'?'en':'vi');localStorage.lang=LANG;i18n();}; i18n();

  // theme
  const DARK={"--bg":"#0b0f13","--card":"#0f141a","--border":"#1f2a3a","--text":"#e9eef4","--muted":"#98a6b3","--link":"#79c0ff"};
  const LIGHT={"--bg":"#f7fafc","--card":"#ffffff","--border":"#e2e8f0","--text":"#0b0f13","--muted":"#4a5568","--link":"#2563eb"};
  const applyTheme=m=>{const v=(m==='light'?LIGHT:DARK);for(const k in v)document.documentElement.style.setProperty(k,v[k]);};
  let theme=localStorage.theme||"dark"; applyTheme(theme);
  $('#themeSwitch').onclick=()=>{theme=(theme==='dark'?'light':'dark');localStorage.theme=theme;applyTheme(theme);};

  // helpers
  const num=n=>(n||0).toLocaleString(undefined,{maximumFractionDigits:2});
  const sleep=ms=>new Promise(r=>setTimeout(r,ms));
  async function getJSON(url,key){
    try{const j=await (await fetch(url,{cache:'no-store'})).json(); localStorage[key]=JSON.stringify(j); return j;}
    catch(e){return localStorage[key]?JSON.parse(localStorage[key]):{}}
  }

  // load config & data
  const cfg=await getJSON('config.json','cfg'); const latest=await getJSON('data/latest.json','latest');
  $('#brand').textContent=cfg.site?.brand||'Web3 AI • HyperCore'; $('#tagline').textContent=cfg.site?.tagline||''; $('#ens').textContent=cfg.site?.ens||'—';
  $('#year').textContent=new Date().getFullYear(); $('#hb').textContent=latest.items?'LIVE':'—';

  // render opps
  function renderOpps(list){
    const opp=$('#opps'); opp.innerHTML='';
    list.slice(0,(cfg.ui?.cards?.max_items||10)).forEach(x=>{
      const p=x.ch24h??0, chip=`<span class="chip ${p>=0?'pos':'neg'}">${p>=0?'+':''}${p.toFixed(2)}%</span>`;
      const el=document.createElement('div'); el.className='item fade';
      el.innerHTML=`<div class="flex"><div><b>${x.symbol}</b> · ${x.name||''}</div><div>$${num(x.price)}</div>${chip}${x.link?`<a class="badgelink" target="_blank" href="${x.link}">Chi tiết ↗</a>`:''}</div>
                    <div class="muted">Vol 24h: $${num(x.vol24h||0)} · Nguồn: ${x.source||'—'}</div>`;
      opp.appendChild(el);
    });
    $('#ticker').innerHTML=(list.map(x=>`${x.symbol}: $${num(x.price)} (${(x.ch24h||0).toFixed(2)}%)`).join(' · '))||'—';
  }
  renderOpps(latest.items||[]);

  // auto refresh
  let auto=true; $('#autoTick').onclick=()=>{auto=!auto;$('#autoTick').textContent='auto: '+(auto?'on':'off');};
  $('#refreshNow').onclick=async()=>{const j=await getJSON('data/latest.json','latest'); renderOpps(j.items||[]); $('#hb').textContent='LIVE';};
  (async function loop(){while(true){if(auto){const j=await getJSON('data/latest.json','latest');renderOpps(j.items||[]);}await sleep(Math.max(3,(cfg.schedule?.refresh_minutes||10))*60*1000)}})();

  // payments
  const paysWrap=$('#pays'), pays=cfg.site?.payments||{};
  const QR=(t,s=180)=>`https://chart.googleapis.com/chart?cht=qr&chs=${s}x${s}&chl=${encodeURIComponent(t)}`;
  const addPay=(title,desc,val,open)=>{if(!val)return;const d=document.createElement('div');d.className='card';
    d.innerHTML=`<div class="flex"><h4 style="margin:0">${title}</h4>${open?`<a class="badgelink" target="_blank" href="${open}">Mở ↗</a>`:''}</div>
    <div class="grid"><div><img class="qr" width="180" height="180" alt="QR" src="${QR(val)}"></div>
    <div><div class="muted">${desc}</div><div class="field" style="margin-top:8px"><input readonly value="${val}"></div>
    <div class="row"><button class="btn" onclick="navigator.clipboard.writeText('${val}')">Sao chép</button><a class="btn out" download="qr.png" href="${QR(val,480)}">Tải QR</a></div></div></div>`;
    paysWrap.appendChild(d);}
  addPay('ETH (EVM)','Nạp ETH/USDT trên EVM.',pays.eth,'https://metamask.app.link/');
  addPay('USDT (ERC20)','USDT mạng ERC20.',pays.usdt_erc20);
  addPay('MoMo','Thanh toán MoMo.',pays.momo);
  addPay('Vietcombank','Chuyển khoản VCB.',pays.vietcombank);
  addPay('PayPal','Thanh toán PayPal.',pays.paypal && `https://www.paypal.me/${String(pays.paypal).split('@')[0]}`);

  // affiliates
  (cfg.site?.affiliates||[]).forEach(a=>{const el=document.createElement('div');el.className='card fade';
    el.innerHTML=`<div class="flex"><h4 style="margin:0">${a.name}</h4><a class="badgelink" target="_blank" href="${a.url}">Tham gia ↗</a></div><div class="muted">${a.desc||''}</div>`;
    $('#affs').appendChild(el);
  });

  // bundles
  (cfg.store?.bundles||[]).forEach(b=>{const el=document.createElement('div');el.className='card fade';
    el.innerHTML=`<div class="flex"><h4 style="margin:0">${b.title}</h4><span class="badgelink">$${b.price}</span>${b.sla?`<span class="badgelink">${b.sla}</span>`:''}</div>
                 <div class="muted">${b.desc||''}</div><div style="margin-top:6px">${(b.tags||[]).map(t=>`<span class="pill">${t}</span>`).join(' ')}</div>
                 <div class="row" style="margin-top:10px"><button class="btn" onclick="document.getElementById('unlockCode').focus()">Mua & nhập mã để xem</button>${b.link?`<a class="btn out" target="_blank" href="${b.link}">Demo</a>`:''}</div>`;
    $('#bundles').appendChild(el);
  });

  // premium gate
  const SECRET=String((cfg.secrets&&cfg.secrets.unlock_code)||'X1000VIP');
  const gateOpen=$('#gate-open'), gateLock=$('#gate-locked'), uMsg=$('#uMsg');
  const setGate=o=>{gateOpen.classList.toggle('hidden',!o);gateLock.classList.toggle('hidden',o);};
  const paintPremium=()=>{const prem=$('#premium');prem.innerHTML='';
    (cfg.store?.premium||[{title:"Alpha Feed Pro",desc:"Dòng tin alpha siêu nhanh",bullets:["Tốc độ ms","Bộ lọc rủi ro","Bất thường dòng tiền"],link:"data/latest.json"}])
      .forEach(p=>{const el=document.createElement('div');el.className='card fade';
        el.innerHTML=`<h4 style="margin:0">${p.title}</h4><div class="muted">${p.desc||''}</div><ul>${(p.bullets||[]).map(x=>`<li>${x}</li>`).join('')}</ul>${p.link?`<a class="badgelink" target="_blank" href="${p.link}">Xem dữ liệu ↗</a>`:''}`;prem.appendChild(el);});
  };
  if(localStorage.unlocked_code===SECRET){setGate(true);paintPremium();}

  $('#btnUnlock').onclick=()=>{const c=$('#unlockCode').value.trim(),tx=$('#txHash').value.trim();
    if(c===SECRET){localStorage.unlocked_code=c; if(tx) localStorage.tx_hash=tx; setGate(true); paintPremium(); uMsg.innerHTML='<span class="ok">Đã mở khóa!</span>';}
    else uMsg.innerHTML='<span class="err">Mã không đúng.</span>';};
  $('#btnRemember').onclick=()=>{const c=$('#unlockCode').value.trim(); if(c){localStorage.unlocked_code=c; uMsg.textContent='Đã lưu trên thiết bị.';}};
  $('#btnLock').onclick=()=>{localStorage.removeItem('unlocked_code'); setGate(false);};

  // social widgets
  const em=$('#embeds'); (cfg.widgets?.charts||[]).forEach(w=>{const d=document.createElement('div');d.className='card';
    d.innerHTML=`<h4 style="margin:0">${w.title}</h4><iframe loading="lazy" style="width:100%;height:${w.height||360}px;border:0;border-radius:12px;background:#0b1117" src="${w.src}"></iframe>`;
    em.appendChild(d);
  });
  const socials=$('#socials'); (cfg.socials||[]).forEach(s=>{const d=document.createElement('div');d.className='card';
    d.innerHTML=`<h4 style="margin:0">${s.title}</h4><a class="badgelink" target="_blank" href="${s.url}">${s.cta||'Mở ↗'}</a>`;
    socials.appendChild(d);
  });

  // news (from config, optional)
  (cfg.news?.items||[]).forEach(n=>{const d=document.createElement('div');d.className='card';
    d.innerHTML=`<h4 style="margin:0">${n.title}</h4><div class="muted">${n.desc||''}</div>${n.link?`<a class="badgelink" target="_blank" href="${n.link}">Chi tiết ↗</a>`:''}`;
    $('#news').appendChild(d);
  });

  // PWA minimal: register service worker if exists
  if('serviceWorker' in navigator){try{await navigator.serviceWorker.register('sw.js');$('#pwa').textContent='PWA: OK (offline cache)';}catch{$('#pwa').textContent='PWA: not available';}}
})();
</script>
</body>
</html>
