<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Super Auto ‚Ä¢ Web3 AI X1000</title>
<meta name="theme-color" content="#0b0f13">
<meta name="description" content="Trang t√°c chi·∫øn t·ª± v·∫≠n h√†nh: qu√©t c∆° h·ªôi 24/7, caption ƒëa ng√¥n ng·ªØ, auto-affiliate, webhook Zapier ƒëƒÉng ch√©o, QR thanh to√°n & paywall.">
<style>
:root{--bg:#0b0f13;--card:#0f141a;--bd:#1f2a3a;--tx:#e9eef4;--mut:#9fb3c8;--ac:#ff9800;--good:#2ecc71;--bad:#ff4d4f;--pill:#121922;--lnk:#7dc1ff}
*{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--tx);font:15px/1.55 system-ui,-apple-system,Segoe UI,Roboto}
a{color:var(--lnk);text-decoration:none}
.wrap{max-width:1100px;margin:0 auto;padding:18px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{background:var(--pill);border:1px solid var(--bd);border-radius:999px;padding:6px 10px}
.card{background:var(--card);border:1px solid var(--bd);border-radius:14px;padding:16px;margin-top:14px}
h1{margin:8px 0 6px;font-size:28px}h3{margin:0 0 10px}.muted{color:var(--mut)}
.grid{display:grid;gap:14px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.btn{background:var(--ac);color:#1a1200;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.out{background:transparent;border:1px solid var(--bd);color:var(--tx)}
.badge{padding:6px 10px;border:1px solid var(--bd);border-radius:999px}
.flex{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.item{border-top:1px dashed var(--bd);padding:12px 0}
.chip{display:inline-block;border-radius:8px;padding:2px 8px;margin-left:6px;font-weight:700}
.pos{background:rgba(46,204,113,.15);color:var(--good);border:1px solid rgba(46,204,113,.35)}
.neg{background:rgba(255,77,79,.15);color:var(--bad);border:1px solid rgba(255,77,79,.35)}
.qr{background:#fff;padding:8px;border-radius:10px}
.paygrid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.field{display:flex;gap:8px;align-items:center}
input,textarea{width:100%;background:#0b1117;border:1px solid var(--bd);color:var(--tx);border-radius:10px;padding:10px}
.kpi{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0}
.kpi .box{flex:1 1 160px;background:var(--pill);border:1px solid var(--bd);border-radius:12px;padding:10px}
.now{font-size:22px;font-weight:800}
.ticker{overflow:hidden;white-space:nowrap;border-top:1px dashed var(--bd);border-bottom:1px dashed var(--bd);padding:8px 0;margin-top:8px}
.ticker span{display:inline-block;margin-right:20px}
.hidden{display:none}
.small{font-size:12px}
code{background:#000;padding:2px 6px;border-radius:6px}
</style>
</head>
<body>
<div class="wrap">
  <div class="row">
    <span class="pill">ENS: <b id="ens">‚Äî</b></span>
    <span class="pill">Heartbeat: <b id="hb">‚Äî</b></span>
    <a class="pill" href="config.json" target="_blank">config</a>
    <a class="pill" href="data/latest.json" target="_blank">data</a>
    <span class="pill" id="lang">VI / EN</span>
    <span class="pill" id="theme">üåó Theme</span>
  </div>

  <h1 id="brand">Super Auto ‚Ä¢ Web3 AI X1000</h1>
  <div id="tagline" class="muted">‚Äî</div>

  <div class="kpi">
    <div class="box"><div class="muted">C∆° h·ªôi</div><div class="now" id="kOpps">0</div></div>
    <div class="box"><div class="muted">C·∫≠p nh·∫≠t</div><div class="now" id="kUpd">‚Äî</div></div>
    <div class="box"><div class="muted">Ng√¥n ng·ªØ</div><div class="now" id="kLoc">vi/en</div></div>
  </div>

  <div class="card">
    <div class="flex">
      <h3 style="margin:0">üî• C∆° h·ªôi n·ªïi b·∫≠t</h3>
      <span class="badge" id="scanMode">qu√©t: data</span>
      <span class="badge" id="refresh">‚Üª l√†m m·ªõi</span>
      <span class="badge" id="auto">auto: on</span>
      <span class="badge" id="broadcast">üöÄ ph√°t s√≥ng</span>
    </div>
    <div id="opps"></div>
    <div class="ticker"><div id="ticker"></div></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">üí≥ Thanh to√°n</h3>
    <div id="pays" class="paygrid"></div>
    <div class="muted small">Qu√©t QR / click ƒë·ªÉ thanh to√°n nhanh. Nh·∫≠n m√£ m·ªü kh√≥a t·ª´ ch·ªß trang ƒë·ªÉ xem n·ªôi dung cao c·∫•p.</div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">üîì N·ªôi dung cao c·∫•p</h3>
    <div id="lock">
      <div class="grid">
        <div>
          <div class="field"><input id="unlockCode" placeholder="Nh·∫≠p m√£ m·ªü kh√≥a (t·ª´ ch·ªß trang)"></div>
          <div class="field"><input id="txHash" placeholder="(Tu·ª≥ ch·ªçn) D√°n TX hash / b·∫±ng ch·ª©ng thanh to√°n"></div>
          <div class="row">
            <button class="btn" id="btnUnlock">M·ªü kh√≥a</button>
            <button class="btn out" id="btnRemember">Nh·ªõ tr√™n thi·∫øt b·ªã</button>
          </div>
          <div id="uMsg" class="muted" style="margin-top:6px"></div>
        </div>
        <div class="muted small">
          <b>C√°ch ho·∫°t ƒë·ªông:</b>
          <ul>
            <li>B·∫°n nh·∫≠n m√£ sau khi thanh to√°n (ETH/USDT/MoMo/VCB/PayPal‚Ä¶)</li>
            <li>Nh·∫≠p m√£ ƒë·ªÉ m·ªü kh√≥a n·ªôi dung cao c·∫•p (l∆∞u trong thi·∫øt b·ªã, kh√¥ng c·∫ßn Zapier)</li>
            <li>D√°n TX hash (tu·ª≥ ch·ªçn) ƒë·ªÉ ghi ch√∫ c·ª•c b·ªô</li>
          </ul>
        </div>
      </div>
    </div>
    <div id="open" class="hidden">
      <div class="row"><span class="pill" style="border-color:#2ecc71;color:#2ecc71">‚úî ƒê√£ m·ªü kh√≥a</span><button class="btn out" id="btnLock">Kho√° l·∫°i</button></div>
      <div class="grid" id="premium"></div>
    </div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">ü§ù Affiliate</h3>
    <div id="affs" class="grid"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">üß∞ G√≥i / B√°o c√°o (10 ch·ªß l·ª±c)</h3>
    <div id="bundles" class="grid"></div>
  </div>

  <div class="card">
    <h3 style="margin:0 0 8px">üîó Nh√∫ng widget (t·ª± lan t·ªèa)</h3>
    <div class="grid">
      <div>
        <div class="muted small">Sao ch√©p ƒëo·∫°n sau ƒë·ªÉ nh√∫ng ticker & hot list v√†o website/blog b·∫•t k·ª≥:</div>
        <textarea id="embed" rows="4" readonly></textarea>
        <div class="row" style="margin-top:8px">
          <button class="btn out" id="copyEmbed">Sao ch√©p</button>
        </div>
      </div>
      <div class="muted small">M·∫πo: ai nh√∫ng widget n√†y ‚Üí traffic quay v·ªÅ trang c·ªßa b·∫°n (ƒë√£ g·∫Øn affiliate & tracking).</div>
    </div>
  </div>

  <div class="muted small" style="text-align:center;margin-top:18px">¬© <span id="year"></span> Super Auto ‚Ä¢ Web3 AI X1000</div>
</div>

<script>
(async function(){
  const $=s=>document.querySelector(s);
  const num=n=>(n||0).toLocaleString(undefined,{maximumFractionDigits:2});
  const ago=iso=>{try{const d=new Date(iso);const s=(Date.now()-d)/1e3;return s<60?Math.floor(s)+"s":s<3600?Math.floor(s/60)+"m":s<86400?Math.floor(s/3600)+"h":Math.floor(s/86400)+"d";}catch(e){return"‚Äî"}};
  const sleep=ms=>new Promise(r=>setTimeout(r,ms));
  function QR(text,size=180){return `https://chart.googleapis.com/chart?cht=qr&chs=${size}x${size}&chl=${encodeURIComponent(text)}`;}

  // lang/theme
  let LANG=(localStorage.getItem('lang')||navigator.language||'vi').slice(0,2).toLowerCase().startsWith('vi')?'vi':'en';
  $('#lang').onclick=()=>{LANG=(LANG==='vi'?'en':'vi');localStorage.setItem('lang',LANG);};
  $('#theme').onclick=()=>{document.documentElement.classList.toggle('light');};
  $('#year').textContent=new Date().getFullYear();

  // get config/data (with offline cache)
  async function getJSON(url,key){
    try{
      const j=await (await fetch(url,{cache:'no-store'})).json();
      localStorage.setItem(key,JSON.stringify(j));
      return j;
    }catch(e){
      const c=localStorage.getItem(key); return c?JSON.parse(c):{};
    }
  }
  const cfg = await getJSON('config.json','cfg');
  const latest = await getJSON('data/latest.json','latest');
  if(latest.items) $('#hb').textContent='LIVE';

  // header
  $('#brand').textContent = cfg.site?.brand || 'Super Auto ‚Ä¢ Web3 AI X1000';
  $('#tagline').textContent= cfg.site?.tagline||'T·ª± ƒë·ªông 24/7';
  $('#ens').textContent   = cfg.site?.ens||'‚Äî';
  $('#kLoc').textContent  = (cfg.site?.locales||['vi','en']).join('/');
  $('#kOpps').textContent = (latest.items||[]).length||0;
  $('#kUpd').textContent  = latest.generated_at?ago(latest.generated_at):'‚Äî';

  // opps
  function renderOpps(list){
    const wrap=$('#opps'); wrap.innerHTML='';
    (list||[]).slice(0,cfg.ui?.cards?.max_items||10).forEach(x=>{
      const pct=x.ch24h??0, ch=`<span class="chip ${pct>=0?'pos':'neg'}">${pct>=0?'+':''}${pct.toFixed(2)}%</span>`;
      const vol = x.vol24h?` ¬∑ Vol 24h: $${num(x.vol24h)}`:'';
      const link= x.link?`<a class="badge" href="${x.link}" target="_blank">‚Üó</a>`:'';
      const el=document.createElement('div'); el.className='item';
      el.innerHTML=`<div class="flex"><div><b>${x.symbol}</b> ¬∑ ${x.name||''}</div><div>$${num(x.price)}</div>${ch}${link}</div>
                    <div class="muted small">Ngu·ªìn: ${x.source||'‚Äî'}${vol}</div>`;
      wrap.appendChild(el);
    });
    $('#ticker').innerHTML=(list||[]).map(x=>`<span>${x.symbol}: $${num(x.price)} (${(x.ch24h||0).toFixed(2)}%)</span>`).join('')||'<span>‚Äî</span>';
  }
  renderOpps(latest.items||[]);

  // payments
  (function(){
    const p=cfg.site?.payments||{}, wrap=$('#pays'); wrap.innerHTML='';
    function card(title,desc,addr,openUrl){
      const html=`<div class="card"><div class="flex"><h4 style="margin:0">${title}</h4>${openUrl?`<a class="badge" target="_blank" href="${openUrl}">M·ªü ‚Üó</a>`:''}</div>
      <div class="grid"><div><img class="qr" width="180" height="180" src="${QR(addr)}" alt="QR"></div>
      <div><div class="muted small">${desc}</div><div class="field" style="margin-top:8px"><input readonly value="${addr}"></div>
      <div class="row" style="margin-top:6px"><button class="btn out" onclick="navigator.clipboard.writeText('${addr}')">Sao ch√©p</button>
      <a class="btn out" download="qr.png" href="${QR(addr,512)}">T·∫£i QR</a></div></div></div></div>`;
      const d=document.createElement('div'); d.innerHTML=html; return d.firstChild;
    }
    if(p.eth) $('#pays').appendChild(card('ETH (EVM)','N·∫°p ETH/USDT tr√™n EVM.',p.eth,'https://metamask.app.link/'));
    if(p.usdt_erc20) $('#pays').appendChild(card('USDT (ERC20)','USDT m·∫°ng ERC20.',p.usdt_erc20));
    if(p.momo) $('#pays').appendChild(card('MoMo','Thanh to√°n MoMo.',p.momo));
    if(p.vietcombank) $('#pays').appendChild(card('Vietcombank','Chuy·ªÉn kho·∫£n VCB.',p.vietcombank));
    if(p.paypal){ const pp=`https://www.paypal.me/${(p.paypal||'').split('@')[0]}`; $('#pays').appendChild(card('PayPal','Thanh to√°n PayPal.',p.paypal,pp));}
  })();

  // affiliates
  const affiliates = cfg.affiliates||[];
  (function(){
    const wrap=$('#affs'); wrap.innerHTML='';
    affiliates.forEach(a=>{
      const el=document.createElement('div'); el.className='card';
      el.innerHTML=`<div class="flex"><h4 style="margin:0">${a.name}</h4><a class="badge" target="_blank" href="${a.url}">Tham gia ‚Üó</a></div>
      <div class="muted small">${a.desc||a.tag||''}</div>`;
      wrap.appendChild(el);
    });
  })();
  function pickAffiliate(){return affiliates.length?affiliates[Math.floor(Math.random()*affiliates.length)]:null;}

  // bundles / premium items
  (function(){
    const b=(cfg.store&&cfg.store.bundles)||[];
    const wrap=$('#bundles'); wrap.innerHTML='';
    b.forEach(x=>{
      const tags=(x.tags||[]).map(t=>`<span class="badge">${t}</span>`).join(' ');
      const el=document.createElement('div'); el.className='card';
      el.innerHTML=`<div class="flex"><h4 style="margin:0">${x.title}</h4><span class="badge">$${x.price}</span>${x.sla?`<span class="badge">${x.sla}</span>`:''}</div>
      <div class="muted small">${x.desc||''}</div><div style="margin-top:6px">${tags}</div>
      <div class="row" style="margin-top:8px"><button class="btn" onclick="document.getElementById('unlockCode').focus()">Mua & nh·∫≠p m√£</button>${x.link?`<a class="btn out" target="_blank" href="${x.link}">Demo</a>`:''}</div>`;
      wrap.appendChild(el);
    });
  })();

  // paywall
  const SECRET = String((cfg.secrets && cfg.secrets.unlock_code) || 'X1000VIP');
  const gateOpen = $('#open'), gateLock = $('#lock'), uMsg = $('#uMsg');
  function setGate(open){gateOpen.classList.toggle('hidden',!open);gateLock.classList.toggle('hidden',open);}
  function paintPremium(){
    const prem=$('#premium'); prem.innerHTML='';
    const items=(cfg.store&&cfg.store.premium)||[{title:"Alpha Feed Pro",desc:"D√≤ng tin alpha si√™u nhanh, ∆∞u ti√™n c∆° h·ªôi l·ªách pha th·ªã tr∆∞·ªùng.",bullets:["T·ªëc ƒë·ªô ms","B·ªô l·ªçc r·ªßi ro","B·∫•t th∆∞·ªùng d√≤ng ti·ªÅn"],link:"data/latest.json"}];
    items.forEach(p=>{
      const el=document.createElement('div'); el.className='card';
      el.innerHTML=`<h4 style="margin:0">${p.title}</h4><div class="muted small">${p.desc||''}</div>
      <ul>${(p.bullets||[]).map(s=>`<li>${s}</li>`).join('')}</ul>${p.link?`<a class="badge" target="_blank" href="${p.link}">Xem d·ªØ li·ªáu ‚Üó</a>`:''}`;
      prem.appendChild(el);
    });
  }
  const keep=localStorage.getItem('unlocked_code')||'';
  if(keep===SECRET){ setGate(true); paintPremium(); if(localStorage.getItem('tx_hash')) uMsg.innerHTML='<span style="color:#2ecc71">TX: '+localStorage.getItem('tx_hash')+'</span>'; }
  $('#btnUnlock').onclick=()=>{const c=$('#unlockCode').value.trim(),tx=$('#txHash').value.trim(); if(c===SECRET){setGate(true);paintPremium();uMsg.innerHTML='<span style="color:#2ecc71">ƒê√£ m·ªü kh√≥a!</span>'; if(tx) localStorage.setItem('tx_hash',tx);} else uMsg.innerHTML='<span style="color:#ff4d4f">M√£ kh√¥ng ƒë√∫ng.</span>';};
  $('#btnRemember').onclick=()=>{const c=$('#unlockCode').value.trim(); if(c){localStorage.setItem('unlocked_code',c); uMsg.textContent='ƒê√£ l∆∞u tr√™n thi·∫øt b·ªã.';}};
  $('#btnLock').onclick=()=>{localStorage.removeItem('unlocked_code'); setGate(false);};

  // embed widget
  const widgetSrc = location.href;
  const code = `<iframe src="${widgetSrc}" style="width:100%;height:600px;border:0;border-radius:12px;overflow:hidden" loading="lazy"></iframe>`;
  $('#embed').value = code;
  $('#copyEmbed').onclick=()=>{navigator.clipboard.writeText(code)};

  // auto refresh
  let auto=true; $('#auto').onclick=()=>{auto=!auto;$('#auto').textContent='auto: '+(auto?'on':'off');};
  $('#refresh').onclick=()=>location.reload();

  // caption & broadcast (Zapier optional)
  function buildCaption(top){
    const a = pickAffiliate();
    const aff = a?` ‚Ä¢ ${a.name}: ${a.url}`:'';
    const vi = `üî• TOP h√¥m nay: ${top.map(x=>`${x.symbol} $${x.price} (${(x.ch24h||0).toFixed(2)}%)`).join(' | ')} ‚Ä¢ c·∫≠p nh·∫≠t ${ago(latest.generated_at)} ‚Ä¢ xem: ${location.href}${aff}`;
    const en = `üî• Today‚Äôs TOP: ${top.map(x=>`${x.symbol} $${x.price} (${(x.ch24h||0).toFixed(2)}%)`).join(' | ')} ‚Ä¢ updated ${ago(latest.generated_at)} ‚Ä¢ view: ${location.href}${aff}`;
    return {vi,en};
  }
  async function broadcastIfConfigured(kind,payload){
    const hook = (cfg.webhooks && (cfg.webhooks.zapier_catch || cfg.webhooks.ZAPIER_CATCH || cfg.webhooks.zapier)) || null;
    if(!hook) return false;
    try{
      await fetch(hook,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({kind,...payload})});
      return true;
    }catch(e){return false;}
  }
  const list = latest.items||[];
  const cap = buildCaption(list.slice(0,5));
  const hot = list.find(x=> (x.ch24h||0) >= (cfg.triggers?.pump_24h||12) || (x.vol24h||0) >= (cfg.triggers?.min_vol_usd||5_000_000) );
  $('#scanMode').textContent = list.length ? 'qu√©t: data' : 'qu√©t: fallback';
  $('#broadcast').onclick=async()=>{
    const ok = await broadcastIfConfigured('manual_broadcast',{ lang:LANG, caption:cap[LANG], top:list.slice(0,10) });
    alert(ok?'ƒê√£ g·ª≠i webhook Zapier!':'Ch∆∞a c·∫•u h√¨nh webhook Zapier trong config.json');
  };
  (async function autoBlast(){
    if(!hot) return;
    const key='last_hot_broadcast';
    const last=Number(localStorage.getItem(key)||0);
    if(Date.now()-last<30*60*1000) return;
    const ok = await broadcastIfConfigured('hot_pick',{ symbol:hot.symbol, change24h:hot.ch24h, vol24h:hot.vol24h, caption:cap[LANG] });
    if(ok) localStorage.setItem(key, Date.now().toString());
  })();

})();
</script>
</body>
</html>
